@import "../../utilities/oj.utilities";
@import "../../common/widgets/oj.common.formcontrol.mixins";

$includeComboboxClasses:   $includeFormControlClasses !default;

// include dependencies
@if $includeComboboxClasses != false {
  $includeIconClasses:              true !global;
  $includeNoteWindowClasses:        true !global;
  $includeLabelClasses:             true !global;
  $includeMessagingClasses:         true !global;
  $includeFormControlCommonClasses: true !global;
}

@import "../../common/helpers/oj.common.helpers"; 
@import "oj.alta.icons";
@import "oj.alta.tooltip";
@import "oj.alta.messaging";
@import "oj.alta.formcontrol.label";
@import "oj.alta.formcontrol.common";



@if $includeComboboxClasses != false {
  @include exports("combobox") {
    /* combobox */
    /* --------------------------------------------------------------- */
    .oj-combobox {
      position: relative;
      display: inline-block;
      vertical-align: middle; 
      max-width: $formControlLargeMaxWidth;
      min-width: $formControlMinWidth;
      width: 100%;
      // font size needs to be on the root, because max/min width is in em.
      font-size: $fontSize;
    }

    .oj-combobox,
    .oj-combobox-drop {
      @include oj-box-sizing-property(border-box); 
    }

    .oj-combobox .oj-combobox-choice {
      @include oj-form-control-content;
      line-height: 26px;
      padding-left: 5px;
      display: block;
      outline: 0;
      overflow: hidden;
      position: relative;
      white-space: nowrap;
      background-clip: padding-box;
    }

    .oj-combobox.oj-combobox-allowclear .oj-combobox-choice .oj-combobox-search {
      @include oj-ltr() {
        margin-right: 42px; 
      }
      @include oj-rtl() {
        margin-left: 42px; 
      }
    }

    .oj-combobox .oj-combobox-choice .oj-combobox-search {
      display: block;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis; 
      @include oj-ltr() {
        margin-right: 26px;
      }
      @include oj-rtl() {
        margin-left: 26px; 
      }
    }
      
    .oj-combobox .oj-combobox-choice abbr {
      display: none;
      width: 12px;
      height: 12px;
      position: absolute;
      top: 6px;
      font-size: 1px;
      border: 0;
      cursor: pointer;
      outline: 0; 
      @include oj-ltr() {
        right: 34px;
      }
      @include oj-rtl() {
        left: 34px; 
      }
    }

    .oj-combobox.oj-combobox-allowclear .oj-combobox-choice abbr {
      display: inline-block; 
    }

    .oj-combobox .oj-combobox-choice abbr:hover {
      cursor: pointer; 
    }

    // todo: combobox should be using a button internally, not rendering its own
    .oj-combobox .oj-combobox-choice .oj-combobox-arrow {
      display: inline-block;
      text-align: center;
      width: 28px;
      height: 28px;
      position: absolute;
      top: 0;
      @include oj-ltr() {
        right: 0;
      }
      @include oj-rtl() {
        left: 0;
      }
    }
    
    // todo: layout may need work, see 
    //http://aseng-wiki.us.oracle.com/asengwiki/display/ASDevJDeveloper/JET+Theming+Internal+Developers#JETThemingInternalDevelopers-FormControlsandButtons
    .oj-combobox-search input {
      width: 100%;
      border: 0;
      box-shadow: none;
      outline: 0; 
      background-color: $formControlBgColor;
    }

    .oj-combobox-drop {
      position: absolute;
      // todo: please talk to lory and gary about this zindex
      // http://aseng-wiki.us.oracle.com/asengwiki/display/ASDevJDeveloper/JET+Popup+Framework
      z-index: 9999;
      top: 100%;
      background: $background1Color;
      border: $borderWidth solid $windowBorderColor;
      border-top: 0;
      box-shadow: $smallBoxShadow; 
    }

    .oj-combobox-drop-auto-width {
      border-top: $borderWidth solid $windowBorderColor;
      width: auto; 
    }

    .oj-combobox-drop.oj-combobox-drop-above {
      border-top: $borderWidth solid $windowBorderColor;
      border-bottom: 0;
      box-shadow: $smallBoxShadow; 
    }

    /* results */
    .oj-combobox-results {
      max-height: 200px;
      padding: 0;
      margin: 4px 0 4px 0;
      position: relative;
      overflow-x: hidden;
      overflow-y: auto;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0); 
    }

    .oj-combobox-results ul.oj-combobox-result-sub {
      margin: 0;
      padding-left: 0; 
    }

    // todo: there seems to be a lot of hard coded px values. Please try testing your widget in the giant theme
    // Currently you can change the theme on the style lab page (this may move to another location)
    // look for "giant" here:
    // http://slc01hih.us.oracle.com:8080/hudson/job/OJET_Build/lastSuccessfulBuild/artifact/apps/components/public_html/globalStyleLab.html
    .oj-combobox-results ul.oj-combobox-result-sub > li .oj-combobox-result-label {
      padding-left: 20px; 
    }

    .oj-combobox-results ul.oj-combobox-result-sub ul.oj-combobox-result-sub > li .oj-combobox-result-label {
      padding-left: 40px; 
    }

    .oj-combobox-results ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub > li .oj-combobox-result-label {
      padding-left: 60px; 
    }

    .oj-combobox-results ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub > li .oj-combobox-result-label {
      padding-left: 80px; 
    }

    .oj-combobox-results ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub > li .oj-combobox-result-label {
      padding-left: 100px; 
    }

    .oj-combobox-results ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub > li .oj-combobox-result-label {
      padding-left: 110px; 
    }

    .oj-combobox-results ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub ul.oj-combobox-result-sub > li .oj-combobox-result-label {
      padding-left: 120px; 
    }

    .oj-combobox-results li {
      list-style: none;
      display: list-item;
      background-image: none; 
    }

    // why are you using ">" here, is it needed?
    .oj-combobox-results li.oj-combobox-result-with-children > .oj-combobox-result-label {
      font-weight: bold; 
    }

    // why are you using contextual selectors? Can you remove the ".oj-combobox-results " 
    // from the front here and just use .oj-combobox-result-label, 
    // same comment for all css in this file, if you don't need a contextual selector please remove it.
    .oj-combobox-results .oj-combobox-result-label {
      padding-left: 5px;
      line-height: 24px;
      margin: 0;
      cursor: pointer;
      min-height: 1em;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none; 
    }

    .oj-combobox-results .oj-combobox-highlighted {
      background: $interaction2Color;
    }

    .oj-combobox-results .oj-combobox-highlighted:active {
      background: $interaction3Color;
    }

    .oj-combobox-results li em {
      background: #feffde;
      font-style: normal; 
    }

    .oj-combobox-results .oj-combobox-highlighted em {
      background: transparent; 
    }

    /*
    disabled look for disabled choices in the results dropdown
    */
    .oj-combobox-results .oj-disabled {
      color: $textColorDisabled;
      display: list-item;
      cursor: default; 
    }

    .oj-combobox-results .oj-combobox-selected {
      display: none; 
    }

    /* disabled styles */
    .oj-combobox.oj-disabled .oj-combobox-choice,
    .oj-combobox.oj-disabled .oj-combobox-choice input {
      @include oj-form-control-content-disabled;
    }

    .oj-combobox.oj-disabled .oj-combobox-choice .oj-combobox-arrow { 
      cursor: default;
    }
      
    .oj-combobox.oj-disabled .oj-combobox-choice abbr {
      display: none; 
    }

    /* multiselect */
    .oj-combobox-multi .oj-combobox-choices {
      @include oj-box-sizing-property(border-box);
      @include oj-form-control-content;
      height: auto;
      margin: 0;
      padding: 0;
      position: relative;
      cursor: text;
      overflow: hidden;
    }

    .oj-combobox-locked {
      padding: 3px 5px 3px 5px; 
    }

    .oj-combobox-multi .oj-combobox-choices {
      min-height: 26px; 
    }

    .oj-combobox-multi .oj-combobox-choices li {
      list-style: none; 
      @include oj-ltr() {
        float: left;
      }
      @include oj-rtl() {
        float: right;
      }   
    }

    .oj-combobox-multi .oj-combobox-choices .oj-combobox-search-field {
      margin: 0;
      padding: 0;
      white-space: nowrap; 
    }

    .oj-combobox-search-field .oj-combobox-input {
      padding: 5px;
      margin: 1px 0;
      font-family: inherit;
      color: $textColor;
      background-color: $formControlBgColor;
      outline: 0;
      border: 0; 
    }

    .oj-combobox-input.oj-combobox-default {
      color: $tertiaryTextColor; 
    }

    .oj-combobox-multi .oj-combobox-choices .oj-combobox-search-choice {
      padding: 3px 18px 3px 5px;
      margin: 3px 0 3px 5px;
      position: relative;
      line-height: 13px;
      color: $textColor;
      cursor: default;
      @include oj-border-radius($mediumBorderRadius);
      background-color: $buttonBgColor;
      @include oj-background-image($buttonBgImage); 
      background-clip: padding-box;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none; 
    }

    .oj-combobox-multi .oj-combobox-choices .oj-combobox-search-choice .oj-combobox-chosen {
      cursor: default; 
    }

    .oj-combobox-multi .oj-combobox-choices .oj-combobox-search-choice-focus {
      background: $buttonBgColorHover; 
      color: $buttonTextColorHover;
    }

    .oj-combobox-search-choice-close {
      display: block;
      width: 12px;
      height: 13px;
      position: absolute;
      right: 5px;
      top: 3px;
      font-size: 1px;
      outline: none;
      background: url("images/clearEntry_ena.png"); 
    }

    .oj-combobox-search-choice-close:hover {
      background: url("images/clearEntry_ovr.png"); 
    }

    .oj-combobox-search-choice-close:hover {
      background: url("images/clearEntry_dwn.png"); 
    }

      
    /* disabled styles */
    .oj-combobox-multi.oj-disabled .oj-combobox-choices,
    .oj-combobox-multi.oj-disabled .oj-combobox-choices .oj-combobox-search-choice,
    .oj-combobox-multi.oj-disabled .oj-combobox-choices input {
      @include oj-form-control-content-disabled;
    }

    .oj-combobox-multi.oj-disabled .oj-combobox-choices .oj-combobox-search-choice .oj-combobox-search-choice-close {
      display: none;
      background: none; 
    }

    /* end multiselect */
    
    /* icon */
    /* -----------------------------*/

    /* open icon for combobox */
    .oj-combobox-open-icon:before {
      @extend .oj-fwk-icon-arrow02-s:before;
    }

    .oj-combobox-open-icon {
      text-align: center;
      vertical-align: middle;
      overflow: hidden;
      cursor: pointer;
      font-size: .75rem;
    }
    
    .oj-combobox.oj-disabled a:hover .oj-combobox-open-icon {
      color: $iconColorDisabled;
      cursor: default;
    }

    /* Invalid styling for the widget */
    .oj-combobox.oj-invalid .oj-combobox-choice,
    .oj-combobox-multi.oj-invalid .oj-combobox-choices {
        border: $formControlMessagingBorderWidth solid $borderColorError;
    }

    /* Warning styling for the widget */
    .oj-combobox.oj-warning .oj-combobox-choice,
    .oj-combobox-multi.oj-warning .oj-combobox-choices {
        border: $formControlMessagingBorderWidth solid $borderColorWarning;
    }

    .oj-combobox-offscreen, .oj-combobox-offscreen:focus {
      clip: rect(0 0 0 0);
      width: 1px;
      height: 1px;
      border: 0;
      margin: 0;
      padding: 0;
      overflow: hidden;
      position: absolute;
      outline: 0;
      left: 0;
      top: 0; 
    }

    .oj-combobox-drop-mask {
      border: 0;
      margin: 0;
      padding: 0;
      position: fixed;
      left: 0;
      top: 0;
      min-height: 100%;
      min-width: 100%;
      height: auto;
      width: auto;
      opacity: 0;
      z-index: 9998;
      /* styles required for IE to work */
      background-color: $background1Color;
      filter: alpha(opacity=0); 
    }

    .oj-combobox-display-none {
      display: none; 
    }

    .oj-combobox-measure-scrollbar {
      position: absolute;
      top: -10000px;
      left: -10000px;
      width: 100px;
      height: 100px;
      overflow: scroll; 
    }
  }
}