define(["ojs/ojcore","knockout","ojs/ojmodel"],function(a,e){a.ta=o_a();o_("KnockoutUtils",a.ta,a);a.ta.Js="oj._internalObj";a.ta.wd="oj._underUpdate";a.ta.bj="oj.collectionUpdating";a.ta.map=function(d,b,c){function f(b){return function(c){h[a.ta.wd]||d.set(b,c)}}var h,g,l,k;if(d instanceof a.g){h=c?e.observableArray():[];a.ta.pA(h,d);for(g=0;g<d.nc();g+=1)h.push(a.ta.map(d.Gm(g,null,!0,!1),b));g=function(b){var c;try{if(!h[a.ta.wd]){h[a.ta.bj]=!0;for(c=0;c<b.length;c++){var e=b[c].index,f=a.ta.ja(b[c].value),
g=b[c].status;"added"===g?e>=d.length-1?d.add(f):d.add(f,{at:e}):"deleted"===g&&d.Ah(f,e)}d.comparator&&(h[a.ta.wd]=!0,h.sort(function(b,c){return a.g.Wo(b,c,d.comparator,d,this)}),h[a.ta.wd]=!1)}}catch(k){throw k;}finally{h[a.ta.bj]=!1}};c&&h.subscribe&&h.subscribe(g,null,"arrayChange");c=function(b,c,d){var e;try{!h[a.ta.bj]&&c instanceof a.g&&(h[a.ta.wd]=!0,e=d.index,h.splice(e,1))}catch(f){throw f;}finally{h[a.ta.wd]=!1}};g=function(c,d,e){var f,g;try{if(!h[a.ta.bj]&&d instanceof a.g&&(h[a.ta.wd]=
!0,f=d.CJ(c),void 0!==f&&-1<f))if(g=a.ta.map(c,b),e.fillIn){for(var k=Array.isArray(h)?h.length:h().length;k<f;k++)h.splice(k,0,a.ta.map(d.Gm(k,null,!0,!1),b));h.splice(f,1,g)}else h.splice(f,0,g)}catch(l){throw l;}finally{h[a.ta.wd]=!1}};l=function(b){try{!h[a.ta.bj]&&b instanceof a.g&&(h[a.ta.wd]=!0,e.isObservable(h)?h.removeAll():h=[])}catch(c){throw c;}finally{h[a.ta.wd]=!1}};k=function(b){try{!h[a.ta.bj]&&b instanceof a.g&&(h[a.ta.wd]=!0,h.sort(function(c,e){return a.g.Wo(c,e,d.comparator,b,
this)}))}catch(c){throw c;}finally{h[a.ta.wd]=!1}};d.sf(a.H.q.ADD,g,void 0,void 0,!0);d.sf(a.H.q.REMOVE,c,void 0,void 0,!0);d.sf(a.H.q.RESET,l,void 0,void 0,!0);d.sf(a.H.q.SORT,k,void 0,void 0,!0)}else{if(void 0===d)return;h={};c=d.attributes;g=null;for(g in c)c.hasOwnProperty(g)&&(l=e.observable(d.get(g)),h[g]=l,k=f(g),k.RO=g,l.subscribe&&l.subscribe(k));c=function(b){var c,d;try{for(d in h[a.ta.wd]=!0,c=b.hs(),c)if(c.hasOwnProperty(d))h[d](b.get(d))}catch(e){throw e;}finally{h[a.ta.wd]=!1}};d.sf(a.H.q.CHANGE,
c,void 0,void 0,!0);a.ta.pA(h,d);b&&b(h)}return h};o_("KnockoutUtils.map",a.ta.map,a);a.ta.Lc=function(d){var b=[],c,e;for(c=0;c<d.length;c+=1)e=a.ta.ja(d[c]),b.push(e);return b};a.ta.ja=function(d){return d instanceof a.i?d:d[a.ta.Js]};a.ta.pA=function(d,b){try{Object.defineProperty(d,a.ta.Js,{value:b,enumerable:!1})}catch(c){d[a.ta.Js]=b}}});
//# sourceMappingURL=oj-modular.map