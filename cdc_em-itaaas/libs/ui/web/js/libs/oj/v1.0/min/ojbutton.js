define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(b,e){(function(){function a(a,b){var c=a.name,d=a.form;c?(c=c.replace(/'/g,"\\'"),c=":radio[name\x3d'"+c+"']:oj-button",d=b?b.filter(c):d?e(d).find(c):e(c,a.ownerDocument).filter(function(){return!this.form})):d=(b?b.filter(a):e(a)).filter(":oj-button");return d}b.ta("oj.ojButton",e.oj.baseComponent,{version:"1.0.0",defaultElement:"\x3cbutton\x3e",widgetEventPrefix:"oj",options:{disabled:null,display:"all",label:null,icons:{start:null,
end:"auto"},menu:null},_create:function(){this.element.closest("form").unbind("reset"+f).bind("reset"+f,function(){var a=e(this);setTimeout(function(){a.find(":oj-button").each(function(){e(this).data("oj-ojButton").Bn(!1)}).length||a.unbind("reset"+f)},1)});"boolean"!==typeof this.options.disabled&&(this.options.disabled=!!this.element.prop("disabled"));this.wm=this.eventNamespace+"menu";this.HK();this.Yt=!!this.ub.attr("title");var a=this,b=this.options,g="checkbox"===this.type||"radio"===this.type,
k=g?"":"oj-active";this.ub.addClass(h);this.gc.bind("mouseenter"+this.eventNamespace,function(){b.disabled||(this===d&&a.ub.addClass("oj-active"),a.ub.addClass("oj-hover").removeClass("oj-default"))}).bind("mouseleave"+this.eventNamespace,function(){a.ub.removeClass("oj-hover");b.disabled||(a.ub.removeClass(k),a.Rf())}).bind("click"+this.eventNamespace,function(a){b.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.attr("role","button").bind("focus"+this.eventNamespace,function(){a.ub.addClass("oj-focus").removeClass("oj-default")}).bind("blur"+
this.eventNamespace,function(){a.ub.removeClass("oj-focus");a.Rf()});g&&(this.element.bind("change"+this.eventNamespace,function(b){a.Bn(!0);var c=e(this).closest(":oj-buttonset").data("oj-ojButtonset"),d=c&&c.io(c.Zb);c&&void 0!==d&&(c.gA=b,c._setOption("checked",d))}),this.gc.bind("mousedown"+this.eventNamespace,function(){b.disabled||(c=this,a.document.one("mouseup",function(){c=null}))}).bind("mouseup"+this.eventNamespace,function(){b.disabled||this!==c||a.element.focus()}));"checkbox"===this.type?
(this.gc.bind("click"+this.eventNamespace,function(){if(b.disabled)return!1}),this.element.bind("keyup"+this.eventNamespace,function(c){c.keyCode===e.ui.keyCode.ENTER&&(b.disabled||a.element.click())})):"radio"===this.type?(this.gc.bind("click"+this.eventNamespace,function(){if(b.disabled)return!1}),this.element.bind("keyup"+this.eventNamespace,function(c){c.keyCode!==e.ui.keyCode.ENTER||(a.element[0].checked||b.disabled)||(a.element[0].checked=!0,a.element.change(),a.element.click())})):(this.gc.bind("mousedown"+
this.eventNamespace,function(c){if(b.disabled)return!1;1===c.which&&(e(this).addClass("oj-active").removeClass("oj-default"),d=this,a.document.one("mouseup",function(){d=null}))}).bind("mouseup"+this.eventNamespace,function(){if(b.disabled)return!1;e(this).removeClass("oj-active");a.Rf()}).bind("keydown"+this.eventNamespace,function(a){if(b.disabled)return!1;a.keyCode!==e.ui.keyCode.SPACE&&a.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("oj-active").removeClass("oj-default")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){e(this).removeClass("oj-active");a.Rf()}),this.gc.is("a")&&this.gc.bind("keyup"+this.eventNamespace,function(a){a.keyCode===e.ui.keyCode.SPACE&&e(this).click()}));this._setOption("disabled",b.disabled);this.qK();this.CB();this.Rf();this._super()},HK:function(){var a;if(this.element.is("input[type\x3dcheckbox]"))this.type="checkbox";else if(this.element.is("input[type\x3dradio]"))this.type="radio";else if(this.element.is("input[type\x3dbutton],input[type\x3dsubmit],input[type\x3dreset]"))this.type=
"input";else if(this.element.is("button,a"))this.type="button";else throw Error("JET Button not supported on this element type");"checkbox"===this.type||"radio"===this.type?(a="label[for\x3d'"+this.element.attr("id")+"']",this.gc=this.element.siblings().filter(a).addClass("oj-button-label"),this.element.addClass("oj-helper-hidden-accessible").add(this.gc).wrapAll("\x3cspan\x3e\x3c/span\x3e"),this.ub=this.element.parent(),(a=this.element[0].checked)&&this.ub.addClass("oj-selected").removeClass("oj-default"),
this.element.attr("aria-pressed",a)):this.ub=this.gc=this.element},widget:o_c("ub"),_destroy:function(){this.TA();this.element.removeClass("oj-helper-hidden-accessible").removeAttr("role").removeAttr("aria-pressed");var a="checkbox"===this.type||"radio"===this.type;a||this.ub.removeClass(h+" "+g+" "+k);this.gc.html(this.gc.find(".oj-button-text").html());a?(this.gc.removeClass("oj-button-label"),this.element.unwrap()):this.Yt||this.ub.removeAttr("title");c===this.gc[0]&&(c=null)},_setOption:function(a,
b){this._super(a,b);switch(a){case "disabled":b=!!b;this.element.is("a")||(this.element.prop("disabled",b),this.widget().toggleClass("oj-enabled",!b),this.ub.removeAttr("aria-disabled"));b?(this.widget().removeClass("oj-active oj-default"),this.mr(null,null,!0)):this.Rf();break;case "label":this.lN();break;case "display":"input"!==this.type&&this.Yo();break;case "icons":this.tB(!0);break;case "menu":"auto"===this.options.icons.end&&this.tB(!1),this.CB()}},refresh:function(){this._super()},Bn:function(b){"radio"===
this.type?(b?a(this.element[0]):this.element).each(function(){var a=e(this).data("oj-ojButton");this.checked?(a.ub.addClass("oj-selected").removeClass("oj-default"),a.element.attr("aria-pressed","true")):(a.ub.removeClass("oj-selected"),a.Rf(),a.element.attr("aria-pressed","false"))}):"checkbox"===this.type&&(this.element[0].checked?(this.ub.addClass("oj-selected").removeClass("oj-default"),this.element.attr("aria-pressed","true")):(this.ub.removeClass("oj-selected"),this.Rf(),this.element.attr("aria-pressed",
"false")))},qK:function(){var a=!1;null===this.options.label&&(a=!0,this.options.label="input"===this.type?this.gc.val():this.gc.html());if("input"===this.type)this.uB();else{var a=this.kN(a),b=this.Zo(!0),c=this.Zo(!1);this.Yo(a,b,c)}},kN:function(a){var b=this.gc,c=e("\x3cspan class\x3d'oj-button-text'\x3e\x3c/span\x3e",this.document[0]);a?c.append(b.contents()):(b.empty(),c.text(this.options.label));b.append(c);return c},lN:function(){if("input"===this.type)this.uB();else{var a=this.gc.find(".oj-button-text");
a.text(this.options.label);this.Yo(a)}},uB:function(){this.options.label&&this.element.val(this.options.label)},tB:function(a){if("input"!==this.type){var b;a&&(b=this.Zo(!0));a=this.Zo(!1);this.Yo(void 0,b,a)}},Zo:function(a){if(a){a="oj-button-icon-start";var b=this.options.icons.start,c="_lastStartIcon",d="prependTo"}else a="oj-button-icon-end",b=this.Ey(),c="_lastEndIcon",d="appendTo";var f=this.gc.find("."+a);b?(f.length?f.removeClass(this[c]):f=e("\x3cspan\x3e\x3c/span\x3e").addClass(a)[d](this.gc),
f.addClass(b)):f.remove();this[c]=b;return!!b},Ey:function(){var a=this.options.icons;return"auto"===a.end?this.no()?"oj-component-icon oj-button-menu-dropdown-icon":null:a.end},Yo:function(a,b,c){void 0===a&&(a=this.gc.find(".oj-button-text"));void 0===b&&(b=!!this.options.icons.start);void 0===c&&(c=!!this.Ey());var d=b&&c;c=b||c;var f="icons"===this.options.display;c&&f?(a.addClass("oj-helper-hidden-accessible"),this.Yt||(a=a.text(),this.ub.attr("title",e.trim(a)))):(a.removeClass("oj-helper-hidden-accessible"),
this.Yt||this.ub.removeAttr("title"));b=c?f?d?"oj-button-icons-only":"oj-button-icon-only":d?"oj-button-text-icons":b?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only";this.ub.removeClass(k).addClass(b)},CB:function(){this.TA();var a=this.no();if(a){var b=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.wm,function(c){return c.which===e.ui.keyCode.DOWN?(b.GB(c,"firstItem",a),!1):c.which===e.ui.keyCode.ESCAPE?(b.mr(c,a),!1):!0}).on("click"+this.wm,function(c){a.wn||
b.PN(c,a);return a.wn=!1});a.widget().on("oj__dismiss"+this.wm,function(a){b.Uz(a)}).on("ojbeforeshow"+this.wm,function(a){b.Hz||b.Uz(a);b.Hz=!1})}},TA:function(){this.element.removeAttr("aria-haspopup").off(this.wm)},no:function(){var a=this.options.menu;a&&(a=e(a).data("oj-ojMenu"));return a&&this.element.not("input")?a:null},GB:function(a,b,c){this.options.disabled||(c||(c=this.no()),c&&(this.ub.addClass("oj-selected").removeClass("oj-default"),this.Hz=!0,c.show(a,{launcher:this.element,focus:b}),
this.Vz=!0))},mr:function(a,b,c){if(c||!this.options.disabled)b||(b=this.no()),b&&b.vn(a)},Uz:function(){"button"===this.type&&(this.ub.removeClass("oj-selected"),this.Rf());this.Vz=!1},PN:function(a,b){this.Vz?this.mr(a,b):this.GB(a,"none",b)},Rf:function(){this.ub.is(".oj-active, .oj-disabled, .oj-selected, .oj-hover, .oj-focus")?this.ub.removeClass("oj-default"):this.ub.addClass("oj-default")}});b.ta("oj.ojButtonset",e.oj.baseComponent,{version:"1.0.0",vs:"button, input[type\x3dbutton], input[type\x3dsubmit], input[type\x3dreset], input[type\x3dcheckbox], input[type\x3dradio], a",
widgetEventPrefix:"oj",options:{checked:void 0,focusManagement:"oneTabstop",optionChange:null},mB:function(a,b){var c=e.type(a);if("string"===c||"null"===c)return(c=((c=b[0].name)||1>=b.length)&&b.filter("input[type\x3dradio][name\x3d"+c+"]").length===b.length&&(null===a||b.filter("[value\x3d"+a+"]").length))&&b.each(function(){this.checked=this.value===a}),c;if("array"===c){var c=b.filter("input[type\x3dcheckbox]").length===b.length,d;(c=c&&a.concat().sort().every(function(a){var c=a!==d&&b.filter("[value\x3d"+
a+"]").length;d=a;return c}))&&b.each(function(){this.checked=-1<a.indexOf(this.value)});return c}return!1},io:function(a){var b=void 0,c=null,d=null;a.each(function(){if("input"!==this.tagName.toLowerCase())return b=void 0,!1;var a=this.type.toLowerCase(),f;if("radio"===a)a=!0,f=this.name.toLowerCase();else if("checkbox"===a)a=!1,f=null;else return b=void 0,!1;if(void 0!==b&&(a!==c||f!==d||c&&!d))return b=void 0,!1;void 0===b?(b=a?this.checked?this.value:null:this.checked?[this.value]:[],c=a,d=f):
this.checked&&(c?b=this.value:b.push(this.value))});return b},lx:function(a,b){return a===b?!0:"array"===e.type(a)&&"array"===e.type(b)&&!e(a).not(b).length&&!e(b).not(a).length},_create:function(){this.element.addClass("oj-buttonset oj-component").attr("role","group");this.kb(!0);this._super()},ag:function(a,b){a.show(b,{launcher:this.element.find(":oj-button[tabindex\x3d0]"),focus:"menu"})},_setOption:function(a,b){var c=!1,d=this.gA;this.gA=null;"disabled"===a&&this.Zb.ojButton("option",a,b);"checked"!==
a||d||null===b&&void 0===this.io(this.Zb)||(this.mB(b,this.Zb)?this.Zb.each(function(){e(this).data("oj-ojButton").Bn(!1)}):c=!0);c||(c=this.options[a],this._super(a,b),"checked"===a&&this.Qe(a,c,b,this.lx,d))},Qe:function(a,b,c,d,f){d.call(this,b,c)||this._trigger("optionChange",f,{option:a,previousValue:b,value:c,optionMetadata:{writeback:f?"shouldWrite":"shouldNotWrite"}})},refresh:function(){this._super();this.kb(!1)},kb:function(a){var b=this;this.rm="rtl"===this.xc();this.element.find(":not(iframe)").andSelf().contents().filter(function(){return 3===
this.nodeType&&""===this.nodeValue.trim()}).remove();this.Zb=this.element.find(this.vs);if(a){if(!this.mB(this.options.checked,this.Zb)){var c=this.io(this.Zb);this.options.checked=void 0===c?null:c}}else{var c=this.io(this.Zb),c=void 0===c?null:c,d=this.options.checked;this.options.checked=c;var f=!0}this.Zb.filter(":oj-button").ojButton("refresh").each(function(){e(this).data("oj-ojButton").Bn(!1)}).end().not(":oj-button").ojButton().end().map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-corner-start oj-buttonset-corner-end").filter(":first").addClass("oj-buttonset-corner-start").end().filter(":last").addClass("oj-buttonset-corner-end").end().end();
a&&this.options.disabled&&this.Zb.ojButton("option","disabled",!0);"oneTabstop"===this.options.focusManagement&&(this.Zb.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(a){b.ds(a,e(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(){e(this).ojButton("option","disabled")||b.li(e(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(){b.li(e(this))}),this.Ff=this.Zb.filter(function(){return!e(this).ojButton("option",
"disabled")}),this.ks(a));f&&this.Qe("checked",d,c,this.lx,null)},ks:function(a){var b=e(this.ci);this.ci=void 0;this.Zb.attr("tabindex","-1");a=a||!b.is(this.Ff)?this.Ff.first():b;this.li(a)},zs:function(b){var c=this.Ff;return b.map(function(b,d){if("radio"!=d.type||d.checked||""==d.name)return d;var f=a(d,c).filter(":checked");return f.length?f[0]:d})},li:function(a){a=this.zs(a);var b=a[0],c=this.ci;b!==c&&(e(c).attr("tabindex","-1"),a.attr("tabindex","0"),this.ci=b)},ds:function(a,b){switch(a.which){case e.ui.keyCode.LEFT:case e.ui.keyCode.RIGHT:a.preventDefault();
var c=this.Ff,d=c.length;if(2>d)break;var f=c.index(b);c.eq((f+(a.which==e.ui.keyCode.RIGHT^this.rm?1:-1)+d)%d).focus();break;case e.ui.keyCode.UP:case e.ui.keyCode.DOWN:"radio"==b.attr("type")&&a.preventDefault()}},_destroy:function(){this.element.removeClass("oj-buttonset oj-component").removeAttr("role");"oneTabstop"===this.options.focusManagement&&this.Zb.attr("tabindex","0");this.Zb.map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-corner-start oj-buttonset-corner-end").end().ojButton("destroy")}});
var d,c,f=".ojButton",h="oj-button oj-component oj-enabled oj-default",g="oj-hover oj-active oj-selected",k="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only"})()});
//# sourceMappingURL=oj-modular.map