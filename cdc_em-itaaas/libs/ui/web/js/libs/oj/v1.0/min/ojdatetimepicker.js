define(["ojs/ojcore","jquery","ojs/ojeditablevalue","ojs/ojinputtext","ojs/ojvalidation"],function(b,e){function a(a){return a.delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-component-icon, .oj-datepicker-calendar td a","mouseout",function(){e(this).removeClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-component-icon, .oj-datepicker-calendar td a",
"mouseover",function(){e(this).addClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-component-icon, .oj-datepicker-calendar td a","focus",function(){e(this).addClass("oj-focus")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-component-icon, .oj-datepicker-calendar td a",
"blur",function(){e(this).removeClass("oj-focus")})}var d=b.R.gh(b.gf.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"});b.ta("oj.ojInputDate",e.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-only oj-component oj-inputdatetime",Ui:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],Kk:"oj-inputdatetime-input-trigger",UG:"oj-inputdatetime-calendar-icon",Bv:"oj-datepicker-current-day",rq:"oj-datepicker-days-cell-over",
Ew:"oj-datepicker-unselectable",Dv:"oj-datepicker-desc",oq:"oj-datepicker-calendar",Zv:"oj-datepicker-div",GF:"oj-datepicker-inline",IF:" oj-inputdatetime-input-container",options:{dayMetaData:null,showOn:"image",changeMonth:"select",changeYear:"select",yearRange:"c-10:c+10",daysOutsideMonth:"hidden",weekDisplay:"none",calculateWeek:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+
1},min:void 0,max:void 0,numberOfMonths:1,currentMonthPos:0,stepMonths:"block",stepBigMonths:12,buttonPanel:"none",converter:b.R.gh(b.gf.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit"})},ww:function(a){this._super(a);a.firstDayOfWeek=function(){return b.pa.mD()};a.dayWide=function(){return b.pa.$t("wide")};a.dayNarrow=function(){return b.pa.$t("narrow")};a.monthWide=function(){return b.pa.fu("wide")};a.monthAbbreviated=function(){return b.pa.fu("abbreviated")}},
Of:function(){this._super();this.options.value||(this.options.value="");for(var a=["min","max"],b=0,d=a.length;b<d;b++)if(void 0===this.options[a[b]]){var e=null,k=this.element.attr(a[b]);if(k)try{e=Date.parse(k),isNaN(e)||(e=new Date(e))}catch(l){}this.options[a[b]]=e}},qn:function(){this.Id=!1;this.Zc=this.Ve=null;this.ts=!1;this.Bl=4;this.Jg=this.qe=this.Wf=this.oe=this.Oe=0;this.kp=this.Qg=null;this.Xk={};var b=this.element[0].nodeName.toLowerCase();this.Zc="div"===b||"span"===b;e(document).on("mousedown",
e.proxy(this.$q,this));this.lb=a(e("\x3cdiv id\x3d'"+this.pf(this.Zv)+"' role\x3d'region' aria-describedby\x3d'"+this.pf(this.Dv)+"' class\x3d'oj-datepicker-content'\x3e\x3c/div\x3e"));e("body").append(this.lb);this.Zc?this._CLASS_NAMES="":this._WIDGET_CLASS_NAMES+=this.IF},Kc:function(){this.qn();var a=this._super();this.kt(this.lj());this.Zc?(this.element.append(this.lb),this.element.addClass(this.GF),this.Id=!0,this.Ne(this.lj(),null,{Zu:this.Pf.cn}),this.lb.css("display","block")):(this.Mq(),
this.Qg=e.proxy(this.co,this),this.element.on("keydown",this.Qg));return a},_setOption:function(a,d){var e=null,g={},g={};if("value"===a)return!d&&this.element.val()&&(e=this.Co(),this.options.value&&this.Ox(this.options.value,e),d=e),e=this._super(a,d),this.kt(d),e;e=this._superApply(arguments);"disabled"===a?this.jy(d):"max"===a||"min"===a?(g={min:this.options.min,max:this.options.max,converter:this.Ed()},this.Xk[b.Sb.VALIDATOR_TYPE_DATETIMERANGE]=b.R.vg(b.Sb.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g),
this.Hk()):"dayMetaData"===a&&(g={dayMetaData:this.options.dayMetaData,converter:this.Ed()},this.Xk[b.Sb.VALIDATOR_TYPE_DATERESTRICTION]=b.R.vg(b.Sb.VALIDATOR_TYPE_DATERESTRICTION).createValidator(g),this.Hk());return e},_destroy:function(){var a=this._super();this.Qg&&this.element.off("keydown",this.Qg);this.kp&&this.element.off("focus",this.kp);this.Ve&&this.Ve.remove();this.lb.remove();return a},Mq:function(){var a=this.options.showOn,b=e(e("\x3cspan\x3e").addClass(this.Kk));"focus"===a&&(this.kp=
e.proxy(this.show,this),this.element.on("focus",this.kp));a=e(e("\x3cspan/\x3e").addClass(this.UG+" oj-clickable-icon oj-component-icon"));b.append(a);var d=this;a.on("click",function(){d.Id?d.hide():d.show();return!1}).on("mouseenter",function(){e(this).addClass("oj-hover")}).on("mousedown",function(){e(this).addClass("oj-active")}).on("mouseleave",function(){e(this).removeClass("oj-hover oj-active")});this.Ve=b;this.element.after(b)},co:function(a){var b=e.ui.keyCode,d=!1;if(this.Id)switch(a.keyCode){case b.TAB:case b.ESCAPE:this.hide();
break;case b.UP:case b.DOWN:this.lb.find(".oj-datepicker-calendar").focus(),d=!0}else switch(a.keyCode){case b.UP:case b.DOWN:this.show(),d=!0}if(d||a.keyCode===b.ENTER)return a.preventDefault(),a.stopPropagation(),!1},SI:function(a){var b;b=!1;var d=e.ui.keyCode,g=this.rn();if(this.Id)switch(a.keyCode){case 84:a.altKey&&a.ctrlKey&&this.lb.find(".oj-datepicker-current").focus();break;case 68:a.altKey&&a.ctrlKey&&this.lb.find(".oj-datepicker-close").focus();break;case d.TAB:this.hide();break;case d.ENTER:return b=
e("td."+this.rq+":not(."+this.Bv+")",this.lb),b[0]&&this.uB(this.oe,this.qe,b[0]),a.preventDefault(),a.stopPropagation(),!1;case d.ESCAPE:this.hide();this.element.focus();b=!0;break;case d.PAGE_UP:a.ctrlKey&&a.altKey?this.Xc(-this.options.stepBigMonths,"M",!0):a.altKey?this.Xc(-1,"Y",!0):this.Xc(-this.ql(),"M",!0);b=!0;break;case d.PAGE_DOWN:a.ctrlKey&&a.altKey?this.Xc(+this.options.stepBigMonths,"M",!0):a.altKey?this.Xc(1,"Y",!0):this.Xc(+this.ql(),"M",!0);b=!0;break;case d.END:this.Oe=this.ro(this.qe,
this.oe);this.wi(!0);b=!0;break;case d.HOME:this.Oe=1;this.wi(!0);b=!0;break;case d.LEFT:this.Xc(g?1:-1,"D",!0);a.originalEvent.altKey&&this.Xc(a.ctrlKey?-this.options.stepBigMonths:-this.ql(),"M",!0);b=!0;break;case d.UP:this.Xc(-7,"D",!0);b=!0;break;case d.RIGHT:this.Xc(g?-1:1,"D",!0);a.originalEvent.altKey&&this.Xc(a.ctrlKey?+this.options.stepBigMonths:+this.ql(),"M",!0);b=!0;break;case d.DOWN:this.Xc(7,"D",!0),b=!0}else a.keyCode===d.HOME&&a.ctrlKey&&(this.show(),b=!0);b&&(a.preventDefault(),
a.stopPropagation())},wi:function(a){this.Bl=4;var b=this.jJ();this.lb.empty().append(b.html);0<e("button",this.lb).length&&e.each(e("button",this.lb),function(a,b){e(b).ojButton()});this.rH();this.lb.find("."+this.rq+" a").mouseover();b.UC&&this.lb.find(".oj-datepicker-calendar").attr("aria-activedescendant",b.UC);var b=this.$r(),d=b[1];this.lb.removeClass("oj-datepicker-multi-2 oj-datepicker-multi-3 oj-datepicker-multi-4").width("");1<d&&this.lb.addClass("oj-datepicker-multi-"+d).css("width",17*
d+"em");this.lb[(1!==b[0]||1!==b[1]?"add":"remove")+"Class"]("oj-datepicker-multi");this.Id&&(this.element.is(":visible")&&!this.element.is(":disabled"))&&(a||this.Zc?(a=this.lb.find(".oj-datepicker-calendar"),a[0]!==document.activeElement&&a.focus()):this.element[0]!==document.activeElement&&this.element.focus())},Xc:function(a,b,d){this.options.disabled||(this.Rw(a+("M"===b?this.options.currentMonthPos:0),b),this.wi(d))},lK:function(){var a=new Date;this.Oe=a.getDate();this.Wf=this.oe=a.getMonth();
this.Jg=this.qe=a.getFullYear();this.Xc()},vB:function(a,b){var h=parseInt(a.options[a.selectedIndex].value,10);"M"===b?this.oe=this.Wf=h:this.qe=this.Jg=h;e("#"+this.pf(this.oq)).html(this.options.monthWide[this.Wf]+" "+d.hb(new Date(this.Jg,this.Wf,1)));this.Xc()},uB:function(a,b,d){e(d).hasClass(this.Ew)||this.options.disabled||(this.Oe=e("a",d).html(),this.oe=a,this.qe=b,(a=this.options.value)?(b=new Date(this.qe,this.oe,this.Oe),this.Ox(a,b),a=b):a=new Date(this.qe,this.oe,this.Oe),this.Jh(this.Ed().format(a)),
this.Ne(a,null,{Zu:this.Pf.cn}),this.hide())},vr:function(a,b){var d;null==a||""===a?d=b:"number"===typeof a?isNaN(a)?d=b:(d=this.Co(),d.setDate(d.getDate()+a)):d=new Date(a.getTime());return d=d||b},kt:function(a){a=this.vr(a,this.Co());this.Oe=a.getDate();this.Wf=this.oe=a.getMonth();this.Jg=this.qe=a.getFullYear();this.Rw()},AR:function(){return this.qe&&""!==this.element.val()?new Date(this.qe,this.oe,this.Oe):null},ql:function(){var a=this.options.stepMonths;return e.isNumeric(a)?a:this.options.numberOfMonths},
rH:function(){var a=this.ql(),b=this;this.lb.find("[data-handler]").map(function(){e(this).bind(this.getAttribute("data-event"),{prev:function(){b.Xc(-a,"M",!0)},next:function(){b.Xc(+a,"M",!0)},hide:function(a){if("keyup"===a.type&&13===a.keyCode||"click"===a.type)b.hide(),a.preventDefault(),a.stopPropagation()},today:function(a){if("keyup"===a.type&&13===a.keyCode||"click"===a.type)b.lK(),a.preventDefault(),a.stopPropagation()},selectDay:function(){b.uB(+this.getAttribute("data-month"),+this.getAttribute("data-year"),
this);return!1},selectMonth:function(){b.vB(this,"M");return!1},selectYear:function(){b.vB(this,"Y");return!1},calendarKey:function(a){b.SI(a)}}[this.getAttribute("data-handler")])})},jJ:function(){var a,b,d,e,k,l=this.options.dayWide,m=this.options.dayNarrow,n=this.options.monthWide,q=this.options.monthAbbreviated,r=this.options.firstDayOfWeek,p,s,v,u,y,x,z,w,C="",t,B,A,M,E,I,G,K,H=new Date,H=new Date(H.getFullYear(),H.getMonth(),H.getDate()),N=this.rn();k=this.options.buttonPanel;var O=this.$r(),
D=this.options.currentMonthPos,Z=this.options.dayMetaData;K=null;var U=1!==O[0]||1!==O[1],V=this.nj("min"),R=this.nj("max"),D=this.Wf-D,P=this.Jg,W=new Date(this.qe,this.oe,this.Oe),S=this.lj(),Q=S.getDate(),ba=S.getMonth(),ca=S.getFullYear(),T=this.options.disabled,da=this.l("weekText");S.setHours(0);S.setMinutes(0);S.setSeconds(0);S.setMilliseconds(0);0>D&&(D+=12,P--);if(R)for(a=new Date(R.getFullYear(),R.getMonth()-O[0]*O[1]+1,R.getDate()),a=V&&a<V?V:a;new Date(P,D,1)>a;)D--,0>D&&(D=11,P--);this.Wf=
D;this.Jg=P;a=this.l("prevText");a=this.ux(-1,P,D)&&!T?"\x3ca href\x3d'#' class\x3d'oj-datepicker-prev-icon oj-enabled oj-component-icon oj-clickable-icon' data-handler\x3d'prev' data-event\x3d'click' title\x3d'"+a+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-prev-icon oj-disabled oj-component-icon oj-clickable-icon' title\x3d'"+a+"'\x3e\x3c/a\x3e";b=this.l("nextText");b=this.ux(1,P,D)&&!T?"\x3ca href\x3d'#' class\x3d'oj-datepicker-next-icon oj-enabled oj-component-icon oj-clickable-icon' data-handler\x3d'next' data-event\x3d'click' title\x3d'"+
b+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-next-icon oj-disabled oj-component-icon oj-clickable-icon' title\x3d'"+b+"'\x3e\x3c/a\x3e";d=this.l("currentText");e=this.Zc?"":"\x3cbutton type\x3d'button' class\x3d'oj-datepicker-close oj-enabled oj-priority-primary' data-handler\x3d'hide' data-event\x3d'click keyup'\x3e"+this.l("closeText")+"\x3c/button\x3e";k="default"===k?"\x3cdiv class\x3d'oj-datepicker-buttonpane'\x3e"+(N?e:"")+(this.Pz(H)?"\x3cbutton type\x3d'button' class\x3d'oj-datepicker-current oj-enabled oj-priority-secondary' data-handler\x3d'today' data-event\x3d'click keyup'\x3e"+
d+"\x3c/button\x3e":"")+(N?"":e)+"\x3c/div\x3e":"";d=this.options.weekDisplay;e=this.options.daysOutsideMonth;p="";s="all";for(v=0;v<O[0];v++){u="";this.Bl=4;for(y=0;y<O[1];y++){s="all";t="";if(U){t+="\x3cdiv class\x3d'oj-datepicker-group";if(1<O[1])switch(y){case 0:t+=" oj-datepicker-group-first";s=N?"right":"left";break;case O[1]-1:t+=" oj-datepicker-group-last";s=N?"left":"right";break;default:t+=" oj-datepicker-group-middle",s=""}t+="'\x3e"}t+="\x3cdiv class\x3d'oj-datepicker-header"+(T?" oj-disabled ":
" oj-enabled ")+"'\x3e"+(/all|left/.test(s)&&0===v?N?b:a:"")+(/all|right/.test(s)&&0===v?N?a:b:"")+this.kJ(D,P,V,R,0<v||0<y,n,q)+"\x3c/div\x3e\x3ctable class\x3d'oj-datepicker-calendar"+(T?" oj-disabled ":" oj-enabled ")+"' tabindex\x3d-1 data-handler\x3d'calendarKey' data-event\x3d'keydown' aria-readonly\x3d'true' role\x3d'grid' aria-labelledby\x3d'"+this.pf(this.oq)+"'\x3e\x3cthead role\x3d'presentation'\x3e\x3ctr role\x3d'row'\x3e";B="number"===d?"\x3cth class\x3d'oj-datepicker-week-col'\x3e"+
this.l("weekHeader")+"\x3c/th\x3e":"";for(s=0;7>s;s++)A=(s+parseInt(r,10))%7,B+="\x3cth role\x3d'columnheader' aria-label\x3d'"+l[A]+"'"+(5<=(s+r+6)%7?" class\x3d'oj-datepicker-week-end'":"")+"\x3e\x3cspan title\x3d'"+l[A]+"'\x3e"+m[A]+"\x3c/span\x3e\x3c/th\x3e";t+=B+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody role\x3d'presentation'\x3e";B=this.ro(P,D);P===ca&&D===ba&&(Q=Math.min(Q,B));s=(this.xJ(P,D)-r+7)%7;B=Math.ceil((s+B)/7);this.Bl=B=U?this.Bl>B?this.Bl:B:B;A=new Date(P,D,1-s);for(M=0;M<B;M++){t+="\x3ctr role\x3d'row'\x3e";
s=this.options.calculateWeek(A);E="none"===d?"":"\x3ctd class\x3d'oj-datepicker-week-col' role\x3d'rowheader' aria-label\x3d'"+da+" "+s+"'\x3e"+s+"\x3c/td\x3e";for(s=0;7>s;s++){G=A.getMonth()!==D;x=A.getTime()===S.getTime();z="oj-dp-"+M+"-"+s;(w=A.getTime()===W.getTime()&&D===this.oe)&&(C=z);I=[!0,""];K=A.getFullYear();var X=A.getMonth(),ea=A.getDate(),fa=function aa(a,b,c){if(!a||b===c.length)return a;var d=b+1;return aa(a[c[b]],d,c)||aa(a["*"],d,c)};Z&&(K=fa(Z,0,[K,X+1,ea]))&&(I=[!K.disabled,K.className||
""],K.tooltip&&I.push(K.tooltip));X=A.getTime()===S.getTime();K=G&&"selectable"!==e||!I[0]||V&&A<V||R&&A>R;E+="\x3ctd role\x3d'gridcell' aria-disabled\x3d'"+!!K+"' aria-selected\x3d'"+x+"' id\x3d'"+z+"' class\x3d'"+(5<=(s+r+6)%7?" oj-datepicker-week-end":"")+(G?" oj-datepicker-other-month":"")+(w?" "+this.rq:"")+(K||T?" "+this.Ew+" oj-disabled":" oj-enabled")+(G&&"hidden"===e?"":" "+I[1]+(x?" "+this.Bv:"")+(A.getTime()===H.getTime()?" oj-datepicker-today":""))+"'"+(G&&"hidden"===e||!I[2]?"":" title\x3d'"+
I[2].replace(/'/g,"\x26#39;")+"'")+(K?"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+A.getMonth()+"' data-year\x3d'"+A.getFullYear()+"'")+"\x3e"+(G&&"hidden"===e?"\x26#xa0;":K||T?"\x3cspan class\x3d'oj-disabled'\x3e"+A.getDate()+"\x3c/span\x3e":"\x3ca class\x3d'oj-enabled"+(X?" oj-selected":"")+(G?" oj-priority-secondary":"")+"' "+(X||w?"":"tabindex\x3d'-1' ")+" href\x3d'#'\x3e"+A.getDate()+"\x3c/a\x3e")+"\x3c/td\x3e";A.setDate(A.getDate()+1)}t+=E+"\x3c/tr\x3e"}D++;11<D&&
(D=0,P++);t+="\x3c/tbody\x3e\x3c/table\x3e"+(U?"\x3c/div\x3e"+(0<O[0]&&y===O[1]-1?"\x3cdiv class\x3d'oj-datepicker-row-break'\x3e\x3c/div\x3e":""):"");u+=t}p+=u}return{html:p+k,UC:C}},kJ:function(a,f,e,g,k,l,m){var n,q,r,p,s=this.options.changeMonth,v=this.options.changeYear,u=b.pa.UD()?"before":"after",y="\x3cdiv class\x3d'oj-datepicker-title' role\x3d'header'\x3e",x="",z=this.options.disabled;if(k||"none"===s)x+="\x3cspan class\x3d'oj-datepicker-month'\x3e"+l[a]+"\x3c/span\x3e";else{n=e&&e.getFullYear()===
f;q=g&&g.getFullYear()===f;x+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-month "+(z?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectMonth' data-event\x3d'change' role\x3d'listbox'\x3e";for(r=0;12>r;r++)(!n||r>=e.getMonth())&&(!q||r<=g.getMonth())&&(x+="\x3coption role\x3d'option' value\x3d'"+r+"' aria-selected\x3d'"+(r===a?"true' selected\x3d'selected'":"false'")+"\x3e"+m[r]+"\x3c/option\x3e");x+="\x3c/select\x3e"}"before"===u&&(y+=x+(k||"select"!==s||"select"!==v?"\x26#xa0;":
""));if(!this.wg)if(this.wg="",k||"none"===v)y+="\x3cspan class\x3d'oj-datepicker-year'\x3e"+d.hb(new Date(f,a,1))+"\x3c/span\x3e";else{n=this.options.yearRange.split(":");p=(new Date).getFullYear();q=function(a){a=a.match(/c[+\-].*/)?f+parseInt(a.substring(1),10):a.match(/[+\-].*/)?p+parseInt(a,10):parseInt(a,10);return isNaN(a)?p:a};m=q(n[0]);n=Math.max(m,q(n[1]||""));m=e?Math.max(m,e.getFullYear()):m;n=g?Math.min(n,g.getFullYear()):n;for(this.wg+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-year "+
(z?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectYear' data-event\x3d'change' role\x3d'listbox'\x3e";m<=n;m++)this.wg+="\x3coption role\x3d'option' value\x3d'"+m+"' aria-selected\x3d'"+(m===f?"true' selected\x3d'selected'":"false'")+"\x3e"+d.hb(new Date(m,a,1))+"\x3c/option\x3e";this.wg+="\x3c/select\x3e";y+=this.wg;this.wg=null}"after"===u&&(y+=(k||"select"!==s||"select"!==v?"\x26#xa0;":"")+x);y+="\x3cspan class\x3d'oj-helper-hidden-accessible' id\x3d'"+this.pf(this.oq)+"'\x3e"+
l[a]+" "+d.hb(new Date(f,a,1))+"\x3c/span\x3e";y+="\x3cspan class\x3d'oj-helper-hidden-accessible' id\x3d'"+this.pf(this.Dv)+"'\x3e"+this.l("datePicker")+"\x3c/span\x3e";return y+"\x3c/div\x3e"},Rw:function(a,b){var d=this.Jg+("Y"===b?a:0),e=this.Wf+("M"===b?a:0),k=Math.min(this.Oe,this.ro(d,e))+("D"===b?a:0),d=new Date(d,e,k);this.Oe=d.getDate();this.Wf=this.oe=d.getMonth();this.Jg=this.qe=d.getFullYear()},$r:function(){var a=this.options.numberOfMonths,a="string"===typeof a?parseInt(a,10):a;return null==
a?[1,1]:"number"===typeof a?[1,a]:a},nj:function(a){return this.vr(this.options[a],null)},ro:function(a,b){return 32-(new Date(a,b,32)).getDate()},xJ:function(a,b){return(new Date(a,b,1)).getDay()},ux:function(a,b,d){var e=this.$r();b=new Date(b,d+(0>a?a:e[0]*e[1]),1);0>a&&b.setDate(this.ro(b.getFullYear(),b.getMonth()));return this.Pz(b)},Pz:function(a){var b,d,e=this.nj("min"),k=this.nj("max"),l=null,m=null;if(b=this.options.yearRange)b=b.split(":"),d=(new Date).getFullYear(),l=parseInt(b[0],10),
m=parseInt(b[1],10),b[0].match(/[+\-].*/)&&(l+=d),b[1].match(/[+\-].*/)&&(m+=d);return(!e||a.getTime()>=e.getTime())&&(!k||a.getTime()<=k.getTime())&&(!l||a.getFullYear()>=l)&&(!m||a.getFullYear()<=m)},xR:function(a){function b(a){return{bT:1,KS:2,aT:3}[a]||a}return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},$q:function(a){a=e(a.target);a[0]!==this.lb[0]&&(0===a.parents("#"+this.pf(this.Zv)).length&&!a.closest("."+this.Kk).length&&this.Id)&&this.hide()},jy:function(a){if(!this.Zc&&
this.Ve){var b=this.Ve.children().filter("span");a?b.addClass("oj-disabled").removeClass("oj-enabled"):b.removeClass("oj-disabled").addClass("oj-enabled")}this.Id&&this.wi()},lq:function(){this.Zc||this._superApply(arguments)},Ss:function(a){this.Zc||(this._superApply(arguments),this.Id&&this.lb.find(".oj-datepicker-calendar").focus())},Jh:function(a){this._superApply(arguments);this.Id&&this.wi()},Ne:function(a,b,d){var e=this._superApply(arguments);e&&this.kt(this.lj());return e},Si:function(){return this.options.value||
""},_GetDefaultStyleClass:o_d("oj-inputdate"),ln:function(){var a=this._superApply(arguments),d=this.nj("min"),h=this.nj("max"),g={},g={};if(null!=d||null!=h)g={min:this.options.min,max:this.options.max,converter:this.Ed()},this.Xk[b.Sb.VALIDATOR_TYPE_DATETIMERANGE]=b.R.vg(b.Sb.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g);null!=this.options.dayMetaData&&(g={dayMetaData:this.options.dayMetaData,converter:this.Ed()},this.Xk[b.Sb.VALIDATOR_TYPE_DATERESTRICTION]=b.R.vg(b.Sb.VALIDATOR_TYPE_DATERESTRICTION).createValidator(g));
return e.extend(this.Xk,a)},Ox:function(a,b){b.setHours(a.getHours());b.setMinutes(a.getMinutes());b.setSeconds(a.getSeconds());b.setMilliseconds(a.getMilliseconds())},Co:function(){var a=new Date;a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},lj:function(){return this.vr(this.options.value,this.Co())},bS:o_c("Zc"),getNodeBySubId:function(a){var b=this._superApply(arguments);if(b)return b;var b=a.subId,d=this.lb;if(b)switch(b){case "oj-datepicker-content":return d;case "oj-inputdatetime-calendar-icon":return e(".oj-inputdatetime-calendar-icon",
this.Ve);case "oj-datepicker-prev-icon":return e(".oj-datepicker-prev-icon",d);case "oj-datepicker-next-icon":return e(".oj-datepicker-next-icon",d);case "oj-datepicker-month":return e(".oj-datepicker-month",d);case "oj-datepicker-year":return e(".oj-datepicker-year",d);case "oj-datepicker-current":return e(".oj-datepicker-current",d);case "oj-datepicker-close":return e(".oj-datepicker-close",d)}return null},hide:function(){this.Id&&!this.Zc&&(this.lb.hide(),this.Id=!1,"focus"===this.options.showOn&&
(this.ts=!0),this.element.focus());return this},refresh:function(){this._superApply(arguments);this.wi();return this},show:function(){if(!this.Id&&!this.options.disabled)if(this.ts)this.ts=!1;else{var a=this.rn();this.lb.empty();this.wi();this.lb.css({top:"",left:"",position:"absolute"});this.lb.position({my:a?"right top":"left top",at:a?"right bottom":"left bottom",of:this.element,collision:"fit"});this.Id=!0;this.lb.show();this.lb.find(".oj-datepicker-calendar").focus();return this}},calendarDisplay:o_c("lb")});
b.ta("oj.ojInputTime",e.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-time-only oj-component oj-inputdatetime oj-inputdatetime-input-container",Ui:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],Dw:"ojInputTime",Kk:"oj-inputdatetime-input-trigger",VG:"oj-inputdatetime-time-icon",options:{converter:b.R.gh(b.gf.CONVERTER_TYPE_DATETIME).createConverter({hour:"2-digit",hour12:!0,minute:"2-digit"}),timeIncrement:"T00:30:00:00",
datePicker:null},Of:function(){this._super();this.options.value||(this.options.value="")},qn:function(){this.vt=null;this.ah=!1;this.ej=this.options.datePicker;this.Pb=e("\x3cdiv id\x3d'"+this.pf(this.Dw)+"' class\x3d'oj-listbox-drop oj-listbox-display-none'\x3e\x3c/div\x3e");e("body").append(this.Pb);e(document).on("mousedown",e.proxy(this.$q,this))},Kc:function(){this.qn();var a=this._superApply(arguments);this.wl()&&!this.Mz()&&(this._CLASS_NAMES="");this.Mq();this.gi()&&(this.Qg=e.proxy(this.co,
this),this.element.on("keydown",this.Qg));return a},_setOption:function(a,b){var d=null;if("value"===a)return!b&&this.element.val()&&(b=new Date),d=this._super(a,b);d=this._superApply(arguments);if("disabled"===a){var e=this.Ve.children().filter("span");b?e.addClass("oj-disabled").removeClass("oj-enabled"):e.removeClass("oj-disabled").addClass("oj-enabled")}else"timeIncrement"===a&&this.mo();return d},_destroy:function(){var a=this._super();this.Ve&&this.Ve.remove();this.Qg&&this.element.off("keydown",
this.Qg);this.Pb.remove();return a},lq:function(){this.gi()&&this._superApply(arguments)},Ss:function(a){this.gi()&&(this._superApply(arguments),this.ah&&e("ul",this.Pb).focus())},Mq:function(){var a=this.gi(),b=a?e(e("\x3cspan\x3e").addClass(this.Kk)):e("+ span",this.element),d=e(e("\x3cspan/\x3e").addClass(this.VG+" oj-clickable-icon oj-component-icon"));b.append(d);var g=this;d.on("click",function(){g.ah?g.hide():g.show()}).on("mouseenter",function(){e(this).addClass("oj-hover")}).on("mousedown",
function(){e(this).addClass("oj-active")}).on("mouseleave",function(){e(this).removeClass("oj-hover oj-active")});this.Ve=b;a&&this.element.after(b)},co:function(a){var b=e.ui.keyCode,d=!1;if(this.ah)switch(a.keyCode){case b.TAB:this.hide();break;case b.ESCAPE:this.hide();d=!0;break;case b.UP:case b.DOWN:e("ul",this.Pb).focus(),d=!0}else switch(a.keyCode){case b.UP:case b.DOWN:this.show(),d=!0}if(d||a.keyCode===b.ENTER)return a.preventDefault(),a.stopPropagation(),!1},mo:function(){var a=this.dK(),
b=e("\x3cul class\x3d'oj-listbox-results' tabindex\x3d'-1' role\x3d'listbox'\x3e\x3c/ul\x3e"),d=this.yJ(),g=[],k;a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);g=this.hK(a);d=d||g[0].value;this.Pb.empty();a=0;for(k=g.length;a<k;a++){var l=g[a].value,m=e("\x3cli class\x3d'oj-listbox-result' role\x3d'presentation'\x3e"),n=e("\x3cdiv class\x3d'oj-listbox-result-label' data-value\x3d'"+l+"' role\x3d'option' id\x3d'"+this.uuid+"_sel"+a+"'\x3e"+g[a].label+"\x3c/li\x3e");d===l&&(n.attr("aria-selected",
"true"),m.addClass("oj-listbox-highlighted"));m.append(n);b.append(m)}this.Pb.append(b);var q=this;b.on("click",function(a){q.hide();q.DA(a)}).on("keydown",function(a){q.hO(a)})},hK:function(a){var b=[],d=this.pz();if(a){var e=this.options.timeIncrement;if(4===e.split(":").length){if(e=this.gK(e)){var k=new Date(a),l="";do l=d.hb(k),b.push({label:l,value:l}),k.setHours(k.getHours()+e.QP),k.setMinutes(k.getMinutes()+e.mQ),k.setSeconds(k.getSeconds()+e.JQ),k.setMilliseconds(k.getMilliseconds()+e.lQ);
while(k.getDate()===a.getDate())}}else throw Error("timeIncrement value should be in the format of Thh:mm:ss:SS");}return b},gK:function(a){var b=null;a=a.split(":");4===a.length&&(b={QP:parseInt(a[0].substring(1),10),mQ:parseInt(a[1],10),JQ:parseInt(a[2],10),lQ:parseInt(a[3],10)});return b},hO:function(a){if(this.ah){var b=e.ui.keyCode,d=!1;switch(a.keyCode){case b.TAB:this.hide();break;case b.ESCAPE:this.hide();this.element.focus();d=!0;break;case b.UP:this.zA(a,"prev");d=!0;break;case b.DOWN:this.zA(a,
"next");d=!0;break;case b.ENTER:this.DA(a),d=!0}if(d)return a.preventDefault(),a.stopPropagation(),!1}},zA:function(a,b){var d=e(".oj-listbox-highlighted",this.Pb),g=e("ul",this.Pb);if(1===d.length){var k=e(d)[b]();1===k.length&&(d.removeClass("oj-listbox-highlighted"),k.addClass("oj-listbox-highlighted"),g.attr("aria-activedescendant",k.children()[0].id),this.xx(k))}},DA:function(){var a=this.Pb,b=e("[aria-selected]",a),d=e("ul",a),a=e(".oj-listbox-highlighted div",a);1===a.length&&(1===b.length&&
(b.removeAttr("aria-selected"),b.parent().removeClass("oj-listbox-highlighted")),a.attr("aria-selected","true"),a.parent().addClass("oj-listbox-highlighted"),this.Jh(a.attr("data-value")),this.Ne(a.attr("data-value")),d.attr("aria-activedescendant",a[0].id),this.hide(),this.element.focus(),this.wl()&&this.ej.widget.hide())},show:function(){if(!this.options.disabled){this.wl()&&this.ej.widget.hide();0===this.Pb.children().length&&this.mo();this.Pb.css({top:"",left:""});this.Pb.width(this.element.parent().width());
var a=this.rn();this.Pb.position({my:a?"right top":"left top",at:a?"right bottom":"left bottom",of:this.element,collision:"fit"});this.ah=!0;this.Pb.show();a=e("[aria-selected]",this.Pb);1===a.length&&this.xx(e(a));e("ul",this.Pb).focus()}},hide:function(){this.ah&&(this.Pb.hide(),this.ah=!1,this.element.focus())},refresh:function(){this._superApply(arguments);this.mo();return this},Jh:function(a){this.gi()&&this._superApply(arguments);this.mo()},Fk:function(){return this.gi()},gi:function(){return!this.wl()||
this.Mz()},_GetDefaultStyleClass:o_d("oj-inputtime"),Si:function(){return this.options.value||""},dK:function(){return new Date(1950,0,1)},xx:function(a){a=a.position().top;var b=this.Pb.height(),d=e(".oj-listbox-results",this.Pb),g=d.scrollTop();(b+g<a||a<g)&&d.scrollTop(a)},pz:function(){return this.wl()?this.ej.converter:this.Ed()},yJ:function(){var a=this.pz(),b=this.options.value;return b?a.hb(b):""},wl:function(){return null!==this.ej},Mz:function(){return this.ej.inline},$q:function(a){a=e(a.target);
a[0]!==this.Pb[0]&&0===a.parents("#"+this.pf(this.Dw)).length&&(!a.closest("."+this.Kk).length&&this.ah)&&this.hide()},getNodeBySubId:function(a){var b=this._superApply(arguments);if(b)return b;b=a.subId;return"oj-listbox-drop"===b?this.Pb:"oj-inputdatetime-time-icon"===b?e(".oj-inputdatetime-time-icon",this.Ve):null},timeDisplay:o_c("Pb"),widget:function(){return this.gi()?this._super():this.ej.widget.widget()}});b.ta("oj.ojInputDateTime",e.oj.ojInputDate,{version:"1.0.0",widgetEventPrefix:"oj",
_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-time oj-component oj-inputdatetime",Ui:"inputHelpBoth",options:{timeIncrement:"T00:30:00:00",converter:b.R.gh(b.gf.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",hour12:!0,minute:"2-digit"})},qn:function(){this._super();this.Vl=this.element;this.vt=this.dC=this.te=null},Kc:function(){var a=this._super(),b=this.js(this.Ed());if(null===b)throw Error("Plase use ojInputDate if you do not have time portion");
if(this.Zc){var d=e("\x3cinput type\x3d'text'\x3e");d.insertAfter(this.element);this.Vl=d}this.dC=e.proxy(this.iO,this);this.te=this.Vl.ojInputTime({converter:null,optionChange:this.dC,timeIncrement:this.options.timeIncrement,placeholder:b.vb(),datePicker:{widget:this,converter:b,inline:this.Zc}});return a},Bk:function(){var a=this._superApply(arguments),b=this.js(this.Ed());this.te.ojInputTime("option","disabled",this.options.disabled);this.Zc&&this.Vl.val(b.hb(this.lj()));return a},_setOption:function(a,
b){this.te&&("timeIncrement"===a||"disabled"===a?this.te.ojInputTime("option",a,b):"converter"===a&&this.te.ojInputTime("option",a,this.js(b)));return this._superApply(arguments)},_destroy:function(){var a=this._super();this.te.ojInputTime("destroy");this.Zc&&this.Vl.remove();return a},js:function(a){a=a.Yb();var d={},h="hour hour12 minute second millisecond timeFormat".split(" "),g,k;g=0;for(k=h.length;g<k;g++)h[g]in a&&("timeFormat"===h[g]&&(d.formatType="time"),d[h[g]]=a[h[g]]);return e.isEmptyObject(d)?
null:this.vt=a=b.R.gh(b.gf.CONVERTER_TYPE_DATETIME).createConverter(d)},iO:function(a,b){if("value"===b.option){var d=new Date(this.lj()),e=this.vt.parse(b.value);d.setHours(e.getHours());d.setMinutes(e.getMinutes());d.setSeconds(e.getSeconds());d.setMilliseconds(e.getMilliseconds());this.option("value",d)}},co:function(a){var b=e.ui.keyCode,d=!1;if(!this.Id)switch(a.keyCode){case b.UP:case b.DOWN:a.shiftKey&&(this.te.ojInputTime("show"),d=!0)}return d?(a.preventDefault(),a.stopPropagation(),!1):
this._superApply(arguments)},jy:function(a){var b=this._superApply(arguments);this.Zc&&this.te&&this.te.ojInputTime("option","disabled",a);return b},show:function(){this.te.ojInputTime("hide");return this._super()},refresh:function(){this._superApply(arguments);this.te.ojInputTime("refresh");return this},getNodeBySubId:function(a){var b=this._superApply(arguments);if(b)return b;b=a.subId;return"oj-datepicker-time"===b||"oj-datepicker-time-icon"===b?this.te.ojInputTime("getNodeBySubId",a):null},_GetMessagingLauncherElement:function(){return this.Zc?
this.Vl.ojInputTime("widget"):this._super()},_GetDefaultStyleClass:o_d("oj-inputdatetime"),Hv:o_d("oj-ojInputDate")})});
//# sourceMappingURL=oj-modular.map