define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojmodel","ojs/ojdatacollection-common"],function(b,e){b.ta("oj.ojRowExpander",e.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{context:null,indent:10,expand:null,collapse:null},Tj:{root:"oj-rowexpander",icon:"oj-component-icon",clickable:"oj-clickable-icon",expand:"oj-rowexpander-expand-icon",collapse:"oj-rowexpander-collapse-icon",leaf:"oj-rowexpander-leaf-icon",lazyload:"oj-rowexpander-lazyload-icon"},_create:function(){this._super();
this.element.addClass(this.Tj.root)},_init:function(){var a=this,b;this._super();this.bH();b=this.options.context;this.ja=b.component;this.jc=b.datasource;this.PP=(b.depth-1)*this.options.indent;this.qh=b.state;this.xh=b.key;this.kP=this.l("accessibleRowDescription",{level:b.depth,num:b.index+1,total:this.jc.om().ye(b.parentKey)});this.CN();this.kt();if("expanded"===this.qh||"collapsed"===this.qh)e(this.Bi).on("click",function(){a.By()}),e(this.element).on("keypress",function(b){((b.keyCode||b.which)===
e.ui.keyCode.ENTER||e.ui.keyCode.SPACE)&&a.By()}),null!=this.ja&&(this.LD=this.BK.bind(this),e(this.ja.element).on("ojkeydown",this.LD)),null!=this.jc&&(this.KD=this.wK.bind(this),this.JD=this.lK.bind(this),this.jc.on("expand",this.KD,this),this.jc.on("collapse",this.JD,this));null!=this.ja&&(this.ID=this.kK.bind(this),e(this.ja.element).on("ojactive",this.ID))},refresh:function(){this.element.empty();this._init()},_destroy:function(){null!=this.ja&&(e(this.ja.element).off("ojkeydown",this.LD),e(this.ja.element).off("ojactive",
this.ID));null!=this.jc&&(this.jc.off("expand",this.KD,this),this.jc.off("collapse",this.JD,this));this.removeClass(this.Tj.root);this.element.empty()},bH:function(){this.Bi=e("\x3ca\x3e\x3c/a\x3e").addClass(this.Tj.icon).addClass(this.Tj.clickable);this.element.append(this.Bi)},Jq:function(a){this.Bi.addClass(this.Tj[a])},et:function(a){this.Bi.removeClass(this.Tj[a])},kt:function(){switch(this.qh){case "leaf":this.Jq("leaf");break;case "collapsed":this.Jq("expand");this.Jn(!1);break;case "expanded":this.Jq("collapse"),
this.Jn(!0)}},bB:function(){switch(this.qh){case "leaf":this.et("leaf");break;case "collapsed":this.et("expand");break;case "expanded":this.et("collapse")}},kK:function(a,b){var c;null!=b.activeKey&&(c=b.activeKey.rowKey,this.xh!==c||null!=b.previousActiveKey&&b.previousActiveKey.row==b.activeKey.row||this.ja.wB&&this.ja.wB({message:this.kP}))},BK:function(a,b){var c;this.xh===b.rowKey&&(c=a.keyCode||a.which,a.ctrlKey&&(c==e.ui.keyCode.RIGHT?this.jc.expand(this.xh):c==e.ui.keyCode.LEFT&&this.jc.collapse(this.xh)))},
wK:function(a){a.rowKey===this.xh&&(this.bB(),this.qh="expanded",this.kt(),this.Jn(!0),this._trigger("expand"))},lK:function(a){a.rowKey===this.xh&&(this.bB(),this.qh="collapsed",this.kt(),this.Jn(!1),this._trigger("collapse"))},By:function(){"collapsed"===this.qh?this.jc.expand(this.xh):"expanded"===this.qh&&this.jc.collapse(this.xh)},CN:function(){this.element.width(this.element.width()+this.PP+"px")},Jn:function(a){this.Bi.attr("aria-expanded",a)}})});
//# sourceMappingURL=oj-modular.map