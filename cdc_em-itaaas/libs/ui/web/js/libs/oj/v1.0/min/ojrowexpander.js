define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojmodel","ojs/ojdatacollection-common"],function(b,e){b.ta("oj.ojRowExpander",e.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{context:null,indent:10,expand:null,collapse:null},Lj:{root:"oj-rowexpander",icon:"oj-component-icon",clickable:"oj-clickable-icon",expand:"oj-rowexpander-expand-icon",collapse:"oj-rowexpander-collapse-icon",leaf:"oj-rowexpander-leaf-icon",lazyload:"oj-rowexpander-lazyload-icon"},_create:function(){this._super();
this.element.addClass(this.Lj.root)},_init:function(){var a=this,b;this._super();this.PG();b=this.options.context;this.ia=b.component;this.ic=b.datasource;this.vP=(b.depth-1)*this.options.indent;this.ih=b.state;this.ph=b.key;this.RO=this.q("accessibleRowDescription",{level:b.depth,num:b.index+1,total:this.ic.fm().we(b.parentKey)});this.iN();this.Ys();if("expanded"===this.ih||"collapsed"===this.ih)e(this.ti).on("click",function(){a.py()}),e(this.element).on("keypress",function(b){((b.keyCode||b.which)===
e.ui.keyCode.ENTER||e.ui.keyCode.SPACE)&&a.py()}),null!=this.ia&&(this.vD=this.hK.bind(this),e(this.ia.element).on("ojkeydown",this.vD)),null!=this.ic&&(this.uD=this.dK.bind(this),this.tD=this.TJ.bind(this),this.ic.on("expand",this.uD,this),this.ic.on("collapse",this.tD,this));null!=this.ia&&(this.sD=this.SJ.bind(this),e(this.ia.element).on("ojactive",this.sD))},refresh:function(){this.element.empty();this._init()},_destroy:function(){null!=this.ia&&(e(this.ia.element).off("ojkeydown",this.vD),e(this.ia.element).off("ojactive",
this.sD));null!=this.ic&&(this.ic.off("expand",this.uD,this),this.ic.off("collapse",this.tD,this));this.removeClass(this.Lj.root);this.element.empty()},PG:function(){this.ti=e("\x3ca\x3e\x3c/a\x3e").addClass(this.Lj.icon).addClass(this.Lj.clickable);this.element.append(this.ti)},zq:function(a){this.ti.addClass(this.Lj[a])},Ss:function(a){this.ti.removeClass(this.Lj[a])},Ys:function(){switch(this.ih){case "leaf":this.zq("leaf");break;case "collapsed":this.zq("expand");this.Cn(!1);break;case "expanded":this.zq("collapse"),
this.Cn(!0)}},RA:function(){switch(this.ih){case "leaf":this.Ss("leaf");break;case "collapsed":this.Ss("expand");break;case "expanded":this.Ss("collapse")}},SJ:function(a,b){var c;null!=b.activeKey&&(c=b.activeKey.rowKey,this.ph!==c||null!=b.previousActiveKey&&b.previousActiveKey.row==b.activeKey.row||this.ia.lB&&this.ia.lB({message:this.RO}))},hK:function(a,b){var c;this.ph===b.rowKey&&(c=a.keyCode||a.which,a.ctrlKey&&(c==e.ui.keyCode.RIGHT?this.ic.expand(this.ph):c==e.ui.keyCode.LEFT&&this.ic.collapse(this.ph)))},
dK:function(a){a.rowKey===this.ph&&(this.RA(),this.ih="expanded",this.Ys(),this.Cn(!0),this._trigger("expand"))},TJ:function(a){a.rowKey===this.ph&&(this.RA(),this.ih="collapsed",this.Ys(),this.Cn(!1),this._trigger("collapse"))},py:function(){"collapsed"===this.ih?this.ic.expand(this.ph):"expanded"===this.ih&&this.ic.collapse(this.ph)},iN:function(){this.element.width(this.element.width()+this.vP+"px")},Cn:function(a){this.ti.attr("aria-expanded",a)}})});
//# sourceMappingURL=oj-modular.map