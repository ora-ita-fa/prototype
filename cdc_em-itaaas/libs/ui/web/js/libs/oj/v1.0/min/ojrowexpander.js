define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojmodel","ojs/ojdatacollection-common"],function(b,e){b.ta("oj.ojRowExpander",e.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{context:null,indent:10,expand:null,collapse:null},Tj:{root:"oj-rowexpander",icon:"oj-component-icon",clickable:"oj-clickable-icon",expand:"oj-rowexpander-expand-icon",collapse:"oj-rowexpander-collapse-icon",leaf:"oj-rowexpander-leaf-icon",lazyload:"oj-rowexpander-lazyload-icon"},_create:function(){this._super();
this.element.addClass(this.Tj.root)},_init:function(){var a=this,b;this._super();this.dH();b=this.options.context;this.ja=b.component;this.jc=b.datasource;this.RP=(b.depth-1)*this.options.indent;this.qh=b.state;this.xh=b.key;this.mP=this.l("accessibleRowDescription",{level:b.depth,num:b.index+1,total:this.jc.om().ye(b.parentKey)});this.EN();this.lt();if("expanded"===this.qh||"collapsed"===this.qh)e(this.Bi).on("click",function(){a.Cy()}),e(this.element).on("keypress",function(b){((b.keyCode||b.which)===
e.ui.keyCode.ENTER||e.ui.keyCode.SPACE)&&a.Cy()}),null!=this.ja&&(this.MD=this.DK.bind(this),e(this.ja.element).on("ojkeydown",this.MD)),null!=this.jc&&(this.LD=this.yK.bind(this),this.KD=this.nK.bind(this),this.jc.on("expand",this.LD,this),this.jc.on("collapse",this.KD,this));null!=this.ja&&(this.JD=this.mK.bind(this),e(this.ja.element).on("ojactive",this.JD))},refresh:function(){this.element.empty();this._init()},_destroy:function(){null!=this.ja&&(e(this.ja.element).off("ojkeydown",this.MD),e(this.ja.element).off("ojactive",
this.JD));null!=this.jc&&(this.jc.off("expand",this.LD,this),this.jc.off("collapse",this.KD,this));this.removeClass(this.Tj.root);this.element.empty()},dH:function(){this.Bi=e("\x3ca\x3e\x3c/a\x3e").addClass(this.Tj.icon).addClass(this.Tj.clickable);this.element.append(this.Bi)},Jq:function(a){this.Bi.addClass(this.Tj[a])},ft:function(a){this.Bi.removeClass(this.Tj[a])},lt:function(){switch(this.qh){case "leaf":this.Jq("leaf");break;case "collapsed":this.Jq("expand");this.Jn(!1);break;case "expanded":this.Jq("collapse"),
this.Jn(!0)}},cB:function(){switch(this.qh){case "leaf":this.ft("leaf");break;case "collapsed":this.ft("expand");break;case "expanded":this.ft("collapse")}},mK:function(a,b){var c;null!=b.activeKey&&(c=b.activeKey.rowKey,this.xh!==c||null!=b.previousActiveKey&&b.previousActiveKey.row==b.activeKey.row||this.ja.xB&&this.ja.xB({message:this.mP}))},DK:function(a,b){var c;this.xh===b.rowKey&&(c=a.keyCode||a.which,a.ctrlKey&&(c==e.ui.keyCode.RIGHT?this.jc.expand(this.xh):c==e.ui.keyCode.LEFT&&this.jc.collapse(this.xh)))},
yK:function(a){a.rowKey===this.xh&&(this.cB(),this.qh="expanded",this.lt(),this.Jn(!0),this._trigger("expand"))},nK:function(a){a.rowKey===this.xh&&(this.cB(),this.qh="collapsed",this.lt(),this.Jn(!1),this._trigger("collapse"))},Cy:function(){"collapsed"===this.qh?this.jc.expand(this.xh):"expanded"===this.qh&&this.jc.collapse(this.xh)},EN:function(){this.element.width(this.element.width()+this.RP+"px")},Jn:function(a){this.Bi.attr("aria-expanded",a)}})});
//# sourceMappingURL=oj-modular.map