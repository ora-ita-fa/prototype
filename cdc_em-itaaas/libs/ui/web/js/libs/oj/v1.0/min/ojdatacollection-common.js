define(["ojs/ojcore","jquery"],function(b,e){b.Vc=function(a){this.data=a;this.Init()};o_("DataSource",b.Vc,b);b.a.ga(b.Vc,b.a,"oj.DataSource");b.Vc.prototype.Init=function(){this.zb=[];b.Vc.j.Init.call(this)};b.a.c("DataSource.prototype.Init",{Init:b.Vc.prototype.Init});b.Vc.prototype.on=function(a,b){var c=!1,f;for(f=0;f<this.zb.length;f++)if(this.zb[f].eventType==a&&this.zb[f].eventHandlerFunc==b){c=!0;break}c||this.zb.push({eventType:a,eventHandlerFunc:b})};b.a.c("DataSource.prototype.on",{on:b.Vc.prototype.on});
b.Vc.prototype.off=function(a,b){var c;for(c=this.zb.length-1;0<=c;c--)if(this.zb[c].eventType==a&&this.zb[c].eventHandlerFunc==b){this.zb.splice(c,1);break}};b.a.c("DataSource.prototype.off",{off:b.Vc.prototype.off});b.Vc.prototype.handleEvent=function(a,b){var c;for(c=0;c<this.zb.length;c++){var f=this.zb[c];f.eventType==a&&f.eventHandlerFunc(b)}};b.a.c("DataSource.prototype.handleEvent",{handleEvent:b.Vc.prototype.handleEvent});b.cc=function(a){b.cc.j.constructor.call(this,a)};o_("TreeDataSource",
b.cc,b);b.a.ga(b.cc,b.Vc,"oj.TreeDataSource");b.cc.prototype.ye=o_d(-1);b.cc.prototype.vd=function(){b.f.V()};b.a.c("TreeDataSource.prototype.fetchChildren",{vd:b.cc.prototype.vd});b.cc.prototype.hg=function(){b.f.V()};b.a.c("TreeDataSource.prototype.fetchDescendents",{hg:b.cc.prototype.hg});b.cc.prototype.sort=function(){b.f.V()};b.a.c("TreeDataSource.prototype.sort",{sort:b.cc.prototype.sort});b.cc.prototype.jm=function(){return{key:null,direction:"none"}};b.a.c("TreeDataSource.prototype.getSortCriteria",
{jm:b.cc.prototype.jm});b.cc.prototype.move=function(){b.f.V()};b.a.c("TreeDataSource.prototype.move",{move:b.cc.prototype.move});b.cc.prototype.Hm=o_d("valid");b.a.c("TreeDataSource.prototype.moveOK",{Hm:b.cc.prototype.Hm});b.cc.prototype.getCapability=o_d(null);b.a.c("TreeDataSource.prototype.getCapability",{getCapability:b.cc.prototype.getCapability});b.Y=function(a,d){this.fd=a;this.Em=d;b.Y.j.constructor.call(this)};o_("FlattenedTreeDataSource",b.Y,b);b.a.ga(b.Y,b.Vc,"oj.FlattenedTreeDataSource");
b.Y.prototype.Init=function(){var a;b.Y.j.Init.call(this);this.fd.on("change",this.OK.bind(this));this.ng=parseInt(this.Em.fetchSize,10);isNaN(this.ng)&&(this.ng=25);this.og=parseInt(this.Em.maxCount,10);isNaN(this.og)&&(this.og=500);a=this.Em.expanded;Array.isArray(a)?this.mg=a:("all"===a&&(this.ik=[]),this.mg=[]);this.sh=[]};b.a.c("FlattenedTreeDataSource.prototype.Init",{Init:b.Y.prototype.Init});b.Y.prototype.handleEvent=function(a,d){b.Y.j.handleEvent.call(this,a,d)};b.a.c("FlattenedTreeDataSource.prototype.handleEvent",
{handleEvent:b.Y.prototype.handleEvent});b.Y.prototype.Vm=function(){delete this.sh;delete this.mg;this.fd.off("change");this.fd.Vm&&this.fd.Vm()};b.a.c("FlattenedTreeDataSource.prototype.Destory",{Vm:b.Y.prototype.Vm});b.Y.prototype.jD=o_c("mg");b.a.c("FlattenedTreeDataSource.prototype.getExpandedKeys",{jD:b.Y.prototype.jD});b.Y.prototype.Dp=function(a){return null!=this.Em?this.Em[a]:null};b.a.c("FlattenedTreeDataSource.prototype.getOption",{Dp:b.Y.prototype.Dp});b.Y.prototype.om=o_c("fd");b.a.c("FlattenedTreeDataSource.prototype.getWrappedDataSource",
{om:b.Y.prototype.om});b.Y.prototype.YC=function(a,b){this.No()?this.ZI(a,b):this.YI(a,b)};b.Y.prototype.YI=function(a,d){var c,f,e,g,k,l;if(a.start>this.yc()){c=this.Xr();if(0>this.yc()){a.count=Math.min(c,a.count);this.fd.vd(null,a,{success:function(b){this.Do(b,null,0,a,0,d)}.bind(this)});return}if(0<c){f=this.Xy();e=f.parent;g=this.fd.ye(e);k=f.index;l=f.depth;-1===g||k<g-1?(a.start=k+1,a.count=-1===g?this.ng:Math.min(c,Math.min(this.ng,g-a.start)),this.fd.vd(e,a,{success:function(b){this.Do(b,
e,l,a,g,d)}.bind(this)})):k===g-1?(c=new b.jd(null,a.start),null!=d&&null!=d.success&&d.success.call(null,c)):(c=this.yy(e,l,d,c),c||(c=new b.jd(null,a.start),null!=d&&null!=d.success&&d.success.call(null,c)));return}}this.ju(a,d)};b.Y.prototype.Xr=function(){return this.og-(this.yc()+1)};b.Y.prototype.Do=function(a,d,c,f,e,g){var k;k=[];a=new b.Jc(a,this.rm.bind(this),f);this.zM(a,d,c,k);-1===e&&0===a.W()&&null!=d&&0<c?(d=this.yy(d,c,g))||null!=g&&null!=g.success&&g.success.call(null,a):(null!=g&&
null!=g.success&&g.success.call(null,a),this.uy(k))};b.Y.prototype.yy=function(a,b,c,f){var e,g,k,l,m,n,q,r;void 0===f&&(f=this.Xr());this.Kz()&&(e={queueOnly:!0});g=this.ng;for(k=this.yc()-1;0<=k;k--)if(l=this.Ud(k),m=l.depth,m<b&&(a=l.parent,n=this.fd.ye(a),l=l.index,(q=-1===n)||l<n-1)){r={};r.start=l+1;q?(r.count=Math.min(f,Math.max(0,g)),e=void 0):r.count=Math.min(f,Math.min(g,n-r.start));if(0==r.count)break;this.fd.vd(a,r,{success:function(b){this.Do(b,a,m,r,n,c)}.bind(this)},e);b=m;g=Math.max(0,
g-r.count);if(q||0===m||0===g)break}void 0!=e&&this.fd.vd(a,{start:r.count,count:0},{success:function(b){this.Do(b,a,m,r,n,c)}.bind(this)});return g!=this.ng};b.Y.prototype.zM=function(a,b,c,f){var e,g,k,l;e=a.Ba();g=a.W();for(k=0;k<g;k++)l=a.getMetadata(e+k),l=l.key,this.Fn(l,c,e+k,b),this.Oo(l)&&f.push(l)};b.Y.prototype.rm=function(a,b){this.Oo(a)&&!b.leaf?b.state="expanded":b.state=b.leaf?"leaf":"collapsed"};b.Y.prototype.ZI=function(a,b){var c={maxCount:this.og};0<=this.yc()&&(c.start=this.Ud(this.yc()).key);
this.fd.hg(null,null,{success:function(c){this.xK(c,a,b)}.bind(this)},c)};b.Y.prototype.xK=function(a,d,c){var f,e,g;d.start>this.yc()?(f=this.Xr(),e=Math.min(f,d.count),a=new b.Jc(a,this.rm.bind(this)),0<=this.yc()?(g=this.Xy(),f={index:0,found:!1,count:0},this.Xs(a,null,0,g,e,f),e=f.index+1):(f={count:0},this.Xs(a,null,0,null,e,f),e=0),null!=c&&null!=c.success&&(a=null!=f?0===f.count?new b.jd(null,d.start):new b.Fc(a,e):new b.Fc(a),c.success.call(null,a))):this.ju(d,c)};b.Y.prototype.Xs=function(a,
b,c,f,e,g){var k,l,m,n,q;k=a.Ba();l=a.W();for(m=0;m<l&&g.count!=e;m++){n=a.getMetadata(k+m);q=n.key;g.checkDepth&&f.depth===c&&(g.found=!0,g.checkDepth=!1);if(null==f||g.found)this.Fn(q,c,k+m,b),g.count+=1,n.state=n.leaf?"leaf":"expanded";null==f||g.found||(q===f.key?n.leaf||this.Oo(q)?g.found=!0:g.checkDepth=!0:g.index+=1);a.bd&&(n=a.bd(m),null!=n&&this.Xs(n,q,c+1,f,e,g))}};b.Y.prototype.expand=function(a){this.Xf(a)};b.a.c("FlattenedTreeDataSource.prototype.expand",{expand:b.Y.prototype.expand});
b.Y.prototype.Xf=function(a){var b,c,f;b=this.fd.ye(a);c=Math.min(this.ng,-1==b?this.ng:b);if(this.yc()+1===this.og&&(f=this.ck(a),f==this.og-1))return;0!=c&&(this.fd.vd(a,{start:0,count:c},{success:function(c){this.KP(a,c,b)}.bind(this)},{success:this}),this.handleEvent("expand",{rowKey:a}))};b.Y.prototype.collapse=function(a){var b,c,f,e,g;b=this.ck(a)+1;c=this.Ud(b-1);f=0;c=c.depth;e=this.yc();for(g=b;g<e+1;g++){var k=this.Ud(g).depth;if(k>c)f+=1;else if(k==c)break}if(0!=f){this.No()?this.ik.push(a):
this.bN(a);e=[];for(c=0;c<f;c++)e.push({key:this.Ud(b+c).key,index:b+c});this.YA(b,f);this.Up(e);this.handleEvent("collapse",{rowKey:a})}};b.a.c("FlattenedTreeDataSource.prototype.collapse",{collapse:b.Y.prototype.collapse});b.Y.prototype.Oo=function(a){return this.No()?this.ik&&0<this.ik.length?-1===this.Iy(a):!0:this.mg&&0<this.mg.length?-1<this.Sy(a):!1};b.Y.prototype.Iy=function(a){return this.Wy(this.ik,a)};b.Y.prototype.Sy=function(a){return this.Wy(this.mg,a)};b.Y.prototype.Wy=function(a,b){var c,
f;f=-1;for(c=0;c<a.length;c++)a[c]===b&&(f=c);return f};b.Y.prototype.bN=function(a){a=this.Sy(a);-1<a&&this.mg.splice(a,1)};b.Y.prototype.XM=function(a){a=this.Iy(a);-1<a&&this.ik.splice(a,1)};b.Y.prototype.KP=function(a,d,c){var f,e,g,k,l,m,n,q,r;d=new b.Jc(d,this.rm.bind(this));e=f=this.ck(a)+1;g=d.Ba();k=d.W();l=this.Ud(f-1);m=l.depth+1;q=[];for(r=g;r<k;r++)g=d.getMetadata(r),n=g.key,this.Oo(n)&&q.push(n),this.Iz(f,g,l.key,r,m),f++;this.No()?this.XM(a):-1===this.mg.indexOf(a)&&this.mg.push(a);
this.pu(e,a,d);-1===c&&k===this.ng||c>k||f==this.og?this.tr(f):this.yc()>=this.og&&this.tr(this.og);this.uy(q)};b.Y.prototype.uy=function(a){var b,c;this.Kz()&&(b={queueOnly:!0});for(c=0;c<a.length;c++)c==a.length-1?this.Xf(a[c]):this.Xf(a[c],b)};b.Y.prototype.Iz=function(a,b,c,f,e){b=b.key;a<=this.yc()?this.Fn(b,e,f,c,a):this.Fn(b,e,f,c)};b.Y.prototype.tr=function(a,b){var c;void 0==b&&(b=this.yc()+1-a);c=[];for(var f=0;f<b;f++)c.push({row:this.Ud(a+f).key});this.YA(a,b);this.Up(c)};b.Y.prototype.OK=
function(a){var b,c,f;b=a.operation;c=a.parent;c=Array.isArray(c)?c[c.length-1]:c;f=a.index;"insert"===b?this.AK(c,f,a.data):"delete"===b?this.uK(c,f):"refresh"===b&&this.QK(c)};b.Y.prototype.AK=function(a,b,c){var f,e;f=this.ck(a);e=this.Ud(f).depth+1;f=f+b+1;c=c.getMetadata(c.Ba());this.Iz(f,c,a,b,e)};b.Y.prototype.uK=function(a,d){var c,f,e,g,k;c=this.ck(a);f=this.Ud(c);c+=d;e=this.Ud(c);b.f.assert(e.parent===f&&e.depth===f.depth+1);f=c+1;for(g=this.yc();f<=g;){k=this.Ud(f);if(k.depth!=e.depth)break;
f++}this.tr(c,1)};b.Y.prototype.QK=function(a){null==a&&this.refresh()};b.Y.prototype.No=function(){var a=this.fd.getCapability("fetchDescendents");return void 0!=this.ik&&null!=a&&"disable"!=a};b.Y.prototype.Kz=function(){return"enable"===this.fd.getCapability("batchFetch")};b.Y.prototype.refresh=function(){this.MH()};b.Y.prototype.ck=function(a){var b,c,f;b=this.yc();for(c=0;c<=b;c++)if(f=this.Ud(c),f.key==a)return c;return-1};b.Y.prototype.getKey=function(a){return 0>a||a>this.yc()?null:this.Ud(a).key};
b.Y.prototype.zP=function(){return{start:0,end:this.yc()+1}};b.Y.prototype.ju=function(a,b){null!=b&&null!=b.error&&b.error.call(null)};b.Y.prototype.pu=function(){b.f.V()};b.Y.prototype.Up=function(){b.f.V()};b.Y.prototype.yc=function(){return this.sh.length-1};b.Y.prototype.Xy=function(){return this.sh[this.yc()]};b.Y.prototype.Ud=function(a){return this.sh[a]};b.Y.prototype.Fn=function(a,b,c,f,e){var g={};g.key=a;g.depth=b;g.index=c;g.parent=f;void 0===e?this.sh.push(g):this.sh.splice(e,0,g)};
b.Y.prototype.YA=function(a,b){this.sh.splice(a,b)};b.Y.prototype.MH=function(){this.sh.length=0};b.Vi=function(){this.id=null;this.depth=0;this.parent=null;this.children=[];this.xu=this.attr=this.title=null};b.Vi.prototype.oH=function(a){return function(b,c){return b.attr&&c.attr&&b.attr[a]&&c.attr[a]?b.attr[a]<c.attr[a]?0:1:b[a]<c[a]?0:1}};b.Vi.prototype.EI=function(a){return function(b,c){return b.attr&&c.attr&&b.attr[a]&&c.attr[a]?b.attr[a]<c.attr[a]?1:0:b[a]<c[a]?1:0}};b.Vi.prototype.TB=function(a){var b=
a.key;"ascending"===a.direction?this.children.sort(this.oH(b)):"descending"===a.direction&&this.children.sort(this.EI(b));for(var b=0,c=this.children.length;b<c;b++)this.children[b].TB(a)};b.Db=function(a){var d;d=new b.Vi;a.id||(d.id="root");this.data=this.Vx(0,d,a);b.Db.j.constructor.call(this,d)};o_("JsonTreeDataSource",b.Db,b);b.a.ga(b.Db,b.cc,"oj.JsonTreeDataSource");b.Db.prototype.Init=function(){b.Db.j.Init.call(this)};b.a.c("JsonTreeDataSource.prototype.Init",{Init:b.Db.prototype.Init});b.Db.prototype.Vx=
function(a,d,c,f){var e,g,k,l,m,n,q;f||(f=0);for(l in c)if("children"==l||0==f&&c instanceof Array)for(e=0==f&&c instanceof Array?c:c[l],f++,q=0;q<e.length;q++){k=e[q];g=new b.Vi;k.id||(a++,k.attr?k.attr.id||(k.attr.id="rid_"+a):g.id="rid_"+a);for(m in k)for(n in g)m==n&&"children"!=m&&(g[n]=k[m]),"depth"==n&&(g[n]=f);d.children.push(g);for(n in k)"children"==n&&this.Vx(a,d.children[q],k,f)}return d};b.Db.prototype.ye=function(a){a||(a=this.data.id);a=this.Yg(this.data,a);return a.children?a.children.length:
null};b.a.c("JsonTreeDataSource.prototype.getChildCount",{ye:b.Db.prototype.ye});b.Db.prototype.vd=function(a,d,c){var f,e,g,k,l;g=[];a||(a=this.data.id);k=this.Yg(this.data,a);d||(d=[],d.start=0,d.count=k.children.length);d.count||(d.count=k.children.length);d.start||(d.start=0);f=d.start;e=Math.min(k.children.length,f+d.count);for(d=f;d<e;d+=1)l=new b.Vi,k.children[d].attr&&(l.attr=k.children[d].attr),k.children[d].id&&(l.id=k.children[d].id),k.children[d].depth&&(l.depth=k.children[d].depth),k.children[d].title&&
(l.title=k.children[d].title),k.children[d].parent&&(l.parent=k.children[d].parent),l.xu=0<k.children[d].children.length?!1:!0,g.push(l);a=new b.Ic(f,e,g,a,k.depth);null!=c&&null!=c.success&&c.success.call(null,a)};b.a.c("JsonTreeDataSource.prototype.fetchChildren",{vd:b.Db.prototype.vd});b.Db.prototype.hg=function(a,d,c){var f,e,g;e=[];a||(a=this.data.id);g=this.Yg(this.data,a);d||(d=[],d.start=0,d.count=g.children.length);d.count||(d.count=g.children.length);d.start||(d.start=0);f=d.start;for(d=
Math.min(g.children.length,f+d.count);f<d;f+=1)g.children[f].xu=0<g.children[f].children.length?!1:!0,e.push(g.children[f]);a=new b.Ic(0,e.length,e,a,g.depth);null!=c&&null!=c.success&&c.success.call(null,a)};b.a.c("JsonTreeDataSource.prototype.fetchDescendents",{hg:b.Db.prototype.hg});b.Db.prototype.move=function(a,b,c,f){var e;e=b;if(!e||e==this.data.id){if("inside"!=c){console.log("Error: root can not be the reference node if position equals to "+c);return}e||(e=this.data.id)}a=this.Yg(null,a);
this.Yg(a,e)?console.log("Error: the node to move contains the reference node as its sub-tree."):(b=this.Yg(null,e),e=this.bs(e),this.cN(a),"inside"==c?(this.fg(a,a.depth-(b.depth+1)),b.children.push(a)):"before"==c?(this.fg(a,a.depth-b.depth),c=e.children.indexOf(b),-1<c&&(0!=c?e.children.splice(c-1,0,a):e.children.unshift(a))):"after"==c?(this.fg(a,a.depth-b.depth),c=e.children.indexOf(b),-1<c&&e.children.splice(c,0,a)):"first"==c?(this.fg(a,a.depth-b.depth),e.children.unshift(a)):"last"==c&&(this.fg(a,
a.depth-b.depth),e.children.push(a)),null!=f&&null!=f.success&&f.success.call(null,this.data))};b.a.c("JsonTreeDataSource.prototype.move",{move:b.Db.prototype.move});b.Db.prototype.sort=function(a,b){var c;c=this.Yg(this.data,this.data.id);c.TB(a);null!=b&&null!=b.success&&b.success.call(null,c)};b.a.c("JsonTreeDataSource.prototype.sort",{sort:b.Db.prototype.sort});b.Db.prototype.bs=function(a,b){var c,f=null;if(a==this.data.id)return null;b||(b=this.data);if(b.children&&0<b.children.length){for(c=
0;c<b.children.length;c++)if(b.children[c].id&&b.children[c].id==a||b.children[c].attr&&b.children[c].attr.id==a)return b;for(c=0;c<b.children.length&&!(f=this.bs(a,b.children[c]));c++);}return f};b.Db.prototype.Yg=function(a,b){var c,f=null;a||(a=this.data);if(a.id&&a.id==b||a.attr&&a.attr.id==b)return a;if(null!=a.children)for(c=0;c<a.children.length&&!f;c++)f=a.children[c].id&&a.children[c].id==b||a.children[c].attr&&a.children[c].attr.id==b?a.children[c]:this.Yg(a.children[c],b);return f};b.Db.prototype.fg=
function(a,b){var c;a.depth-=b;if(a.children&&0!=a.children.length)for(c=0;c<a.children.length;c++)this.fg(a.children[c],b)};b.Db.prototype.cN=function(a){var b;a.id?b=a.id:a.attr&&(b=a.attr.id);(b=this.bs(b))||(b=this.data);a=b.children.indexOf(a);-1<a&&b.children.splice(a,1)};b.Db.prototype.getCapability=function(a){return"fetchDescendents"===a?"enable":"sort"===a?"default":"batchFetch"===a?"disable":null};b.a.c("JsonTreeDataSource.prototype.getCapability",{getCapability:b.Db.prototype.getCapability});
b.Va=function(a,d){b.Va._init(this,a,d,null)};o_("Row",b.Va,b);b.a.ga(b.Va,b.a,"Row.Row");b.Va.prototype.Init=function(){b.Va.j.Init.call(this)};b.Va.prototype.attributes={};b.a.c("Row.prototype.attributes",{attributes:b.Va.prototype.attributes});b.Va.prototype.context={};b.a.c("Row.prototype.context",{context:b.Va.prototype.context});b.Va.prototype.id=null;b.a.c("Row.prototype.id",{id:b.Va.prototype.id});b.Va.prototype.be=null;b.a.c("Row.prototype.idAttribute",{be:b.Va.prototype.be});b.Va._init=
function(a,b,c,f){b=null;a.Init();a.index=-1;c=c||{};a.attributes={};for(b in f)f.hasOwnProperty(b)&&(a[b]=f[b]);a.rowSet=c.rowSet;a.context=c.context};b.Va.prototype.clone=function(){b.f.V();return null};b.a.c("Row.prototype.clone",{clone:b.Va.prototype.clone});b.Va.prototype.get=function(){b.f.V();return null};b.a.c("Row.prototype.get",{get:b.Va.prototype.get});b.Va.prototype.set=function(){b.f.V();return null};b.a.c("Row.prototype.set",{set:b.Va.prototype.set});b.Va.prototype.keys=function(){b.f.V();
return null};b.a.c("Row.prototype.keys",{keys:b.Va.prototype.keys});b.Va.prototype.Ie=function(){b.f.V();return null};b.a.c("Row.prototype.values",{Ie:b.Va.prototype.Ie});b.Va.prototype.Rc=function(){b.f.V();return null};b.a.c("Row.prototype.pairs",{Rc:b.Va.prototype.Rc});b.t=function(a,d){b.t._init(this,a,d,null)};o_("RowSet",b.t,b);b.t.prototype.we=null;b.a.c("RowSet.prototype.comparator",{we:b.t.prototype.we});b.t.prototype.df=!0;b.a.c("RowSet.prototype.sortSupported",{df:b.t.prototype.df});b.a.ga(b.t,
b.a,"RowSet.RowSet");b.t.prototype.Init=function(){b.t.j.Init.call(this)};b.t._init=function(a,b,c,f){var e;a.zb=[];a.Init();if(f)for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e])};b.t.prototype.at=function(){b.f.V();return null};b.a.c("RowSet.prototype.at",{at:b.t.prototype.at});b.t.prototype.fetch=function(){b.f.V()};b.a.c("RowSet.prototype.fetch",{fetch:b.t.prototype.fetch});b.t.prototype.get=function(){b.f.V();return null};b.a.c("RowSet.prototype.get",{get:b.t.prototype.get});b.t.prototype.hasMore=
function(){b.f.V();return!1};b.a.c("RowSet.prototype.hasMore",{hasMore:b.t.prototype.hasMore});b.t.prototype.indexOf=function(){b.f.V();return 0};b.a.c("RowSet.prototype.indexOf",{indexOf:b.t.prototype.indexOf});b.t.prototype.isEmpty=function(){b.f.V();return!0};b.a.c("RowSet.prototype.isEmpty",{isEmpty:b.t.prototype.isEmpty});b.t.prototype.size=function(){b.f.V();return 0};b.a.c("RowSet.prototype.size",{size:b.t.prototype.size});b.t.prototype.sort=function(){b.f.V()};b.a.c("RowSet.prototype.sort",
{sort:b.t.prototype.sort});b.t.prototype.totalSize=function(){b.f.V();return 0};b.a.c("RowSet.prototype.totalSize",{totalSize:b.t.prototype.totalSize});b.t.prototype.on=function(a,b){var c=!1,f;for(f=0;f<this.zb.length;f++)if(this.zb[f].eventType==a&&this.zb[f].eventHandlerFunc==b){c=!0;break}c||this.zb.push({eventType:a,eventHandlerFunc:b})};b.a.c("RowSet.prototype.on",{on:b.t.prototype.on});b.t.prototype.off=function(a,b){var c;for(c=0;c<this.zb.length;c++)if(this.zb[c].eventType==a&&this.zb[c].eventHandlerFunc==
b){this.zb.remove(this.zb[c]);break}};b.a.c("RowSet.prototype.off",{off:b.t.prototype.off});b.t.prototype.nc=function(a,b){var c;for(c=0;c<this.zb.length;c++){var f=this.zb[c];f.eventType==a&&f.eventHandlerFunc(b)}};o_("RowSet.prototype._handleEvent",b.t.prototype.nc,b);b.t.q={ADD:"add",REMOVE:"remove",RESET:"reset",SORT:"sort",CHANGE:"change",DESTROY:"destroy",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",ALL:"all"};o_("RowSet.EventType",b.t.q,b);b.t.yG={ZQ:"added",eR:"deleted",oR:"updated",
lR:"none"};o_("RowSet._ROW_STATUSES",b.t.yG,b);b.Da=function(a,d){b.Da._init(this,a,d,null)};o_("ArrayRow",b.Da,b);b.a.ga(b.Da,b.Va,"ArrayRow.ArrayRow");b.Da.prototype.Init=function(){b.Da.j.Init.call(this)};b.Da.prototype.attributes={};b.a.c("ArrayRow.prototype.attributes",{attributes:b.Da.prototype.attributes});b.Da.prototype.id=null;b.a.c("ArrayRow.prototype.id",{id:b.Da.prototype.id});b.Da.prototype.be=null;b.a.c("ArrayRow.prototype.idAttribute",{be:b.Da.prototype.be});b.Da._init=function(a,b,
c,f){var e=null;a.Init();a.index=-1;c=c||{};a.attributes=b;for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);a.idAttribute=c.idAttribute;a.context=c.context;a.ot()};b.Da.prototype.clone=function(){var a=new this.constructor,d;for(d in this)this.hasOwnProperty(d)&&this[d]!==this.attributes&&(a[d]=this[d]);a.attributes=b.Da.Vf(this.attributes,null);a.ot();return a};b.a.c("ArrayRow.prototype.clone",{clone:b.Da.prototype.clone});b.Da.prototype.get=function(a){return this.attributes[a]};b.a.c("ArrayRow.prototype.get",
{get:b.Da.prototype.get});b.Da.prototype.set=function(a,d,c){var f={},e=!1;if(arguments&&0<arguments.length)if(1<arguments.length&&arguments[arguments.length-1]&&(e=!0,f=arguments[arguments.length-1]||{}),b.Da.ci(a))this.Lj(a,f);else for(f=0;f<arguments.length;f+=2)(void 0!==arguments[f]||f<arguments.length-1||!e&&f===arguments.length-1)&&this.Lj(arguments[f],arguments[f+1]);return this};b.a.c("ArrayRow.prototype.set",{set:b.Da.prototype.set});b.Da.prototype.keys=function(){var a,b=[];for(a in this.attributes)this.attributes.hasOwnProperty(a)&&
b.push(a);return b};b.a.c("ArrayRow.prototype.keys",{keys:b.Da.prototype.keys});b.Da.prototype.Ie=function(){var a,b=[];for(a in this.attributes)this.attributes.hasOwnProperty(a)&&b.push(this.get(a));return b};b.a.c("ArrayRow.prototype.values",{Ie:b.Da.prototype.Ie});b.Da.prototype.Rc=function(){var a,b={};for(a in this.attributes)this.attributes.hasOwnProperty(a)&&(b[a]=this.get(a));return b};b.a.c("ArrayRow.prototype.pairs",{Rc:b.Da.prototype.Rc});b.Da.prototype.Ur=function(){return this.idAttribute||
"id"};b.Da.prototype.yo=function(a){return this[a]instanceof Function?this[a]():this[a]};b.Da.ci=function(a){var b;if(a&&a instanceof Object)for(b in a)if(a.hasOwnProperty(b))return!0;return!1};b.Da.prototype.ot=function(){this.id=this.attributes[this.Ur()]};b.Da.prototype.mt=function(a,d){return b.a.Ci(this.attributes[a],d)?!1:(this.attributes[a]=d,this.ot(),!0)};b.Da.prototype.Lj=function(a,b){if(null==a)return!0;var c={},f;if(1<arguments.length)c[a]=b;else for(f in a)a.hasOwnProperty(f)&&(c[f]=
a[f]);for(f in c)c.hasOwnProperty(f)&&this.mt(f,c[f]);return!0};b.Da.Vf=function(a,d){var c;d=d||{};for(c in a)a.hasOwnProperty(c)&&("object"!==typeof a[c]?d.hasOwnProperty(c)?void 0!==a[c]&&(d[c]=a[c]):d[c]=a[c]:d[c]=b.Da.Vf(a[c],null));return d};b.Z=function(a,d){b.Z._init(this,a,d,null)};o_("ArrayRowSet",b.Z,b);b.Z.prototype.we=null;b.a.c("ArrayRowSet.prototype.comparator",{we:b.Z.prototype.we});b.Z.prototype.df=!0;b.a.c("ArrayRowSet.prototype.sortSupported",{df:b.Z.prototype.df});b.a.ga(b.Z,b.t,
"ArrayRowSet.ArrayRowSet");b.Z.prototype.Init=function(){b.Z.j.Init.call(this)};b.Z._init=function(a,b,c,f){var e;a.zb=[];a.S=0;a.Init();if(f)for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);c=c||{};a.Vb=[];null!=b&&void 0!==b&&(a.b=b instanceof Array?b:b(),b instanceof Array||b.subscribe(function(b){b=a.fz(b,null,null);a.reset(b)},null,"change"),a.Ue=a.b.length,a.rs="id",null!=c&&null!=c.idAttribute&&(a.rs=c.idAttribute))};b.Z.prototype.add=function(a,b){b=b||{};var c=b.deferred;this.eH(a,b.at,b);return c?
e.Deferred().resolve().promise():null};b.a.c("ArrayRowSet.prototype.add",{add:b.Z.prototype.add});b.Z.prototype.at=function(a,b){b=b||{};if(0>a||a>=this.Vb.length)return null;var c=this.Vb[a];return b.deferred?e.Deferred().resolve(c).promise():c};b.a.c("ArrayRowSet.prototype.at",{at:b.Z.prototype.at});b.Z.prototype.clone=function(){var a=new this.constructor,b,c;for(b=0;b<this.Vb.length;b+=1)(c=this.at(b,null))&&a.add(c.clone(),{at:b});return a};b.a.c("ArrayRowSet.prototype.clone",{clone:b.Z.prototype.clone});
b.Z.prototype.fetch=function(a){a=a||{};this.rt();var b=0<a.pageSize?a.pageSize:-1;this.S=null!=a?null!=a.startIndex?a.startIndex:0:0;this.Vb=this.fz(this.b,this.rs,this.S,b);this.al(!0)};b.a.c("ArrayRowSet.prototype.fetch",{fetch:b.Z.prototype.fetch});b.Z.prototype.get=function(a,b){b=b||{};var c=b.deferred,f,h=null;for(f=0;f<this.Vb.length;f+=1)if(h=this.Vb[f],void 0!==h&&h.id==a){if(c)return e.Deferred().resolve(h);break}return h};b.a.c("ArrayRowSet.prototype.get",{get:b.Z.prototype.get});b.Z.prototype.hasMore=
o_d(!1);b.a.c("ArrayRowSet.prototype.hasMore",{hasMore:b.Z.prototype.hasMore});b.Z.prototype.indexOf=function(a,b){b=b||{};return b.deferred?this.get(a.id,null).then(function(a){return a.index}):this.get(a.id).index};b.a.c("ArrayRowSet.prototype.indexOf",{indexOf:b.Z.prototype.indexOf});b.Z.prototype.isEmpty=function(){return 0===this.Vb.length};b.a.c("ArrayRowSet.prototype.isEmpty",{isEmpty:b.Z.prototype.isEmpty});b.Z.prototype.remove=function(a,b){b=b||{};this.oi(a,-1,b)};b.a.c("ArrayRowSet.prototype.remove",
{remove:b.Z.prototype.remove});b.Z.prototype.reset=function(a,d){var c;d=d||{};d.previousRows=this.Vb;d.silent=!0;if(void 0===a||null==a||a instanceof Array&&0==a.length){for(c=0;c<this.Vb.length;c+=1)this.Vb[c]&&(this.Vb[c].rowSet=null);this.Vb=[]}else if(this.Vb=[],a instanceof Array)for(c=0;c<a.length;c+=1)this.add(a[c],d);else this.add(a,d);b.Z.j.nc.call(this,b.t.q.RESET,null)};b.a.c("ArrayRowSet.prototype.reset",{reset:b.Z.prototype.reset});b.Z.prototype.size=function(){return this.Vb.length};
b.a.c("ArrayRowSet.prototype.size",{size:b.Z.prototype.size});b.Z.prototype.sort=function(){var a=this.comparator,d;this.Fo()&&(d=this,this.Vb.sort(function(c,f){return b.Z.XN(c,f,a,d,d)}),this.IM(),b.Z.j.nc.call(this,b.t.q.SORT,null))};b.a.c("ArrayRowSet.prototype.sort",{sort:b.Z.prototype.sort});b.Z.prototype.totalSize=o_c("Ue");b.a.c("ArrayRowSet.prototype.totalSize",{totalSize:b.Z.prototype.totalSize});b.Z.prototype.eH=function(a,d,c){var f;c=c||{};var e=c.silent;a instanceof Array||(a=[a]);for(c=
0;c<a.length;c++)f=a[c],f instanceof b.Da||(f=new b.Da(f,{idAttribute:this.rs})),void 0===d?(this.Vb.push(f),f.index=this.Vb.length-1):(this.Vb[d+c]=f,f.index=d+c),f.rowSet=this,e||b.Z.j.nc.call(this,b.t.q.ADD,{rowIdx:f.index,row:f})};b.Z.Qh=function(a,b,c){if(-1===c){if(a<b)return 1;if(b<a)return-1}else{if(a>b)return 1;if(b>a)return-1}return 0};b.Z.jl=function(a,d){return a instanceof b.Va?a.get(d):e.isFunction(a[d])?a[d]():a[d]};b.Z.prototype.fz=function(a,d,c,f){var e=a.length-1;0<f&&(e=c+f-1);
e=null!=e?e>a.length-1?a.length-1:e:a.length;c=[];var g;for(f=0;f<=e;f++){var k={},l=null,l=a[f]instanceof b.Va?a[f].Rc():a[f];for(g in l)l.hasOwnProperty(g)&&(k[g]=l[g]);k=new b.Da(k,{idAttribute:d});k.index=f;c[f]=k}return c};b.Z.prototype.ds=function(a){return void 0===a?[]:a.split(",")};b.Z.prototype.es=function(){return-1===this.sortDirection?"dsc":"asc"};b.Z.prototype.Fo=function(){var a=this.comparator;return void 0!==a&&null!==a};b.Z.prototype.IM=function(){for(var a,b=0;b<this.Vb.length;b++)(a=
this.Vb[b])&&(a.index=b)};b.Z.prototype.oi=function(a,d,c){c=c||{};d=-1==d?this.get(a).index:d;var f=c.silent;-1<d&&(void 0!==a&&a.EQ===this&&(a.EQ=null),this.Vb.splice(d,1),f||(c.index=d,void 0!==a&&b.Z.j.nc.call(this,b.t.q.REMOVE,{rowIdx:d,row:a})));return a};b.Z.XN=function(a,d,c,f,h){var g,k,l;if(e.isFunction(c)){if(1===c.length){g=c.call(h,a);k=c.call(h,d);g=b.pb.Ce(g)?g.split(","):[g];var m=b.pb.Ce(k)?k.split(","):[k];for(l=0;l<g.length;l++)if(k=b.Z.Qh(g[l],m[l],f.sortDirection),0!==k)return k}return c.call(h,
a,d)}if(b.pb.Ce(c))for(c=c.split(","),l=0;l<c.length;l++)if(g=b.Z.jl(a,c[l]),k=b.Z.jl(d,c[l]),k=b.Z.Qh(g,k,f.sortDirection),0!==k)return k;return 0};b.Z.prototype.rt=function(){b.Z.j.nc.call(this,b.t.q.REQUEST,null)};b.Z.prototype.al=function(a){b.Z.j.nc.call(this,b.t.q.SYNC,a)};b.jd=function(a,b){this.hQ=a;this.sc=b};o_("EmptyNodeSet",b.jd,b);b.jd.prototype.getParent=o_c("hQ");b.a.c("EmptyNodeSet.prototype.getParent",{getParent:b.jd.prototype.getParent});b.jd.prototype.Ba=o_c("sc");b.a.c("EmptyNodeSet.prototype.getStart",
{Ba:b.jd.prototype.Ba});b.jd.prototype.W=o_d(0);b.a.c("EmptyNodeSet.prototype.getCount",{W:b.jd.prototype.W});b.jd.prototype.getData=o_d(null);b.a.c("EmptyNodeSet.prototype.getData",{getData:b.jd.prototype.getData});b.jd.prototype.getMetadata=o_d(null);b.a.c("EmptyNodeSet.prototype.getMetadata",{getMetadata:b.jd.prototype.getMetadata});b.Jc=function(a,b,c){this.Qa=a;this.$e=b;this.jk=c};o_("NodeSetWrapper",b.Jc,b);b.Jc.prototype.getParent=function(){return this.Qa.getParent()};b.a.c("NodeSetWrapper.prototype.getParent",
{getParent:b.Jc.prototype.getParent});b.Jc.prototype.Ba=function(){return null!=this.jk?this.jk.start:this.Qa.Ba()};b.a.c("NodeSetWrapper.prototype.getStart",{Ba:b.Jc.prototype.Ba});b.Jc.prototype.W=function(){var a,b;a=this.Qa.Ba();b=this.Qa.W();null!=this.jk&&(this.jk.start>a?b=Math.min(0,b-(this.jk.start-a)):this.jk.start<a&&(b=0));return b};b.a.c("NodeSetWrapper.prototype.getCount",{W:b.Jc.prototype.W});b.Jc.prototype.getData=function(a){return this.Qa.getData(a)};b.a.c("NodeSetWrapper.prototype.getData",
{getData:b.Jc.prototype.getData});b.Jc.prototype.getMetadata=function(a){var b;b=this.Qa.getMetadata(a);b.index=a;b.parentKey=this.getParent();this.$e.call(null,b.key,b);return b};b.a.c("NodeSetWrapper.prototype.getMetadata",{getMetadata:b.Jc.prototype.getMetadata});b.Jc.prototype.bd=function(a){return this.Qa.bd&&(a=this.Qa.bd(a),null!=a)?new b.Jc(a,this.$e):null};b.a.c("NodeSetWrapper.prototype.getChildNodeSet",{bd:b.Jc.prototype.bd});b.Ic=function(a,d,c,f,e){b.f.Gb(a,null);b.f.Gb(d,null);this.IS=
e;this.gQ=f;this.Kp=a;this.yu=d;this.ed=c};o_("JsonNodeSet",b.Ic,b);b.Ic.prototype.getParent=o_c("gQ");b.a.c("JsonNodeSet.prototype.getParent",{getParent:b.Ic.prototype.getParent});b.Ic.prototype.Ba=o_c("Kp");b.a.c("JsonNodeSet.prototype.getStart",{Ba:b.Ic.prototype.Ba});b.Ic.prototype.W=function(){return Math.max(0,this.yu-this.Kp)};b.a.c("JsonNodeSet.prototype.getCount",{W:b.Ic.prototype.W});b.Ic.prototype.getData=function(a){b.f.assert(a<=this.yu&&a>=this.Kp);return this.ed[a]?this.ed[a].attr:
null};b.a.c("JsonNodeSet.prototype.getData",{getData:b.Ic.prototype.getData});b.Ic.prototype.getMetadata=function(a){var d=[];b.f.assert(a<=this.yu&&a>=this.Kp);d.key=this.ed[a].id?this.ed[a].id:this.ed[a].attr.id;d.leaf=this.ed[a].xu;d.depth=this.ed[a].depth;null==d.leaf&&(d.leaf=this.ed[a].children&&0<this.ed[a].children.length?!1:!0);return d};b.a.c("JsonNodeSet.prototype.getMetadata",{getMetadata:b.Ic.prototype.getMetadata});b.Ic.prototype.fg=function(a,b){var c;b++;a.depth=b;if(a.children&&0!=
a.children.length)for(c=0;c<a.children.length;c++)this.fg(a.children[c],b)};b.Ic.prototype.bd=function(a){var d,c,f;c=this.ed[a].depth;d=this.ed[a].children;if(0==d.length)return null;a=this.ed[a].id?this.ed[a].id:this.ed[a].attr.id;for(f=0;f<d.length;f++)this.fg(d[f],c);return new b.Ic(0,d.length,d,a,0)};b.a.c("JsonNodeSet.prototype.getChildNodeSet",{bd:b.Ic.prototype.bd});b.Fc=function(a,b){this.Qa=a;this.sc=b};o_("FlattenedNodeSet",b.Fc,b);b.Fc.prototype.getParent=function(){return this.Qa.getParent()};
b.a.c("FlattenedNodeSet.prototype.getParent",{getParent:b.Fc.prototype.getParent});b.Fc.prototype.Ba=function(){return void 0!=this.sc?this.sc:this.Qa.Ba()};b.a.c("FlattenedNodeSet.prototype.getStart",{Ba:b.Fc.prototype.Ba});b.Fc.prototype.W=function(){void 0===this.Ip&&(this.Ip=this.Ny(this.Qa,0),void 0!=this.sc&&(this.Ip-=this.sc));return this.Ip};b.a.c("FlattenedNodeSet.prototype.getCount",{W:b.Fc.prototype.W});b.Fc.prototype.Ny=function(a,b){var c,f,e,g;c=a.Ba();f=a.W();b+=f;if(a.bd)for(e=0;e<
f;e++)g=a.bd(e+c),null!=g&&(b=this.Ny(g,b));return b};b.Fc.prototype.getData=function(a){return this.Or(this.Qa,a,{index:this.Qa.Ba()},this.Wa)};b.a.c("FlattenedNodeSet.prototype.getData",{getData:b.Fc.prototype.getData});b.Fc.prototype.getMetadata=function(a){return this.Or(this.Qa,a,{index:this.Qa.Ba()},this.IJ)};b.a.c("FlattenedNodeSet.prototype.getMetadata",{getMetadata:b.Fc.prototype.getMetadata});b.Fc.prototype.IJ=function(a,b){return a.getMetadata(b)};b.Fc.prototype.Wa=function(a,b){return a.getData(b)};
b.Fc.prototype.Or=function(a,b,c,f){var e,g,k,l;e=a.Ba();g=a.W();for(k=0;k<g;k++){l=c.index;if(l===b)return f.call(this,a,k+e);c.index=l+1;if(a.bd&&(l=a.bd(k+e),null!=l&&(l=this.Or(l,b,c,f),null!=l)))return l}return null};b.Lb=function(a){b.Lb.j.constructor.call(this,a)};o_("DataGridDataSource",b.Lb,b);b.a.ga(b.Lb,b.Vc,"oj.DataGridDataSource");b.Lb.prototype.W=o_d(0);b.a.c("DataGridDataSource.prototype.getCount",{W:b.Lb.prototype.W});b.Lb.prototype.ze=o_d("exact");b.a.c("DataGridDataSource.prototype.getCountPrecision",
{ze:b.Lb.prototype.ze});b.Lb.prototype.wd=function(){b.f.V()};b.a.c("DataGridDataSource.prototype.fetchHeaders",{wd:b.Lb.prototype.wd});b.Lb.prototype.ud=function(){b.f.V()};b.a.c("DataGridDataSource.prototype.fetchCells",{ud:b.Lb.prototype.ud});b.Lb.prototype.keys=function(){b.f.V();return null};b.a.c("DataGridDataSource.prototype.keys",{keys:b.Lb.prototype.keys});b.Lb.prototype.yd=function(){b.f.V();return null};b.a.c("DataGridDataSource.prototype.indexes",{yd:b.Lb.prototype.yd});b.Lb.prototype.sort=
function(){b.f.V()};b.a.c("DataGridDataSource.prototype.sort",{sort:b.Lb.prototype.sort});b.Lb.prototype.getCapability=o_d(null);b.a.c("DataGridDataSource.prototype.getCapability",{getCapability:b.Lb.prototype.getCapability})});
//# sourceMappingURL=oj-modular.map