define(["ojs/ojcore","jquery"],function(b,e){b.Sc=function(a){this.data=a;this.Init()};o_("DataSource",b.Sc,b);b.a.fa(b.Sc,b.a,"oj.DataSource");b.Sc.prototype.Init=function(){this.wb=[];b.Sc.j.Init.call(this)};b.a.b("DataSource.prototype.Init",{Init:b.Sc.prototype.Init});b.Sc.prototype.on=function(a,b){var c=!1,f;for(f=0;f<this.wb.length;f++)if(this.wb[f].eventType==a&&this.wb[f].eventHandlerFunc==b){c=!0;break}c||this.wb.push({eventType:a,eventHandlerFunc:b})};b.a.b("DataSource.prototype.on",{on:b.Sc.prototype.on});
b.Sc.prototype.off=function(a,b){var c;for(c=this.wb.length-1;0<=c;c--)if(this.wb[c].eventType==a&&this.wb[c].eventHandlerFunc==b){this.wb.splice(c,1);break}};b.a.b("DataSource.prototype.off",{off:b.Sc.prototype.off});b.Sc.prototype.handleEvent=function(a,b){var c;for(c=0;c<this.wb.length;c++){var f=this.wb[c];f.eventType==a&&f.eventHandlerFunc(b)}};b.a.b("DataSource.prototype.handleEvent",{handleEvent:b.Sc.prototype.handleEvent});b.bc=function(a){b.bc.j.constructor.call(this,a)};o_("TreeDataSource",
b.bc,b);b.a.fa(b.bc,b.Sc,"oj.TreeDataSource");b.bc.prototype.we=o_d(-1);b.bc.prototype.sd=function(){b.f.U()};b.a.b("TreeDataSource.prototype.fetchChildren",{sd:b.bc.prototype.sd});b.bc.prototype.dg=function(){b.f.U()};b.a.b("TreeDataSource.prototype.fetchDescendents",{dg:b.bc.prototype.dg});b.bc.prototype.sort=function(){b.f.U()};b.a.b("TreeDataSource.prototype.sort",{sort:b.bc.prototype.sort});b.bc.prototype.Zl=function(){return{key:null,direction:"none"}};b.a.b("TreeDataSource.prototype.getSortCriteria",
{Zl:b.bc.prototype.Zl});b.bc.prototype.move=function(){b.f.U()};b.a.b("TreeDataSource.prototype.move",{move:b.bc.prototype.move});b.bc.prototype.ym=o_d("valid");b.a.b("TreeDataSource.prototype.moveOK",{ym:b.bc.prototype.ym});b.bc.prototype.getCapability=o_d(null);b.a.b("TreeDataSource.prototype.getCapability",{getCapability:b.bc.prototype.getCapability});b.Y=function(a,d){this.dd=a;this.vm=d;b.Y.j.constructor.call(this)};o_("FlattenedTreeDataSource",b.Y,b);b.a.fa(b.Y,b.Sc,"oj.FlattenedTreeDataSource");
b.Y.prototype.Init=function(){var a;b.Y.j.Init.call(this);this.dd.on("change",this.uK.bind(this));this.jg=parseInt(this.vm.fetchSize,10);isNaN(this.jg)&&(this.jg=25);this.kg=parseInt(this.vm.maxCount,10);isNaN(this.kg)&&(this.kg=500);a=this.vm.expanded;Array.isArray(a)?this.ig=a:("all"===a&&(this.Zj=[]),this.ig=[]);this.kh=[]};b.a.b("FlattenedTreeDataSource.prototype.Init",{Init:b.Y.prototype.Init});b.Y.prototype.handleEvent=function(a,d){b.Y.j.handleEvent.call(this,a,d)};b.a.b("FlattenedTreeDataSource.prototype.handleEvent",
{handleEvent:b.Y.prototype.handleEvent});b.Y.prototype.Lm=function(){delete this.kh;delete this.ig;this.dd.off("change");this.dd.Lm&&this.dd.Lm()};b.a.b("FlattenedTreeDataSource.prototype.Destory",{Lm:b.Y.prototype.Lm});b.Y.prototype.ZC=o_c("ig");b.a.b("FlattenedTreeDataSource.prototype.getExpandedKeys",{ZC:b.Y.prototype.ZC});b.Y.prototype.tp=function(a){return null!=this.vm?this.vm[a]:null};b.a.b("FlattenedTreeDataSource.prototype.getOption",{tp:b.Y.prototype.tp});b.Y.prototype.fm=o_c("dd");b.a.b("FlattenedTreeDataSource.prototype.getWrappedDataSource",
{fm:b.Y.prototype.fm});b.Y.prototype.OC=function(a,b){this.Fo()?this.GI(a,b):this.FI(a,b)};b.Y.prototype.FI=function(a,d){var c,f,e,g,k,l;if(a.start>this.yc()){c=this.Nr();if(0>this.yc()){a.count=Math.min(c,a.count);this.dd.sd(null,a,{success:function(b){this.wo(b,null,0,a,0,d)}.bind(this)});return}if(0<c){f=this.Ly();e=f.parent;g=this.dd.we(e);k=f.index;l=f.depth;-1===g||k<g-1?(a.start=k+1,a.count=-1===g?this.jg:Math.min(c,Math.min(this.jg,g-a.start)),this.dd.sd(e,a,{success:function(b){this.wo(b,
e,l,a,g,d)}.bind(this)})):k===g-1?(c=new b.gd(null,a.start),null!=d&&null!=d.success&&d.success.call(null,c)):(c=this.ly(e,l,d,c),c||(c=new b.gd(null,a.start),null!=d&&null!=d.success&&d.success.call(null,c)));return}}this.Wt(a,d)};b.Y.prototype.Nr=function(){return this.kg-(this.yc()+1)};b.Y.prototype.wo=function(a,d,c,f,e,g){var k;k=[];a=new b.Hc(a,this.hm.bind(this),f);this.gM(a,d,c,k);-1===e&&0===a.V()&&null!=d&&0<c?(d=this.ly(d,c,g))||null!=g&&null!=g.success&&g.success.call(null,a):(null!=g&&
null!=g.success&&g.success.call(null,a),this.hy(k))};b.Y.prototype.ly=function(a,b,c,f){var e,g,k,l,m,n,q,r;void 0===f&&(f=this.Nr());this.yz()&&(e={queueOnly:!0});g=this.jg;for(k=this.yc()-1;0<=k;k--)if(l=this.Sd(k),m=l.depth,m<b&&(a=l.parent,n=this.dd.we(a),l=l.index,(q=-1===n)||l<n-1)){r={};r.start=l+1;q?(r.count=Math.min(f,Math.max(0,g)),e=void 0):r.count=Math.min(f,Math.min(g,n-r.start));if(0==r.count)break;this.dd.sd(a,r,{success:function(b){this.wo(b,a,m,r,n,c)}.bind(this)},e);b=m;g=Math.max(0,
g-r.count);if(q||0===m||0===g)break}void 0!=e&&this.dd.sd(a,{start:r.count,count:0},{success:function(b){this.wo(b,a,m,r,n,c)}.bind(this)});return g!=this.jg};b.Y.prototype.gM=function(a,b,c,f){var e,g,k,l;e=a.Ba();g=a.V();for(k=0;k<g;k++)l=a.getMetadata(e+k),l=l.key,this.yn(l,c,e+k,b),this.Go(l)&&f.push(l)};b.Y.prototype.hm=function(a,b){this.Go(a)&&!b.leaf?b.state="expanded":b.state=b.leaf?"leaf":"collapsed"};b.Y.prototype.GI=function(a,b){var c={maxCount:this.kg};0<=this.yc()&&(c.start=this.Sd(this.yc()).key);
this.dd.dg(null,null,{success:function(c){this.eK(c,a,b)}.bind(this)},c)};b.Y.prototype.eK=function(a,d,c){var f,e,g;d.start>this.yc()?(f=this.Nr(),e=Math.min(f,d.count),a=new b.Hc(a,this.hm.bind(this)),0<=this.yc()?(g=this.Ly(),f={index:0,found:!1,count:0},this.Ms(a,null,0,g,e,f),e=f.index+1):(f={count:0},this.Ms(a,null,0,null,e,f),e=0),null!=c&&null!=c.success&&(a=null!=f?0===f.count?new b.gd(null,d.start):new b.Dc(a,e):new b.Dc(a),c.success.call(null,a))):this.Wt(d,c)};b.Y.prototype.Ms=function(a,
b,c,f,e,g){var k,l,m,n,q;k=a.Ba();l=a.V();for(m=0;m<l&&g.count!=e;m++){n=a.getMetadata(k+m);q=n.key;g.checkDepth&&f.depth===c&&(g.found=!0,g.checkDepth=!1);if(null==f||g.found)this.yn(q,c,k+m,b),g.count+=1,n.state=n.leaf?"leaf":"expanded";null==f||g.found||(q===f.key?n.leaf||this.Go(q)?g.found=!0:g.checkDepth=!0:g.index+=1);a.Zc&&(n=a.Zc(m),null!=n&&this.Ms(n,q,c+1,f,e,g))}};b.Y.prototype.expand=function(a){this.Uf(a)};b.a.b("FlattenedTreeDataSource.prototype.expand",{expand:b.Y.prototype.expand});
b.Y.prototype.Uf=function(a){var b,c,f;b=this.dd.we(a);c=Math.min(this.jg,-1==b?this.jg:b);if(this.yc()+1===this.kg&&(f=this.Uj(a),f==this.kg-1))return;0!=c&&(this.dd.sd(a,{start:0,count:c},{success:function(c){this.qP(a,c,b)}.bind(this)},{success:this}),this.handleEvent("expand",{rowKey:a}))};b.Y.prototype.collapse=function(a){var b,c,f,e,g;b=this.Uj(a)+1;c=this.Sd(b-1);f=0;c=c.depth;e=this.yc();for(g=b;g<e+1;g++){var k=this.Sd(g).depth;if(k>c)f+=1;else if(k==c)break}if(0!=f){this.Fo()?this.Zj.push(a):
this.IM(a);e=[];for(c=0;c<f;c++)e.push({key:this.Sd(b+c).key,index:b+c});this.NA(b,f);this.Lp(e);this.handleEvent("collapse",{rowKey:a})}};b.a.b("FlattenedTreeDataSource.prototype.collapse",{collapse:b.Y.prototype.collapse});b.Y.prototype.Go=function(a){return this.Fo()?this.Zj&&0<this.Zj.length?-1===this.wy(a):!0:this.ig&&0<this.ig.length?-1<this.Gy(a):!1};b.Y.prototype.wy=function(a){return this.Ky(this.Zj,a)};b.Y.prototype.Gy=function(a){return this.Ky(this.ig,a)};b.Y.prototype.Ky=function(a,b){var c,
f;f=-1;for(c=0;c<a.length;c++)a[c]===b&&(f=c);return f};b.Y.prototype.IM=function(a){a=this.Gy(a);-1<a&&this.ig.splice(a,1)};b.Y.prototype.FM=function(a){a=this.wy(a);-1<a&&this.Zj.splice(a,1)};b.Y.prototype.qP=function(a,d,c){var f,e,g,k,l,m,n,q,r;d=new b.Hc(d,this.hm.bind(this));e=f=this.Uj(a)+1;g=d.Ba();k=d.V();l=this.Sd(f-1);m=l.depth+1;q=[];for(r=g;r<k;r++)g=d.getMetadata(r),n=g.key,this.Go(n)&&q.push(n),this.wz(f,g,l.key,r,m),f++;this.Fo()?this.FM(a):-1===this.ig.indexOf(a)&&this.ig.push(a);
this.bu(e,a,d);-1===c&&k===this.jg||c>k||f==this.kg?this.ir(f):this.yc()>=this.kg&&this.ir(this.kg);this.hy(q)};b.Y.prototype.hy=function(a){var b,c;this.yz()&&(b={queueOnly:!0});for(c=0;c<a.length;c++)c==a.length-1?this.Uf(a[c]):this.Uf(a[c],b)};b.Y.prototype.wz=function(a,b,c,f,e){b=b.key;a<=this.yc()?this.yn(b,e,f,c,a):this.yn(b,e,f,c)};b.Y.prototype.ir=function(a,b){var c;void 0==b&&(b=this.yc()+1-a);c=[];for(var f=0;f<b;f++)c.push({row:this.Sd(a+f).key});this.NA(a,b);this.Lp(c)};b.Y.prototype.uK=
function(a){var b,c,f;b=a.operation;c=a.parent;c=Array.isArray(c)?c[c.length-1]:c;f=a.index;"insert"===b?this.gK(c,f,a.data):"delete"===b?this.bK(c,f):"refresh"===b&&this.wK(c)};b.Y.prototype.gK=function(a,b,c){var f,e;f=this.Uj(a);e=this.Sd(f).depth+1;f=f+b+1;c=c.getMetadata(c.Ba());this.wz(f,c,a,b,e)};b.Y.prototype.bK=function(a,d){var c,f,e,g,k;c=this.Uj(a);f=this.Sd(c);c+=d;e=this.Sd(c);b.f.assert(e.parent===f&&e.depth===f.depth+1);f=c+1;for(g=this.yc();f<=g;){k=this.Sd(f);if(k.depth!=e.depth)break;
f++}this.ir(c,1)};b.Y.prototype.wK=function(a){null==a&&this.refresh()};b.Y.prototype.Fo=function(){var a=this.dd.getCapability("fetchDescendents");return void 0!=this.Zj&&null!=a&&"disable"!=a};b.Y.prototype.yz=function(){return"enable"===this.dd.getCapability("batchFetch")};b.Y.prototype.refresh=function(){this.yH()};b.Y.prototype.Uj=function(a){var b,c,f;b=this.yc();for(c=0;c<=b;c++)if(f=this.Sd(c),f.key==a)return c;return-1};b.Y.prototype.getKey=function(a){return 0>a||a>this.yc()?null:this.Sd(a).key};
b.Y.prototype.fP=function(){return{start:0,end:this.yc()+1}};b.Y.prototype.Wt=function(a,b){null!=b&&null!=b.error&&b.error.call(null)};b.Y.prototype.bu=function(){b.f.U()};b.Y.prototype.Lp=function(){b.f.U()};b.Y.prototype.yc=function(){return this.kh.length-1};b.Y.prototype.Ly=function(){return this.kh[this.yc()]};b.Y.prototype.Sd=function(a){return this.kh[a]};b.Y.prototype.yn=function(a,b,c,f,e){var g={};g.key=a;g.depth=b;g.index=c;g.parent=f;void 0===e?this.kh.push(g):this.kh.splice(e,0,g)};
b.Y.prototype.NA=function(a,b){this.kh.splice(a,b)};b.Y.prototype.yH=function(){this.kh.length=0};b.Mi=function(){this.id=null;this.depth=0;this.parent=null;this.children=[];this.ju=this.attr=this.title=null};b.Mi.prototype.aH=function(a){return function(b,c){return b.attr&&c.attr&&b.attr[a]&&c.attr[a]?b.attr[a]<c.attr[a]?0:1:b[a]<c[a]?0:1}};b.Mi.prototype.oI=function(a){return function(b,c){return b.attr&&c.attr&&b.attr[a]&&c.attr[a]?b.attr[a]<c.attr[a]?1:0:b[a]<c[a]?1:0}};b.Mi.prototype.IB=function(a){var b=
a.key;"ascending"===a.direction?this.children.sort(this.aH(b)):"descending"===a.direction&&this.children.sort(this.oI(b));for(var b=0,c=this.children.length;b<c;b++)this.children[b].IB(a)};b.Ab=function(a){var d;d=new b.Mi;a.id||(d.id="root");this.data=this.Kx(0,d,a);b.Ab.j.constructor.call(this,d)};o_("JsonTreeDataSource",b.Ab,b);b.a.fa(b.Ab,b.bc,"oj.JsonTreeDataSource");b.Ab.prototype.Init=function(){b.Ab.j.Init.call(this)};b.a.b("JsonTreeDataSource.prototype.Init",{Init:b.Ab.prototype.Init});b.Ab.prototype.Kx=
function(a,d,c,f){var e,g,k,l,m,n,q;f||(f=0);for(l in c)if("children"==l||0==f&&c instanceof Array)for(e=0==f&&c instanceof Array?c:c[l],f++,q=0;q<e.length;q++){k=e[q];g=new b.Mi;k.id||(a++,k.attr?k.attr.id||(k.attr.id="rid_"+a):g.id="rid_"+a);for(m in k)for(n in g)m==n&&"children"!=m&&(g[n]=k[m]),"depth"==n&&(g[n]=f);d.children.push(g);for(n in k)"children"==n&&this.Kx(a,d.children[q],k,f)}return d};b.Ab.prototype.we=function(a){a||(a=this.data.id);a=this.Ug(this.data,a);return a.children?a.children.length:
null};b.a.b("JsonTreeDataSource.prototype.getChildCount",{we:b.Ab.prototype.we});b.Ab.prototype.sd=function(a,d,c){var f,e,g,k,l;g=[];a||(a=this.data.id);k=this.Ug(this.data,a);d||(d=[],d.start=0,d.count=k.children.length);d.count||(d.count=k.children.length);d.start||(d.start=0);f=d.start;e=Math.min(k.children.length,f+d.count);for(d=f;d<e;d+=1)l=new b.Mi,k.children[d].attr&&(l.attr=k.children[d].attr),k.children[d].id&&(l.id=k.children[d].id),k.children[d].depth&&(l.depth=k.children[d].depth),k.children[d].title&&
(l.title=k.children[d].title),k.children[d].parent&&(l.parent=k.children[d].parent),l.ju=0<k.children[d].children.length?!1:!0,g.push(l);a=new b.Gc(f,e,g,a,k.depth);null!=c&&null!=c.success&&c.success.call(null,a)};b.a.b("JsonTreeDataSource.prototype.fetchChildren",{sd:b.Ab.prototype.sd});b.Ab.prototype.dg=function(a,d,c){var f,e,g;e=[];a||(a=this.data.id);g=this.Ug(this.data,a);d||(d=[],d.start=0,d.count=g.children.length);d.count||(d.count=g.children.length);d.start||(d.start=0);f=d.start;for(d=
Math.min(g.children.length,f+d.count);f<d;f+=1)g.children[f].ju=0<g.children[f].children.length?!1:!0,e.push(g.children[f]);a=new b.Gc(0,e.length,e,a,g.depth);null!=c&&null!=c.success&&c.success.call(null,a)};b.a.b("JsonTreeDataSource.prototype.fetchDescendents",{dg:b.Ab.prototype.dg});b.Ab.prototype.move=function(a,b,c,f){var e;e=b;if(!e||e==this.data.id){if("inside"!=c){console.log("Error: root can not be the reference node if position equals to "+c);return}e||(e=this.data.id)}a=this.Ug(null,a);
this.Ug(a,e)?console.log("Error: the node to move contains the reference node as its sub-tree."):(b=this.Ug(null,e),e=this.Sr(e),this.JM(a),"inside"==c?(this.bg(a,a.depth-(b.depth+1)),b.children.push(a)):"before"==c?(this.bg(a,a.depth-b.depth),c=e.children.indexOf(b),-1<c&&(0!=c?e.children.splice(c-1,0,a):e.children.unshift(a))):"after"==c?(this.bg(a,a.depth-b.depth),c=e.children.indexOf(b),-1<c&&e.children.splice(c,0,a)):"first"==c?(this.bg(a,a.depth-b.depth),e.children.unshift(a)):"last"==c&&(this.bg(a,
a.depth-b.depth),e.children.push(a)),null!=f&&null!=f.success&&f.success.call(null,this.data))};b.a.b("JsonTreeDataSource.prototype.move",{move:b.Ab.prototype.move});b.Ab.prototype.sort=function(a,b){var c;c=this.Ug(this.data,this.data.id);c.IB(a);null!=b&&null!=b.success&&b.success.call(null,c)};b.a.b("JsonTreeDataSource.prototype.sort",{sort:b.Ab.prototype.sort});b.Ab.prototype.Sr=function(a,b){var c,f=null;if(a==this.data.id)return null;b||(b=this.data);if(b.children&&0<b.children.length){for(c=
0;c<b.children.length;c++)if(b.children[c].id&&b.children[c].id==a||b.children[c].attr&&b.children[c].attr.id==a)return b;for(c=0;c<b.children.length&&!(f=this.Sr(a,b.children[c]));c++);}return f};b.Ab.prototype.Ug=function(a,b){var c,f=null;a||(a=this.data);if(a.id&&a.id==b||a.attr&&a.attr.id==b)return a;if(null!=a.children)for(c=0;c<a.children.length&&!f;c++)f=a.children[c].id&&a.children[c].id==b||a.children[c].attr&&a.children[c].attr.id==b?a.children[c]:this.Ug(a.children[c],b);return f};b.Ab.prototype.bg=
function(a,b){var c;a.depth-=b;if(a.children&&0!=a.children.length)for(c=0;c<a.children.length;c++)this.bg(a.children[c],b)};b.Ab.prototype.JM=function(a){var b;a.id?b=a.id:a.attr&&(b=a.attr.id);(b=this.Sr(b))||(b=this.data);a=b.children.indexOf(a);-1<a&&b.children.splice(a,1)};b.Ab.prototype.getCapability=function(a){return"fetchDescendents"===a?"enable":"sort"===a?"default":"batchFetch"===a?"disable":null};b.a.b("JsonTreeDataSource.prototype.getCapability",{getCapability:b.Ab.prototype.getCapability});
b.Ua=function(a,d){b.Ua._init(this,a,d,null)};o_("Row",b.Ua,b);b.a.fa(b.Ua,b.a,"Row.Row");b.Ua.prototype.Init=function(){b.Ua.j.Init.call(this)};b.Ua.prototype.attributes={};b.a.b("Row.prototype.attributes",{attributes:b.Ua.prototype.attributes});b.Ua.prototype.context={};b.a.b("Row.prototype.context",{context:b.Ua.prototype.context});b.Ua.prototype.id=null;b.a.b("Row.prototype.id",{id:b.Ua.prototype.id});b.Ua.prototype.$d=null;b.a.b("Row.prototype.idAttribute",{$d:b.Ua.prototype.$d});b.Ua._init=
function(a,b,c,f){b=null;a.Init();a.index=-1;c=c||{};a.attributes={};for(b in f)f.hasOwnProperty(b)&&(a[b]=f[b]);a.rowSet=c.rowSet;a.context=c.context};b.Ua.prototype.clone=function(){b.f.U();return null};b.a.b("Row.prototype.clone",{clone:b.Ua.prototype.clone});b.Ua.prototype.get=function(){b.f.U();return null};b.a.b("Row.prototype.get",{get:b.Ua.prototype.get});b.Ua.prototype.set=function(){b.f.U();return null};b.a.b("Row.prototype.set",{set:b.Ua.prototype.set});b.Ua.prototype.keys=function(){b.f.U();
return null};b.a.b("Row.prototype.keys",{keys:b.Ua.prototype.keys});b.Ua.prototype.He=function(){b.f.U();return null};b.a.b("Row.prototype.values",{He:b.Ua.prototype.He});b.Ua.prototype.Oc=function(){b.f.U();return null};b.a.b("Row.prototype.pairs",{Oc:b.Ua.prototype.Oc});b.t=function(a,d){b.t._init(this,a,d,null)};o_("RowSet",b.t,b);b.t.prototype.ue=null;b.a.b("RowSet.prototype.comparator",{ue:b.t.prototype.ue});b.t.prototype.df=!0;b.a.b("RowSet.prototype.sortSupported",{df:b.t.prototype.df});b.a.fa(b.t,
b.a,"RowSet.RowSet");b.t.prototype.Init=function(){b.t.j.Init.call(this)};b.t._init=function(a,b,c,f){var e;a.wb=[];a.Init();if(f)for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e])};b.t.prototype.at=function(){b.f.U();return null};b.a.b("RowSet.prototype.at",{at:b.t.prototype.at});b.t.prototype.fetch=function(){b.f.U()};b.a.b("RowSet.prototype.fetch",{fetch:b.t.prototype.fetch});b.t.prototype.get=function(){b.f.U();return null};b.a.b("RowSet.prototype.get",{get:b.t.prototype.get});b.t.prototype.hasMore=
function(){b.f.U();return!1};b.a.b("RowSet.prototype.hasMore",{hasMore:b.t.prototype.hasMore});b.t.prototype.indexOf=function(){b.f.U();return 0};b.a.b("RowSet.prototype.indexOf",{indexOf:b.t.prototype.indexOf});b.t.prototype.isEmpty=function(){b.f.U();return!0};b.a.b("RowSet.prototype.isEmpty",{isEmpty:b.t.prototype.isEmpty});b.t.prototype.size=function(){b.f.U();return 0};b.a.b("RowSet.prototype.size",{size:b.t.prototype.size});b.t.prototype.sort=function(){b.f.U()};b.a.b("RowSet.prototype.sort",
{sort:b.t.prototype.sort});b.t.prototype.totalSize=function(){b.f.U();return 0};b.a.b("RowSet.prototype.totalSize",{totalSize:b.t.prototype.totalSize});b.t.prototype.on=function(a,b){var c=!1,f;for(f=0;f<this.wb.length;f++)if(this.wb[f].eventType==a&&this.wb[f].eventHandlerFunc==b){c=!0;break}c||this.wb.push({eventType:a,eventHandlerFunc:b})};b.a.b("RowSet.prototype.on",{on:b.t.prototype.on});b.t.prototype.off=function(a,b){var c;for(c=0;c<this.wb.length;c++)if(this.wb[c].eventType==a&&this.wb[c].eventHandlerFunc==
b){this.wb.remove(this.wb[c]);break}};b.a.b("RowSet.prototype.off",{off:b.t.prototype.off});b.t.prototype.nc=function(a,b){var c;for(c=0;c<this.wb.length;c++){var f=this.wb[c];f.eventType==a&&f.eventHandlerFunc(b)}};o_("RowSet.prototype._handleEvent",b.t.prototype.nc,b);b.t.l={ADD:"add",REMOVE:"remove",RESET:"reset",SORT:"sort",CHANGE:"change",DESTROY:"destroy",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",ALL:"all"};o_("RowSet.EventType",b.t.l,b);b.t.lG={EQ:"added",KQ:"deleted",UQ:"updated",
RQ:"none"};o_("RowSet._ROW_STATUSES",b.t.lG,b);b.Ca=function(a,d){b.Ca._init(this,a,d,null)};o_("ArrayRow",b.Ca,b);b.a.fa(b.Ca,b.Ua,"ArrayRow.ArrayRow");b.Ca.prototype.Init=function(){b.Ca.j.Init.call(this)};b.Ca.prototype.attributes={};b.a.b("ArrayRow.prototype.attributes",{attributes:b.Ca.prototype.attributes});b.Ca.prototype.id=null;b.a.b("ArrayRow.prototype.id",{id:b.Ca.prototype.id});b.Ca.prototype.$d=null;b.a.b("ArrayRow.prototype.idAttribute",{$d:b.Ca.prototype.$d});b.Ca._init=function(a,b,
c,f){var e=null;a.Init();a.index=-1;c=c||{};a.attributes=b;for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);a.idAttribute=c.idAttribute;a.context=c.context;a.ct()};b.Ca.prototype.clone=function(){var a=new this.constructor,d;for(d in this)this.hasOwnProperty(d)&&this[d]!==this.attributes&&(a[d]=this[d]);a.attributes=b.Ca.Cg(this.attributes,null);a.ct();return a};b.a.b("ArrayRow.prototype.clone",{clone:b.Ca.prototype.clone});b.Ca.prototype.get=function(a){return this.attributes[a]};b.a.b("ArrayRow.prototype.get",
{get:b.Ca.prototype.get});b.Ca.prototype.set=function(a,d,c){var f={},e=!1;if(arguments&&0<arguments.length)if(1<arguments.length&&arguments[arguments.length-1]&&(e=!0,f=arguments[arguments.length-1]||{}),b.Ca.Xh(a))this.Dj(a,f);else for(f=0;f<arguments.length;f+=2)(void 0!==arguments[f]||f<arguments.length-1||!e&&f===arguments.length-1)&&this.Dj(arguments[f],arguments[f+1]);return this};b.a.b("ArrayRow.prototype.set",{set:b.Ca.prototype.set});b.Ca.prototype.keys=function(){var a,b=[];for(a in this.attributes)this.attributes.hasOwnProperty(a)&&
b.push(a);return b};b.a.b("ArrayRow.prototype.keys",{keys:b.Ca.prototype.keys});b.Ca.prototype.He=function(){var a,b=[];for(a in this.attributes)this.attributes.hasOwnProperty(a)&&b.push(this.get(a));return b};b.a.b("ArrayRow.prototype.values",{He:b.Ca.prototype.He});b.Ca.prototype.Oc=function(){var a,b={};for(a in this.attributes)this.attributes.hasOwnProperty(a)&&(b[a]=this.get(a));return b};b.a.b("ArrayRow.prototype.pairs",{Oc:b.Ca.prototype.Oc});b.Ca.prototype.Kr=function(){return this.idAttribute||
"id"};b.Ca.prototype.ro=function(a){return this[a]instanceof Function?this[a]():this[a]};b.Ca.Xh=function(a){var b;if(a&&a instanceof Object)for(b in a)if(a.hasOwnProperty(b))return!0;return!1};b.Ca.prototype.ct=function(){this.id=this.attributes[this.Kr()]};b.Ca.prototype.$s=function(a,d){return b.a.vi(this.attributes[a],d)?!1:(this.attributes[a]=d,this.ct(),!0)};b.Ca.prototype.Dj=function(a,b){if(null==a)return!0;var c={},f;if(1<arguments.length)c[a]=b;else for(f in a)a.hasOwnProperty(f)&&(c[f]=
a[f]);for(f in c)c.hasOwnProperty(f)&&this.$s(f,c[f]);return!0};b.Ca.Cg=function(a,d){var c;d=d||{};for(c in a)a.hasOwnProperty(c)&&("object"!==typeof a[c]?d.hasOwnProperty(c)?void 0!==a[c]&&(d[c]=a[c]):d[c]=a[c]:d[c]=b.Ca.Cg(a[c],null));return d};b.Z=function(a,d){b.Z._init(this,a,d,null)};o_("ArrayRowSet",b.Z,b);b.Z.prototype.ue=null;b.a.b("ArrayRowSet.prototype.comparator",{ue:b.Z.prototype.ue});b.Z.prototype.df=!0;b.a.b("ArrayRowSet.prototype.sortSupported",{df:b.Z.prototype.df});b.a.fa(b.Z,b.t,
"ArrayRowSet.ArrayRowSet");b.Z.prototype.Init=function(){b.Z.j.Init.call(this)};b.Z._init=function(a,b,c,f){var e;a.wb=[];a.S=0;a.Init();if(f)for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);c=c||{};a.Ub=[];null!=b&&void 0!==b&&(a.c=b instanceof Array?b:b(),b instanceof Array||b.subscribe(function(b){b=a.Uy(b,null,null);a.reset(b)},null,"change"),a.Ue=a.c.length,a.gs="id",null!=c&&null!=c.idAttribute&&(a.gs=c.idAttribute))};b.Z.prototype.add=function(a,b){b=b||{};var c=b.deferred;this.SG(a,b.at,b);return c?
e.Deferred().resolve().promise():null};b.a.b("ArrayRowSet.prototype.add",{add:b.Z.prototype.add});b.Z.prototype.at=function(a,b){b=b||{};if(0>a||a>=this.Ub.length)return null;var c=this.Ub[a];return b.deferred?e.Deferred().resolve(c).promise():c};b.a.b("ArrayRowSet.prototype.at",{at:b.Z.prototype.at});b.Z.prototype.clone=function(){var a=new this.constructor,b,c;for(b=0;b<this.Ub.length;b+=1)(c=this.at(b,null))&&a.add(c.clone(),{at:b});return a};b.a.b("ArrayRowSet.prototype.clone",{clone:b.Z.prototype.clone});
b.Z.prototype.fetch=function(a){a=a||{};this.ft();var b=0<a.pageSize?a.pageSize:-1;this.S=null!=a?null!=a.startIndex?a.startIndex:0:0;this.Ub=this.Uy(this.c,this.gs,this.S,b);this.Pk(!0)};b.a.b("ArrayRowSet.prototype.fetch",{fetch:b.Z.prototype.fetch});b.Z.prototype.get=function(a,b){b=b||{};var c=b.deferred,f,h=null;for(f=0;f<this.Ub.length;f+=1)if(h=this.Ub[f],void 0!==h&&h.id==a){if(c)return e.Deferred().resolve(h);break}return h};b.a.b("ArrayRowSet.prototype.get",{get:b.Z.prototype.get});b.Z.prototype.hasMore=
o_d(!1);b.a.b("ArrayRowSet.prototype.hasMore",{hasMore:b.Z.prototype.hasMore});b.Z.prototype.indexOf=function(a,b){b=b||{};return b.deferred?this.get(a.id,null).then(function(a){return a.index}):this.get(a.id).index};b.a.b("ArrayRowSet.prototype.indexOf",{indexOf:b.Z.prototype.indexOf});b.Z.prototype.isEmpty=function(){return 0===this.Ub.length};b.a.b("ArrayRowSet.prototype.isEmpty",{isEmpty:b.Z.prototype.isEmpty});b.Z.prototype.remove=function(a,b){b=b||{};this.hi(a,-1,b)};b.a.b("ArrayRowSet.prototype.remove",
{remove:b.Z.prototype.remove});b.Z.prototype.reset=function(a,d){var c;d=d||{};d.previousRows=this.Ub;d.silent=!0;if(void 0===a||null==a||a instanceof Array&&0==a.length){for(c=0;c<this.Ub.length;c+=1)this.Ub[c]&&(this.Ub[c].rowSet=null);this.Ub=[]}else if(this.Ub=[],a instanceof Array)for(c=0;c<a.length;c+=1)this.add(a[c],d);else this.add(a,d);b.Z.j.nc.call(this,b.t.l.RESET,null)};b.a.b("ArrayRowSet.prototype.reset",{reset:b.Z.prototype.reset});b.Z.prototype.size=function(){return this.Ub.length};
b.a.b("ArrayRowSet.prototype.size",{size:b.Z.prototype.size});b.Z.prototype.sort=function(){var a=this.comparator,d;this.yo()&&(d=this,this.Ub.sort(function(c,f){return b.Z.DN(c,f,a,d,d)}),this.pM(),b.Z.j.nc.call(this,b.t.l.SORT,null))};b.a.b("ArrayRowSet.prototype.sort",{sort:b.Z.prototype.sort});b.Z.prototype.totalSize=o_c("Ue");b.a.b("ArrayRowSet.prototype.totalSize",{totalSize:b.Z.prototype.totalSize});b.Z.prototype.SG=function(a,d,c){var f;c=c||{};var e=c.silent;a instanceof Array||(a=[a]);for(c=
0;c<a.length;c++)f=a[c],f instanceof b.Ca||(f=new b.Ca(f,{idAttribute:this.gs})),void 0===d?(this.Ub.push(f),f.index=this.Ub.length-1):(this.Ub[d+c]=f,f.index=d+c),f.rowSet=this,e||b.Z.j.nc.call(this,b.t.l.ADD,{rowIdx:f.index,row:f})};b.Z.Jh=function(a,b,c){if(-1===c){if(a<b)return 1;if(b<a)return-1}else{if(a>b)return 1;if(b>a)return-1}return 0};b.Z.Yk=function(a,d){return a instanceof b.Ua?a.get(d):e.isFunction(a[d])?a[d]():a[d]};b.Z.prototype.Uy=function(a,d,c,f){var e=a.length-1;0<f&&(e=c+f-1);
e=null!=e?e>a.length-1?a.length-1:e:a.length;c=[];var g;for(f=0;f<=e;f++){var k=[],l=null,l=a[f]instanceof b.Ua?a[f].Oc():a[f];for(g in l)l.hasOwnProperty(g)&&(k[g]=l[g]);k=new b.Ca(k,{idAttribute:d});k.index=f;c[f]=k}return c};b.Z.prototype.Ur=function(a){return void 0===a?[]:a.split(",")};b.Z.prototype.Vr=function(){return-1===this.sortDirection?"dsc":"asc"};b.Z.prototype.yo=function(){var a=this.comparator;return void 0!==a&&null!==a};b.Z.prototype.pM=function(){for(var a,b=0;b<this.Ub.length;b++)(a=
this.Ub[b])&&(a.index=b)};b.Z.prototype.hi=function(a,d,c){c=c||{};d=-1==d?this.get(a).index:d;var f=c.silent;-1<d&&(void 0!==a&&a.jQ===this&&(a.jQ=null),this.Ub.splice(d,1),f||(c.index=d,void 0!==a&&b.Z.j.nc.call(this,b.t.l.REMOVE,{rowIdx:d,row:a})));return a};b.Z.DN=function(a,d,c,f,h){var g,k,l;if(e.isFunction(c)){if(1===c.length){g=c.call(h,a);k=c.call(h,d);g=b.nb.Ae(g)?g.split(","):[g];var m=b.nb.Ae(k)?k.split(","):[k];for(l=0;l<g.length;l++)if(k=b.Z.Jh(g[l],m[l],f.sortDirection),0!==k)return k}return c.call(h,
a,d)}if(b.nb.Ae(c))for(c=c.split(","),l=0;l<c.length;l++)if(g=b.Z.Yk(a,c[l]),k=b.Z.Yk(d,c[l]),k=b.Z.Jh(g,k,f.sortDirection),0!==k)return k;return 0};b.Z.prototype.ft=function(){b.Z.j.nc.call(this,b.t.l.REQUEST,null)};b.Z.prototype.Pk=function(a){b.Z.j.nc.call(this,b.t.l.SYNC,a)};b.gd=function(a,b){this.NP=a;this.sc=b};o_("EmptyNodeSet",b.gd,b);b.gd.prototype.getParent=o_c("NP");b.a.b("EmptyNodeSet.prototype.getParent",{getParent:b.gd.prototype.getParent});b.gd.prototype.Ba=o_c("sc");b.a.b("EmptyNodeSet.prototype.getStart",
{Ba:b.gd.prototype.Ba});b.gd.prototype.V=o_d(0);b.a.b("EmptyNodeSet.prototype.getCount",{V:b.gd.prototype.V});b.gd.prototype.getData=o_d(null);b.a.b("EmptyNodeSet.prototype.getData",{getData:b.gd.prototype.getData});b.gd.prototype.getMetadata=o_d(null);b.a.b("EmptyNodeSet.prototype.getMetadata",{getMetadata:b.gd.prototype.getMetadata});b.Hc=function(a,b,c){this.Pa=a;this.$e=b;this.$j=c};o_("NodeSetWrapper",b.Hc,b);b.Hc.prototype.getParent=function(){return this.Pa.getParent()};b.a.b("NodeSetWrapper.prototype.getParent",
{getParent:b.Hc.prototype.getParent});b.Hc.prototype.Ba=function(){return null!=this.$j?this.$j.start:this.Pa.Ba()};b.a.b("NodeSetWrapper.prototype.getStart",{Ba:b.Hc.prototype.Ba});b.Hc.prototype.V=function(){var a,b;a=this.Pa.Ba();b=this.Pa.V();null!=this.$j&&(this.$j.start>a?b=Math.min(0,b-(this.$j.start-a)):this.$j.start<a&&(b=0));return b};b.a.b("NodeSetWrapper.prototype.getCount",{V:b.Hc.prototype.V});b.Hc.prototype.getData=function(a){return this.Pa.getData(a)};b.a.b("NodeSetWrapper.prototype.getData",
{getData:b.Hc.prototype.getData});b.Hc.prototype.getMetadata=function(a){var b;b=this.Pa.getMetadata(a);b.index=a;b.parentKey=this.getParent();this.$e.call(null,b.key,b);return b};b.a.b("NodeSetWrapper.prototype.getMetadata",{getMetadata:b.Hc.prototype.getMetadata});b.Hc.prototype.Zc=function(a){return this.Pa.Zc&&(a=this.Pa.Zc(a),null!=a)?new b.Hc(a,this.$e):null};b.a.b("NodeSetWrapper.prototype.getChildNodeSet",{Zc:b.Hc.prototype.Zc});b.Gc=function(a,d,c,f,e){b.f.Eb(a,null);b.f.Eb(d,null);this.pS=
e;this.MP=f;this.Cp=a;this.ku=d;this.cd=c};o_("JsonNodeSet",b.Gc,b);b.Gc.prototype.getParent=o_c("MP");b.a.b("JsonNodeSet.prototype.getParent",{getParent:b.Gc.prototype.getParent});b.Gc.prototype.Ba=o_c("Cp");b.a.b("JsonNodeSet.prototype.getStart",{Ba:b.Gc.prototype.Ba});b.Gc.prototype.V=function(){return Math.max(0,this.ku-this.Cp)};b.a.b("JsonNodeSet.prototype.getCount",{V:b.Gc.prototype.V});b.Gc.prototype.getData=function(a){b.f.assert(a<=this.ku&&a>=this.Cp);return this.cd[a]?this.cd[a].attr:
null};b.a.b("JsonNodeSet.prototype.getData",{getData:b.Gc.prototype.getData});b.Gc.prototype.getMetadata=function(a){var d=[];b.f.assert(a<=this.ku&&a>=this.Cp);d.key=this.cd[a].id?this.cd[a].id:this.cd[a].attr.id;d.leaf=this.cd[a].ju;d.depth=this.cd[a].depth;null==d.leaf&&(d.leaf=this.cd[a].children&&0<this.cd[a].children.length?!1:!0);return d};b.a.b("JsonNodeSet.prototype.getMetadata",{getMetadata:b.Gc.prototype.getMetadata});b.Gc.prototype.bg=function(a,b){var c;b++;a.depth=b;if(a.children&&0!=
a.children.length)for(c=0;c<a.children.length;c++)this.bg(a.children[c],b)};b.Gc.prototype.Zc=function(a){var d,c,f;c=this.cd[a].depth;d=this.cd[a].children;if(0==d.length)return null;a=this.cd[a].id?this.cd[a].id:this.cd[a].attr.id;for(f=0;f<d.length;f++)this.bg(d[f],c);return new b.Gc(0,d.length,d,a,0)};b.a.b("JsonNodeSet.prototype.getChildNodeSet",{Zc:b.Gc.prototype.Zc});b.Dc=function(a,b){this.Pa=a;this.sc=b};o_("FlattenedNodeSet",b.Dc,b);b.Dc.prototype.getParent=function(){return this.Pa.getParent()};
b.a.b("FlattenedNodeSet.prototype.getParent",{getParent:b.Dc.prototype.getParent});b.Dc.prototype.Ba=function(){return void 0!=this.sc?this.sc:this.Pa.Ba()};b.a.b("FlattenedNodeSet.prototype.getStart",{Ba:b.Dc.prototype.Ba});b.Dc.prototype.V=function(){void 0===this.Ap&&(this.Ap=this.By(this.Pa,0),void 0!=this.sc&&(this.Ap-=this.sc));return this.Ap};b.a.b("FlattenedNodeSet.prototype.getCount",{V:b.Dc.prototype.V});b.Dc.prototype.By=function(a,b){var c,f,e,g;c=a.Ba();f=a.V();b+=f;if(a.Zc)for(e=0;e<
f;e++)g=a.Zc(e+c),null!=g&&(b=this.By(g,b));return b};b.Dc.prototype.getData=function(a){return this.Er(this.Pa,a,{index:this.Pa.Ba()},this.Va)};b.a.b("FlattenedNodeSet.prototype.getData",{getData:b.Dc.prototype.getData});b.Dc.prototype.getMetadata=function(a){return this.Er(this.Pa,a,{index:this.Pa.Ba()},this.rJ)};b.a.b("FlattenedNodeSet.prototype.getMetadata",{getMetadata:b.Dc.prototype.getMetadata});b.Dc.prototype.rJ=function(a,b){return a.getMetadata(b)};b.Dc.prototype.Va=function(a,b){return a.getData(b)};
b.Dc.prototype.Er=function(a,b,c,f){var e,g,k,l;e=a.Ba();g=a.V();for(k=0;k<g;k++){l=c.index;if(l===b)return f.call(this,a,k+e);c.index=l+1;if(a.Zc&&(l=a.Zc(k+e),null!=l&&(l=this.Er(l,b,c,f),null!=l)))return l}return null};b.Kb=function(a){b.Kb.j.constructor.call(this,a)};o_("DataGridDataSource",b.Kb,b);b.a.fa(b.Kb,b.Sc,"oj.DataGridDataSource");b.Kb.prototype.V=o_d(0);b.a.b("DataGridDataSource.prototype.getCount",{V:b.Kb.prototype.V});b.Kb.prototype.xe=o_d("exact");b.a.b("DataGridDataSource.prototype.getCountPrecision",
{xe:b.Kb.prototype.xe});b.Kb.prototype.td=function(){b.f.U()};b.a.b("DataGridDataSource.prototype.fetchHeaders",{td:b.Kb.prototype.td});b.Kb.prototype.rd=function(){b.f.U()};b.a.b("DataGridDataSource.prototype.fetchCells",{rd:b.Kb.prototype.rd});b.Kb.prototype.keys=function(){b.f.U();return null};b.a.b("DataGridDataSource.prototype.keys",{keys:b.Kb.prototype.keys});b.Kb.prototype.vd=function(){b.f.U();return null};b.a.b("DataGridDataSource.prototype.indexes",{vd:b.Kb.prototype.vd});b.Kb.prototype.sort=
function(){b.f.U()};b.a.b("DataGridDataSource.prototype.sort",{sort:b.Kb.prototype.sort});b.Kb.prototype.getCapability=o_d(null);b.a.b("DataGridDataSource.prototype.getCapability",{getCapability:b.Kb.prototype.getCapability})});
//# sourceMappingURL=oj-modular.map