define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojcollapsible"],function(b,e){(function(){b.ta("oj.ojAccordion",e.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{multiple:!1,beforeExpand:null,afterExpand:null,beforeCollapse:null,afterCollapse:null},Kc:function(){this._super();this.element.addClass("oj-accordion oj-component").attr("role","group");this.Ob()},eg:function(a,b){a.show(b,{launcher:this.element.find(".oj-collapsible-header-icon").first(),focus:"menu"})},_destroy:function(){this.element.removeClass("oj-accordion oj-component").removeAttr("role");
this.element.children().removeClass("oj-accordion-collapsible");this.element.children(".oj-accordion-created").removeClass("oj-accordion-created").ojCollapsible("destroy")},_setOption:function(a,b){"multiple"===a&&!1==b&&!0==this.options.multiple&&this.Wj.not(".oj-collapsible-collapsed").first().siblings(".oj-collapsible").trigger("ojcollapse");this._super(a,b);"disabled"===a&&((b=!!b)&&this.Wj.each(function(){null==e(this).ojCollapsible("option",a)&&e(this).ojCollapsible("option",a,b)}),this.element.toggleClass("oj-disabled",
b))},refresh:function(){this._super();this.Ob()},Ob:function(){this.VL();this._setOption("disabled",this.options.disabled);this.ti()},VL:function(){this.element.children(":oj-collapsible").each(function(){e(this).ojCollapsible("option","clickable","header")});this.Wj=this.element.children().not(":oj-ojCollapsible").ojCollapsible({pS:"header"}).addClass("oj-accordion-created").end().addClass("oj-accordion-collapsible")},ti:function(){var a={keydown:this.ii,ojbeforeexpand:this.yH,ojafterexpand:this.WI,
ojbeforecollapse:this.xH,ojaftercollapse:this.YH};this._off(this.Wj);this._on(this.Wj,a)},ii:function(a){if(!a.altKey&&!a.ctrlKey&&(e(a.target).hasClass("oj-collapsible-header")||e(a.target).hasClass("oj-collapsible-header-icon"))){var b=e.ui.keyCode,c=this.Wj.not(".oj-disabled"),f=c.length,h=e(a.target).closest(".oj-collapsible"),g=c.index(h),k=!1;if(0<=g)switch(a.keyCode){case b.RIGHT:case b.DOWN:k=c[(g+1)%f];break;case b.LEFT:case b.UP:k=c[(g-1+f)%f];break;case b.HOME:k=c[0];break;case b.END:k=
c[f-1]}k&&(h&&e(h).trigger("ojfocusout"),e(k).trigger("ojfocus"),a.preventDefault())}},By:function(a){return!this.options.multiple&&(a=e(a.target).closest(".oj-collapsible"),a.parent().is(":oj-ojAccordion"))?a.siblings(".oj-collapsible:not(.oj-collapsible-collapsed)").map(function(){return e(this).data("oj-ojCollapsible")}):e()},yH:function(a){var b,c=this,e;this.By(a).each(function(){e=c.fi(a,this.element);return b=this._trigger("beforeCollapse",a,{newCollapsible:e.oldCollapsible,oldCollapsible:e.newCollapsible})});
e||(e=c.fi(a,null));this._trigger("beforeExpand",a,e);return b},WI:function(a,b){var c,e=this;this.By(a).each(function(){this.collapse(!1,a,b);c=e.fi(a,this.element)});c||(c=e.fi(a,null));this._trigger("afterExpand",a,c)},xH:function(a,b){var c;c=b.newCollapsible?b:this.fi(a,null);return this._trigger("beforeCollapse",a,c)},YH:function(a,b){var c;if(b.newCollapsible)c=b;else{if(a.originalEvent&&a.originalEvent.target){var f=e(a.originalEvent.target);f.hasClass("oj-collapsible")&&(c=this.fi(a,f))}c||
(c=this.fi(a,null))}this._trigger("afterCollapse",a,c)},fi:function(a,b){return{oldCollapsible:b,newCollapsible:e(a.target)}},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;var b=a.subId;a=this.Wj[a.index];switch(b){case "oj-accordion-content":b="oj-collapsible-content";break;case "oj-accordion-header":b="oj-collapsible-header";break;case "oj-accordion-header-icon":b="oj-collapsible-header-icon";break;case "oj-accordion-collapsible":return a;default:return null}return e(a).ojCollapsible("getNodeBySubId",
{XS:b})}})})()});
//# sourceMappingURL=oj-modular.map