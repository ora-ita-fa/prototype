define(["ojs/ojcore","knockout","ojs/ojmodel"],function(a,e){a.oa=o_a();o_("KnockoutUtils",a.oa,a);a.oa.Gr="oj._internalObj";a.oa.gd="oj._underUpdate";a.oa.yi="oj.collectionUpdating";a.oa.map=function(d,b,c){function f(b){return function(c){h[a.oa.gd]||d.set(b,c)}}var h,g,l,k;if(d instanceof a.g){h=c?e.observableArray():[];a.oa.Uy(h,d);for(g=0;g<d.cc();g+=1)h.push(a.oa.map(d.Ql(g,null,!0,!1),b));g=function(b){var c;try{if(!h[a.oa.gd]){h[a.oa.yi]=!0;for(c=0;c<b.length;c++){var e=b[c].index,f=a.oa.da(b[c].value),
g=b[c].status;"added"===g?e>=d.length-1?d.add(f):d.add(f,{at:e}):"deleted"===g&&d.Xg(f,e)}d.comparator&&(h[a.oa.gd]=!0,h.sort(function(b,c){return a.g.ko(b,c,d.comparator,d,this)}),h[a.oa.gd]=!1)}}catch(k){throw k;}finally{h[a.oa.yi]=!1}};c&&h.subscribe&&h.subscribe(g,null,"arrayChange");c=function(b,c,d){var e;try{!h[a.oa.yi]&&c instanceof a.g&&(h[a.oa.gd]=!0,e=d.index,h.splice(e,1))}catch(f){throw f;}finally{h[a.oa.gd]=!1}};g=function(c,d,e){var f,g;try{if(!h[a.oa.yi]&&d instanceof a.g&&(h[a.oa.gd]=
!0,f=d.RH(c),void 0!==f&&-1<f))if(g=a.oa.map(c,b),e.fillIn){for(var k=Array.isArray(h)?h.length:h().length;k<f;k++)h.splice(k,0,a.oa.map(d.Ql(k,null,!0,!1),b));h.splice(f,1,g)}else h.splice(f,0,g)}catch(l){throw l;}finally{h[a.oa.gd]=!1}};l=function(b){try{!h[a.oa.yi]&&b instanceof a.g&&(h[a.oa.gd]=!0,e.isObservable(h)?h.removeAll():h=[])}catch(c){throw c;}finally{h[a.oa.gd]=!1}};k=function(b){try{!h[a.oa.yi]&&b instanceof a.g&&(h[a.oa.gd]=!0,h.sort(function(c,e){return a.g.ko(c,e,d.comparator,b,
this)}))}catch(c){throw c;}finally{h[a.oa.gd]=!1}};d.Ue(a.L.t.ADD,g,void 0,void 0,!0);d.Ue(a.L.t.REMOVE,c,void 0,void 0,!0);d.Ue(a.L.t.RESET,l,void 0,void 0,!0);d.Ue(a.L.t.SORT,k,void 0,void 0,!0)}else{if(void 0===d)return;h={};c=d.attributes;g=null;for(g in c)c.hasOwnProperty(g)&&(l=e.observable(d.get(g)),h[g]=l,k=f(g),k.LM=g,l.subscribe&&l.subscribe(k));c=function(b){var c,d;try{for(d in h[a.oa.gd]=!0,c=b.gr(),c)if(c.hasOwnProperty(d))h[d](b.get(d))}catch(e){throw e;}finally{h[a.oa.gd]=!1}};d.Ue(a.L.t.CHANGE,
c,void 0,void 0,!0);a.oa.Uy(h,d);b&&b(h)}return h};o_("KnockoutUtils.map",a.oa.map,a);a.oa.wc=function(d){var b=[],c,e;for(c=0;c<d.length;c+=1)e=a.oa.da(d[c]),b.push(e);return b};a.oa.da=function(d){return d instanceof a.h?d:d[a.oa.Gr]};a.oa.Uy=function(d,b){try{Object.defineProperty(d,a.oa.Gr,{value:b,enumerable:!1})}catch(c){d[a.oa.Gr]=b}}});
//# sourceMappingURL=oj-modular.map