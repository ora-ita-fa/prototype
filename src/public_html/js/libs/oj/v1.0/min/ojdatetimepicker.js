define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojcomponents","ojs/ojvalidation"],function(a,e){function d(b){return b.delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-calendar td a","mouseout",function(){e(this).removeClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-calendar td a",
"mouseover",function(){e(this).addClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-calendar td a","focus",function(){e(this).addClass("oj-focus")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-calendar td a",
"blur",function(){e(this).removeClass("oj-focus")})}var b=a.R.dh(a.Qe.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"});a.ga("oj.ojInputDate",e.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",ML:"oj-datepicker-append",$i:"oj-datepicker-trigger",xB:"oj-datepicker-calendar-icon",ms:"oj-datepicker-current-day",bo:"oj-datepicker-days-cell-over",Gs:"oj-datepicker-unselectable",ns:"oj-datepicker-desc",rs:"oj-datepicker-grid",zs:"oj-datepicker-div",il:"oj-inputdate-input-description",el:"oj-inputdate-input",
Ui:"oj-has-trigger",fo:"oj-datepicker-inline",pl:"oj-inputdate oj-widget",Vi:"oj-inputdate-input-container",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],options:{dayMetaData:null,showOn:"image",changeMonth:"select",changeYear:"select",yearRange:"c-10:c+10",daysOutsideMonth:"hidden",weekDisplay:"none",calculateWeek:function(b){var a=new Date(b.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},min:null,max:null,
numberOfMonths:1,currentMonthPos:0,stepMonths:"block",stepBigMonths:12,buttonPanel:"none",converter:a.R.dh(a.Qe.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit"}),close:null},getNodeBySubId:function(b){var a=this._superApply(arguments);if(a)return a;var a=b.subId,d=this.Ha;if(a)switch(a){case "oj-datepicker-content":return d;case "oj-datepicker-calendar-icon":return e(".oj-datepicker-calendar-icon",this.ge);case "oj-datepicker-prev-icon":return e(".oj-datepicker-prev-icon",
d);case "oj-datepicker-next-icon":return e(".oj-datepicker-next-icon",d);case "oj-datepicker-month":return e(".oj-datepicker-month",d);case "oj-datepicker-year":return e(".oj-datepicker-year",d);case "oj-datepicker-current":return e(".oj-datepicker-current",d);case "oj-datepicker-close":return e(".oj-datepicker-close",d)}return null},_GetDefaultStyleClass:o_d("oj-inputdate"),zl:function(){return[]},Dt:function(b){this._super(b);b.firstDayOfWeek=function(){return a.ca.Vz()};b.dayWide=function(){return a.ca.sr("wide")};
b.dayNarrow=function(){return a.ca.sr("narrow")};b.monthWide=function(){return a.ca.xr("wide")};b.monthAbbreviated=function(){return a.ca.xr("abbreviated")}},Bl:function(){this.ld=!1;this.Mw=this.ge=null;this.Vj=4;this.Dg=this.Id=this.Cg=this.Gd=this.ae=0;this.qn=this.Sf=this.Rf=null;this.pj={};var b=this.element[0].nodeName.toLowerCase();this.Mw="div"===b||"span"===b;e(document).on("mousedown",e.proxy(this.Xo,this));this.Ha=d(e("\x3cdiv id\x3d'"+this._GetSubId(this.zs)+"' role\x3d'region' aria-labelledby\x3d'"+
this._GetSubId(this.ns)+"' class\x3d'oj-datepicker-content ui-helper-clearfix ui-corner-all'\x3e\x3c/div\x3e"));e("body").append(this.Ha);e(this.element).wrap(e(e("\x3cdiv\x3e").addClass(this.pl)));this.jn=this.element.parent()},_create:function(){this.Bl();var b=this._super();this.Gq(this.Nh());this.isInLine()?this.$s():this.vH();this.op(this.options.disabled);return b},Jo:function(){var b=this.options.showOn,a=e(e("\x3cspan\x3e").addClass(this.$i));if("focus"===b||"both"===b)this.qn=e.proxy(this.show,
this),this.element.on("focus",this.qn);if("image"===b||"both"===b){b=e(e("\x3cspan/\x3e").addClass(this.xB+" oj-clickable-icon oj-widget-icon"));a.append(b);var d=this;b.on("click",function(){d.ld?d.hide():d.show();return!1});b.on("mouseenter",function(){e(this).addClass("oj-hover")}).on("mousedown",function(){e(this).addClass("oj-active")}).on("mouseleave",function(){e(this).removeClass("oj-hover oj-active")})}0<a.children().length&&(this.ge=a,this.element.after(a),this.element.addClass(this.Ui))},
xD:function(){var b=this;this.element.on("paste",function(){b._SetValue(e(this).val())});this.Rf=e.proxy(this.jm,this);this.Sf=e.proxy(this.Hq,this);this.element.on("keydown",this.Rf).on("blur",this.Sf)},vH:function(){this.element.addClass(this.el);this.tl(this.element);this.widget().addClass(this.Vi);this.Jo();this.xD()},tl:function(b){var a=this._GetSubId(this.il);b.attr("aria-labelledby",a);this.Qf=e("\x3cdiv style\x3d'display:none;' id\x3d'"+a+"'\x3e"+this.options.inputDetail+"\x3c/div\x3e");
this.widget().append(this.Qf)},$s:function(){this.element.append(this.Ha);this.element.addClass(this.fo);this.ld=!0;this._SetValue(this.Nh(),null,{hs:this.Ef.lo});this.Ha.css("display","block")},isInLine:o_c("Mw"),jm:function(b){var a=e.ui.keyCode,d=!1;if(this.ld)switch(b.keyCode){case a.TAB:case a.ESCAPE:this.hide();break;case a.UP:case a.DOWN:this.Ha.find(".oj-datepicker-calendar").focus(),d=!0}else switch(b.keyCode){case a.UP:case a.DOWN:this.show(),d=!0}if(d||b.keyCode===a.ENTER)return b.preventDefault(),
b.stopPropagation(),!1},XE:function(b){var a;a=!1;var d=e.ui.keyCode,g=this._IsRTL();if(this.ld)switch(b.keyCode){case 84:b.altKey&&b.ctrlKey&&this.Ha.find(".oj-datepicker-current").focus();break;case 68:b.altKey&&b.ctrlKey&&this.Ha.find(".oj-datepicker-close").focus();break;case d.TAB:this.hide();break;case d.ENTER:return a=e("td."+this.bo+":not(."+this.ms+")",this.Ha),a[0]&&this.qy(this.Gd,this.Id,a[0]),b.preventDefault(),b.stopPropagation(),!1;case d.ESCAPE:this.hide();this.element.focus();a=!0;
break;case d.PAGE_UP:b.altKey?this.Wc(-1,"Y",!0):this.Wc(b.ctrlKey?-this.options.stepBigMonths:-this.Jj(),"M",!0);a=!0;break;case d.PAGE_DOWN:b.altKey?this.Wc(1,"Y",!0):this.Wc(b.ctrlKey?+this.options.stepBigMonths:+this.Jj(),"M",!0);a=!0;break;case d.END:this.ae=this.sm(this.Id,this.Gd);this.ri(!0);a=!0;break;case d.HOME:this.ae=1;this.ri(!0);a=!0;break;case d.LEFT:this.Wc(g?1:-1,"D",!0);b.originalEvent.altKey&&this.Wc(b.ctrlKey?-this.options.stepBigMonths:-this.Jj(),"M",!0);a=!0;break;case d.UP:this.Wc(-7,
"D",!0);a=!0;break;case d.RIGHT:this.Wc(g?-1:1,"D",!0);b.originalEvent.altKey&&this.Wc(b.ctrlKey?+this.options.stepBigMonths:+this.Jj(),"M",!0);a=!0;break;case d.DOWN:this.Wc(7,"D",!0),a=!0}else b.keyCode===d.HOME&&b.ctrlKey&&(this.show(),a=!0);a&&(b.preventDefault(),b.stopPropagation())},Hq:function(b){try{this._SetValue(this.element.val(),b)}catch(a){}this.ld&&this.Ha.find(".oj-datepicker-calendar").focus()},_SetDisplayValue:function(b){this._superApply(arguments);this.ld&&this.ri()},_SetValue:function(b,
a,d){var e=this._superApply(arguments);e&&this.Gq(this.Nh());return e},_GetElementValue:function(){return this.options.value||""},_GetDefaultValidators:function(){var b=this._superApply(arguments),d=this.Ph("min"),h=this.Ph("max"),g={},g={};if(null!=d||null!=h)g={min:this.options.min,max:this.options.max,converter:this._GetConverter()},this.pj[a.ac.VALIDATOR_TYPE_DATETIMERANGE]=a.R.pg(a.ac.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g);null!=this.options.dayMetaData&&(g={dayMetaData:this.options.dayMetaData,
converter:this._GetConverter()},this.pj[a.ac.VALIDATOR_TYPE_DATERESTRICTION]=a.R.pg(a.ac.VALIDATOR_TYPE_DATERESTRICTION).createValidator(g));return e.extend(this.pj,b)},ri:function(b){this.Vj=4;var a=this.nF();this.Ha.empty().append(a.html);0<e("button",this.Ha).length&&e.each(e("button",this.Ha),function(b,a){e(a).ojButton()});this.wD();this.Ha.find("."+this.bo+" a").mouseover();a.Gz&&this.Ha.find(".oj-datepicker-calendar").attr("aria-activedescendant",a.Gz);var d,a=this.Qp(),g=a[1];this.Ha.removeClass("oj-datepicker-multi-2 oj-datepicker-multi-3 oj-datepicker-multi-4").width("");
1<g&&this.Ha.addClass("oj-datepicker-multi-"+g).css("width",17*g+"em");this.Ha[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("oj-datepicker-multi");this.ld&&(this.element.is(":visible")&&!this.element.is(":disabled"))&&(b||this.isInLine()?(b=this.Ha.find(".oj-datepicker-calendar"),b[0]!==document.activeElement&&b.focus()):this.element[0]!==document.activeElement&&this.element.focus());if(this.Sc){d=this.Sc;var l=this;setTimeout(function(){d===l.Sc&&l.Sc&&l.Ha.find("select.oj-datepicker-year:first").replaceWith(l.Sc);
d=l.Sc=null},0)}},Wc:function(b,a,d){this.options.disabled||(this.Ut(b+("M"===a?this.options.currentMonthPos:0),a),this.ri(d))},nG:function(){var b=new Date;this.ae=b.getDate();this.Cg=this.Gd=b.getMonth();this.Dg=this.Id=b.getFullYear();this.Wc()},ry:function(b,a){var d=parseInt(b.options[b.selectedIndex].value,10);"M"===a?this.Gd=this.Cg=d:this.Id=this.Dg=d;this.Wc()},Ou:function(b,a){a.setHours(b.getHours());a.setMinutes(b.getMinutes());a.setSeconds(b.getSeconds());a.setMilliseconds(b.getMilliseconds())},
qy:function(b,a,d){e(d).hasClass(this.Gs)||this.options.disabled||(this.ae=e("a",d).html(),this.Gd=b,this.Id=a,(b=this.options.value)?(a=new Date(this.Id,this.Gd,this.ae),this.Ou(b,a),b=a):b=new Date(this.Id,this.Gd,this.ae),this._SetValue(b,null,{hs:this.Ef.lo}),this.hide())},Hm:function(){var b=new Date;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);return b},Nh:function(){return this.np(this.options.value,this.Hm())},np:function(b,a){var d;null==b||""===b?d=a:"number"===typeof b?
isNaN(b)?d=a:(d=this.Hm(),d.setDate(d.getDate()+b)):d=new Date(b.getTime());return d=d||a},Gq:function(b){b=this.np(b,this.Hm());this.ae=b.getDate();this.Cg=this.Gd=b.getMonth();this.Dg=this.Id=b.getFullYear();this.Ut()},lM:function(){return this.Id&&""!==this.element.val()?new Date(this.Id,this.Gd,this.ae):null},Jj:function(){var b=this.options.stepMonths;return e.isNumeric(b)?b:this.options.numberOfMonths},wD:function(){var b=this.Jj(),a=this;this.Ha.find("[data-handler]").map(function(){e(this).bind(this.getAttribute("data-event"),
{prev:function(){a.Wc(-b,"M",!0)},next:function(){a.Wc(+b,"M",!0)},hide:function(b){if("keyup"===b.type&&13===b.keyCode||"click"===b.type)a.hide(),b.preventDefault(),b.stopPropagation()},today:function(b){if("keyup"===b.type&&13===b.keyCode||"click"===b.type)a.nG(),b.preventDefault(),b.stopPropagation()},selectDay:function(){a.qy(+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){a.ry(this,"M");return!1},selectYear:function(){a.ry(this,"Y");return!1},
calendarKey:function(b){a.XE(b)}}[this.getAttribute("data-handler")])})},nF:function(){var b,a,d,e,l,k=this.options.dayWide,m=this.options.dayNarrow,n=this.options.monthWide,p=this.options.monthAbbreviated,q=this.options.firstDayOfWeek,r,s,t,v,y,A,C,K,E="",B,I,x,w,u,L,D,z,F=new Date,F=new Date(F.getFullYear(),F.getMonth(),F.getDate()),J=this._IsRTL();l=this.options.buttonPanel;var P=this.Qp(),G=this.options.currentMonthPos,Y=this.options.dayMetaData;z=null;var U=1!==P[0]||1!==P[1],V=this.Ph("min"),
T=this.Ph("max"),G=this.Cg-G,Q=this.Dg,W=new Date(this.Id,this.Gd,this.ae),O=this.Nh(),R=O.getDate(),aa=O.getMonth(),ba=O.getFullYear(),S=this.options.disabled;O.setHours(0);O.setMinutes(0);O.setSeconds(0);O.setMilliseconds(0);0>G&&(G+=12,Q--);if(T)for(b=new Date(T.getFullYear(),T.getMonth()-P[0]*P[1]+1,T.getDate()),b=V&&b<V?V:b;new Date(Q,G,1)>b;)G--,0>G&&(G=11,Q--);this.Cg=G;this.Dg=Q;b=this.options.prevText;b=this.uu(-1,Q,G)&&!S?"\x3ca class\x3d'oj-datepicker-prev-icon ui-corner-all oj-enabled' data-handler\x3d'prev' data-event\x3d'click' title\x3d'"+
b+"'\x3e\x3cspan class\x3d'oj-widget-icon oj-clickable-icon'\x3e\x3c/span\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-prev-icon ui-corner-all oj-disabled' title\x3d'"+b+"'\x3e\x3cspan class\x3d'oj-widget-icon oj-clickable-icon'\x3e\x3c/span\x3e\x3c/a\x3e";a=this.options.nextText;a=this.uu(1,Q,G)&&!S?"\x3ca class\x3d'oj-datepicker-next-icon ui-corner-all oj-enabled' data-handler\x3d'next' data-event\x3d'click' title\x3d'"+a+"'\x3e\x3cspan class\x3d'oj-widget-icon oj-clickable-icon'\x3e\x3c/span\x3e\x3c/a\x3e":
"\x3ca class\x3d'oj-datepicker-next-icon ui-corner-all oj-disabled' title\x3d'"+a+"'\x3e\x3cspan class\x3d'oj-widget-icon oj-clickable-icon'\x3e\x3c/span\x3e\x3c/a\x3e";d=this.options.currentText;e=this.isInLine()?"":"\x3cbutton type\x3d'button' class\x3d'oj-datepicker-close oj-enabled ui-priority-primary ui-corner-all' data-handler\x3d'hide' data-event\x3d'click keyup'\x3e"+this.options.closeText+"\x3c/button\x3e";l="default"===l?"\x3cdiv class\x3d'oj-datepicker-buttonpane ui-widget-content'\x3e"+
(J?e:"")+(this.Nw(F)?"\x3cbutton type\x3d'button' class\x3d'oj-datepicker-current oj-enabled ui-priority-secondary ui-corner-all' data-handler\x3d'today' data-event\x3d'click keyup'\x3e"+d+"\x3c/button\x3e":"")+(J?"":e)+"\x3c/div\x3e":"";d=this.options.weekDisplay;e=this.options.daysOutsideMonth;r="";for(t=0;t<P[0];t++){v="";this.Vj=4;for(y=0;y<P[1];y++){s=" ui-corner-all";B="";if(U){B+="\x3cdiv class\x3d'oj-datepicker-group";if(1<P[1])switch(y){case 0:B+=" oj-datepicker-group-first";s=" ui-corner-"+
(J?"right":"left");break;case P[1]-1:B+=" oj-datepicker-group-last";s=" ui-corner-"+(J?"left":"right");break;default:B+=" oj-datepicker-group-middle",s=""}B+="'\x3e"}B+="\x3cdiv class\x3d'oj-datepicker-header ui-widget-header ui-helper-clearfix"+s+(S?" oj-disabled ":" oj-enabled ")+"'\x3e"+(/all|left/.test(s)&&0===t?J?a:b:"")+(/all|right/.test(s)&&0===t?J?b:a:"")+this.oF(G,Q,V,T,0<t||0<y,n,p)+"\x3c/div\x3e\x3ctable class\x3d'oj-datepicker-calendar"+(S?" oj-disabled ":" oj-enabled ")+"' tabindex\x3d-1 data-handler\x3d'calendarKey' data-event\x3d'keydown' aria-readonly\x3d'true' role\x3d'grid' aria-labelledby\x3d'"+
this._GetSubId(this.rs)+"'\x3e\x3cthead role\x3d'presentation'\x3e\x3ctr role\x3d'row'\x3e";I="number"===d?"\x3cth class\x3d'oj-datepicker-week-col'\x3e"+this.options.weekHeader+"\x3c/th\x3e":"";for(s=0;7>s;s++)A=(s+q)%7,I+="\x3cth role\x3d'columnheader' aria-label\x3d'"+k[A]+"'"+(5<=(s+q+6)%7?" class\x3d'oj-datepicker-week-end'":"")+"\x3e\x3cspan title\x3d'"+k[A]+"'\x3e"+m[A]+"\x3c/span\x3e\x3c/th\x3e";B+=I+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody role\x3d'presentation'\x3e";I=this.sm(Q,G);Q===ba&&G===
aa&&(R=Math.min(R,I));s=(this.CF(Q,G)-q+7)%7;I=Math.ceil((s+I)/7);this.Vj=I=U?this.Vj>I?this.Vj:I:I;x=new Date(Q,G,1-s);for(w=0;w<I;w++){B+="\x3ctr role\x3d'row'\x3e";u="none"===d?"":"\x3ctd class\x3d'oj-datepicker-week-col'\x3e"+this.options.calculateWeek(x)+"\x3c/td\x3e";for(s=0;7>s;s++){D=x.getMonth()!==G;A=x.getTime()===O.getTime();C="oj-dp-"+w+"-"+s;(K=x.getTime()===W.getTime()&&G===this.Gd)&&(E=C);L=[!0,""];z=x.getFullYear();var X=x.getMonth(),ca=x.getDate(),da=function Z(b,a,c){if(!b||a===
c.length)return b;var d=a+1;return Z(b[c[a]],d,c)||Z(b["*"],d,c)};Y&&(z=da(Y,0,[z,X,ca]))&&(L=[!z.disabled,z.className||""],z.tooltip&&L.push(z.tooltip));z=D&&"selectable"!==e||!L[0]||V&&x<V||T&&x>T;u+="\x3ctd role\x3d'gridcell' aria-disabled\x3d'"+!!z+"' aria-selected\x3d'"+A+"' id\x3d'"+C+"' class\x3d'"+(5<=(s+q+6)%7?" oj-datepicker-week-end":"")+(D?" oj-datepicker-other-month":"")+(K?" "+this.bo:"")+(z||S?" "+this.Gs+" oj-disabled":" oj-enabled")+(D&&"hidden"===e?"":" "+L[1]+(A?" "+this.ms:"")+
(x.getTime()===F.getTime()?" oj-datepicker-today":""))+"'"+(D&&"hidden"===e||!L[2]?"":" title\x3d'"+L[2].replace(/'/g,"\x26#39;")+"'")+(z?"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+x.getMonth()+"' data-year\x3d'"+x.getFullYear()+"'")+"\x3e"+(D&&"hidden"===e?"\x26#xa0;":z||S?"\x3cspan class\x3d'oj-disabled'\x3e"+x.getDate()+"\x3c/span\x3e":"\x3ca class\x3d'oj-enabled"+(x.getTime()===O.getTime()?" oj-selected":"")+(D?" ui-priority-secondary":"")+"' href\x3d'#'\x3e"+x.getDate()+
"\x3c/a\x3e")+"\x3c/td\x3e";x.setDate(x.getDate()+1)}B+=u+"\x3c/tr\x3e"}G++;11<G&&(G=0,Q++);B+="\x3c/tbody\x3e\x3c/table\x3e"+(U?"\x3c/div\x3e"+(0<P[0]&&y===P[1]-1?"\x3cdiv class\x3d'oj-datepicker-row-break'\x3e\x3c/div\x3e":""):"");v+=B}r+=v}return{html:r+l,Gz:E}},oF:function(c,d,e,g,l,k,m){var n,p,q,r=this.options.changeMonth,s=this.options.changeYear,t=a.ca.nA()?"before":"after",v="\x3cdiv id\x3d'"+this._GetSubId(this.rs)+"' class\x3d'oj-datepicker-title' role\x3d'header'\x3e",y="",A=this.options.disabled;
if(l||"none"===r)y+="\x3cspan class\x3d'oj-datepicker-month'\x3e"+k[c]+"\x3c/span\x3e";else{k=e&&e.getFullYear()===d;n=g&&g.getFullYear()===d;y+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-month "+(A?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectMonth' data-event\x3d'change' role\x3d'listbox'\x3e";for(p=0;12>p;p++)(!k||p>=e.getMonth())&&(!n||p<=g.getMonth())&&(y+="\x3coption role\x3d'option' value\x3d'"+p+"' aria-selected\x3d'"+(p===c?"true' selected\x3d'selected'":"false'")+
"\x3e"+m[p]+"\x3c/option\x3e");y+="\x3c/select\x3e"}"before"===t&&(v+=y+(l||"select"!==r||"select"!==s?"\x26#xa0;":""));if(!this.Sc)if(this.Sc="",l||"none"===s)v+="\x3cspan class\x3d'oj-datepicker-year'\x3e"+b.Ta(new Date(d,c,1))+"\x3c/span\x3e";else{k=this.options.yearRange.split(":");q=(new Date).getFullYear();n=function(b){b=b.match(/c[+\-].*/)?d+parseInt(b.substring(1),10):b.match(/[+\-].*/)?q+parseInt(b,10):parseInt(b,10);return isNaN(b)?q:b};m=n(k[0]);k=Math.max(m,n(k[1]||""));m=e?Math.max(m,
e.getFullYear()):m;k=g?Math.min(k,g.getFullYear()):k;for(this.Sc+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-year "+(A?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectYear' data-event\x3d'change' role\x3d'listbox'\x3e";m<=k;m++)this.Sc+="\x3coption role\x3d'option' value\x3d'"+m+"' aria-selected\x3d'"+(m===d?"true' selected\x3d'selected'":"false'")+"\x3e"+b.Ta(new Date(m,c,1))+"\x3c/option\x3e";this.Sc+="\x3c/select\x3e";v+=this.Sc;this.Sc=null}"after"===t&&(v+=(l||"select"!==
r||"select"!==s?"\x26#xa0;":"")+y);v+="\x3cspan hidden id\x3d'"+this._GetSubId(this.ns)+"'\x3e"+this.options.datePicker+"\x3c/span\x3e";return v+"\x3c/div\x3e"},Ut:function(b,a){var d=this.Dg+("Y"===a?b:0),e=this.Cg+("M"===a?b:0),l=Math.min(this.ae,this.sm(d,e))+("D"===a?b:0),d=new Date(d,e,l);this.ae=d.getDate();this.Cg=this.Gd=d.getMonth();this.Dg=this.Id=d.getFullYear()},Qp:function(){var b=this.options.numberOfMonths,b="string"===typeof b?parseInt(b,10):b;return null==b?[1,1]:"number"===typeof b?
[1,b]:b},Ph:function(b){var a=this.np(this.options[b],null);if(a)return a;a=null;if(this.element.attr(b))try{a=Date.parse(this.element.attr(b));if(isNaN(a))return;a=new Date(a)}catch(d){}return this.options[b]=a},sm:function(b,a){return 32-(new Date(b,a,32)).getDate()},CF:function(b,a){return(new Date(b,a,1)).getDay()},uu:function(b,a,d){var e=this.Qp();a=new Date(a,d+(0>b?b:e[0]*e[1]),1);0>b&&a.setDate(this.sm(a.getFullYear(),a.getMonth()));return this.Nw(a)},Nw:function(b){var a,d,e=this.Ph("min"),
l=this.Ph("max"),k=null,m=null;if(a=this.options.yearRange)a=a.split(":"),d=(new Date).getFullYear(),k=parseInt(a[0],10),m=parseInt(a[1],10),a[0].match(/[+\-].*/)&&(k+=d),a[1].match(/[+\-].*/)&&(m+=d);return(!e||b.getTime()>=e.getTime())&&(!l||b.getTime()<=l.getTime())&&(!k||b.getFullYear()>=k)&&(!m||b.getFullYear()<=m)},iM:function(b){function a(b){return{FN:1,qN:2,EN:3}[b]||b}return[parseFloat(a(b.css("border-left-width"))),parseFloat(a(b.css("border-top-width")))]},_destroy:function(){var b=this._super();
this.Sf&&this.element.off("blur",this.Sf);this.Rf&&this.element.off("keydown",this.Rf);this.qn&&this.element.off("focus",this.qn);this.ge&&this.ge.remove();this.Qf&&(this.element.removeAttr("aria-labelledby"),this.Qf.remove());this.element.unwrap();this.element.removeClass(this.el).removeClass(this.Ui).removeClass(this.fo).removeClass("oj-disabled");this.Ha.remove();return b},refresh:function(){this._superApply(arguments);this.ri();return this},show:function(){if(!this.ld&&!this.options.disabled){var b=
this._IsRTL();this.Ha.empty();this.ri();this.Ha.css({top:"",left:"",position:"absolute"});this.Ha.position({my:b?"right top":"left top",at:b?"right bottom":"left bottom",of:this.element,collision:"fit"});this.Ha.zIndex(this.element.zIndex()+1);this.ld=!0;this.Ha.show();this.Ha.find(".oj-datepicker-calendar").focus();return this}},Xo:function(b){b=e(b.target);b[0]!==this.Ha[0]&&(0===b.parents("#"+this._GetSubId(this.zs)).length&&!b.closest("."+this.$i).length&&this.ld)&&this.hide()},hide:function(){this.ld&&
!this.isInLine()&&(this.Ha.hide(),this.ld=!1,this._trigger("close",{uK:this.options.value}));return this},op:function(b){if(!this.isInLine()&&this.ge){var a=this.ge.children().filter("span");b?a.addClass("oj-disabled").removeClass("oj-enabled"):a.removeClass("oj-disabled").addClass("oj-enabled")}},_setOption:function(b,d){var e=null,g={},g={};if("value"===b)return!d&&this.element.val()&&(e=this.Hm(),this.Ou(this.options.value||e,e),d=e),e=this._super(b,d),this.Gq(d),e;e=this._superApply(arguments);
"disabled"===b?this.op(d):"max"===b||"min"===b?(g={min:this.options.min,max:this.options.max,converter:this._GetConverter()},this.pj[a.ac.VALIDATOR_TYPE_DATETIMERANGE]=a.R.pg(a.ac.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g),this._ResetAllValidators()):"dayMetaData"===b&&(g={dayMetaData:this.options.dayMetaData,converter:this._GetConverter()},this.pj[a.ac.VALIDATOR_TYPE_DATERESTRICTION]=a.R.pg(a.ac.VALIDATOR_TYPE_DATERESTRICTION).createValidator(g),this._ResetAllValidators());return e},calendarDisplay:o_c("Ha"),
widget:o_c("jn")});a.ga("oj.ojInputTime",e.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",$i:"oj-datepicker-trigger",yB:"oj-datepicker-time-icon",Es:"ojInputTime",il:"oj-inputtime-input-description",Ds:"oj-inputtime-input",Ui:"oj-has-trigger",pl:"oj-inputtime oj-widget",Vi:"oj-inputtime-input-container",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],options:{converter:a.R.dh(a.Qe.CONVERTER_TYPE_DATETIME).createConverter({hour:"2-digit",hour12:!0,minute:"2-digit"}),timeIncrement:"T00:30:00:00",
close:null,datePicker:null},getNodeBySubId:function(b){var a=this._superApply(arguments);if(a)return a;a=b.subId;return"oj-datepicker-time"===a?this.xb:"oj-datepicker-time-icon"===a?e(".oj-datepicker-time-icon",this.ge):null},show:function(){if(!this.options.disabled){this.ye()&&this.Bg.widget.hide();0===this.xb.children().length&&this.Dp();this.xb.css({top:"",left:""});var b=this._IsRTL();this.xb.position({my:b?"right top":"left top",at:b?"right bottom":"left bottom",of:this.element,collision:"fit"});
this.bg=!0;this.xb.show();b=e("[aria-selected]",this.xb);1===b.length&&this.zu(e(b));e("ul",this.xb).focus()}},hide:function(){this.bg&&(this.xb.hide(),this.bg=!1,this._trigger("close",{uK:this.options.value}))},refresh:function(){this._superApply(arguments);this.Dp();return this},timeDisplay:o_c("xb"),widget:function(){return this.ye()?this.Bg.widget.widget():this.jn},_GetDefaultStyleClass:o_d("oj-inputtime"),zl:function(){return[]},_SetDisplayValue:function(b){this.ye()&&!this.fm()||this._superApply(arguments);
this.Dp()},_GetElementValue:function(){return this.options.value||""},Bl:function(){this.Tq=null;this.bg=!1;this.Qf=null;this.Bg=this.options.datePicker;this.xb=e("\x3cdiv id\x3d'"+this._GetSubId(this.Es)+"' class\x3d'oj-datepicker-time oj-widget'\x3e\x3c/div\x3e");e("body").append(this.xb);e(document).on("mousedown",e.proxy(this.Xo,this))},tl:function(b){var a=this._GetSubId(this.il);b.attr("aria-labelledby",a);this.Qf=e("\x3cdiv style\x3d'display:none;' id\x3d'"+a+"'\x3e"+this.options.inputDetail+
"\x3c/div\x3e");this.widget().append(this.Qf)},ye:function(){return null!==this.Bg},_create:function(){this.Bl();this.ye()||(e(this.element).wrap(e(e("\x3cdiv\x3e").addClass(this.pl)).addClass(this.Vi)),this.jn=this.element.parent(),this.element.addClass(this.Ds),this.tl(this.element));if(!this.ye()||this.fm()){this.Sf=e.proxy(this.Hq,this);this.element.on("blur",this.Sf);var b=this;this.element.on("paste",function(){b._SetValue(e(this).val())})}this.Jo();var a=this._super();this._setOption("disabled",
this.options.disabled);return a},fm:function(){return this.Bg.widget.isInLine()},GE:function(){return!this.ye()||this.fm()||"focus"===this.Bg.widget.option("showOn")},Jo:function(){var b=this.GE(),a=b?e(e("\x3cspan\x3e").addClass(this.$i)):e("+ span",this.element),d=e(e("\x3cspan/\x3e").addClass(this.yB+" oj-clickable-icon oj-widget-icon"));if(!this.ye()||this.fm())this.Rf=e.proxy(this.jm,this),this.element.on("keydown",this.Rf);a.append(d);var g=this;d.on("click",function(){g.bg?g.hide():g.show()});
d.on("mouseenter",function(){e(this).addClass("oj-hover")}).on("mousedown",function(){e(this).addClass("oj-active")}).on("mouseleave",function(){e(this).removeClass("oj-hover oj-active")});this.element.addClass(this.Ui);this.ge=a;b&&this.element.after(a)},jm:function(b){var a=e.ui.keyCode,d=!1;if(this.bg)switch(b.keyCode){case a.TAB:case a.ESCAPE:this.hide();break;case a.UP:case a.DOWN:e("ul",this.xb).focus(),d=!0}else switch(b.keyCode){case a.UP:case a.DOWN:this.show(),d=!0}if(d||b.keyCode===a.ENTER)return b.preventDefault(),
b.stopPropagation(),!1},Hq:function(b){try{this._SetValue(this.element.val(),b)}catch(a){}this.bg&&e("ul",this.xb).focus()},Xo:function(b){b=e(b.target);b[0]!==this.xb[0]&&0===b.parents("#"+this._GetSubId(this.Es)).length&&(!b.closest("."+this.$i).length&&this.bg)&&this.hide()},Dp:function(){var b=this.XF(),a=e("\x3cul class\x3d'oj-datepicker-time-list' tabindex\x3d'-1' role\x3d'listbox'\x3e\x3c/ul\x3e"),d=this.DF(),g=[],l;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);g=this.iG(b);
d=d||g[0].value;this.xb.empty();b=0;for(l=g.length;b<l;b++){var k=g[b].value,m=e("\x3cli tabindex\x3d'1' class\x3d'oj-datepicker-time-list-item' data-value\x3d'"+k+"' role\x3d'option' id\x3d'"+b+"'\x3e"+g[b].label+"\x3c/li\x3e");d===k&&m.attr("aria-selected","true").addClass("oj-checked oj-active");a.append(m)}this.xb.append(a);e(".oj-datepicker-time-list-item",a).on("mousemove",function(){e(".oj-active",a).removeClass("oj-active");e(this).addClass("oj-active");a.attr("aria-activedescendant",this.id)});
var n=this;a.on("click",function(b){n.hide();n.xx(b)});a.on("keydown",function(b){n.KJ(b)})},qw:function(){return this.ye()?this.Bg.converter:this._GetConverter()},iG:function(b){var a=[],d=this.qw();if(b){var e=this.options.timeIncrement;if(e)if(4===e.split(":").length){if(e=this.hG(e)){var l=new Date(b),k="";do k=d.Ta(l),a.push({label:k,value:k}),l.setHours(l.getHours()+e.UK),l.setMinutes(l.getMinutes()+e.gL),l.setSeconds(l.getSeconds()+e.xL),l.setMilliseconds(l.getMilliseconds()+e.fL);while(l.getDate()===
b.getDate())}}else throw Error("timeIncrement value should be in the format of Thh:mm:ss:SS");}return a},hG:function(b){var a=null;b=b.split(":");4===b.length&&(a={UK:parseInt(b[0].substring(1),10),gL:parseInt(b[1],10),xL:parseInt(b[2],10),fL:parseInt(b[3],10)});return a},DF:function(){var b=this.qw(),a=this.options.value;return a?b.Ta(a):""},KJ:function(b){if(this.bg){var a=e.ui.keyCode,d=!1;switch(b.keyCode){case a.TAB:this.hide();break;case a.ESCAPE:this.hide();this.element.focus();d=!0;break;
case a.UP:this.ux(b,"prev");d=!0;break;case a.DOWN:this.ux(b,"next");d=!0;break;case a.ENTER:this.xx(b),d=!0}if(d)return b.preventDefault(),b.stopPropagation(),!1}},zu:function(b){b=b.position().top;var a=this.xb.height(),d=this.xb.scrollTop();(a+d<b||b<d)&&this.xb.scrollTop(b)},ux:function(b,a){var d=e(".oj-active",this.xb),g=e("ul",this.xb);if(1===d.length){var l=e(d)[a]();1===l.length&&(d.removeClass("oj-active"),l.addClass("oj-active"),g.attr("aria-activedescendant",l[0].id),this.zu(l))}},xx:function(){var b=
this.xb,a=e("[aria-selected]",b),d=e("ul",b),b=e(".oj-active",b);1===a.length&&1===b.length&&(a.removeAttr("aria-selected").removeClass("oj-checked"),b.attr("aria-selected","true").addClass("oj-checked"),this._SetValue(b.attr("data-value")),d.attr("aria-activedescendant",b[0].id),this.hide(),this.element.focus(),this.ye()&&this.Bg.widget.hide())},XF:function(){return new Date(1950,0,1)},_destroy:function(){var b=this._super();this.ge&&this.ge.remove();this.Sf&&this.element.off("blur",this.Sf);this.Rf&&
this.element.off("keydown",this.Rf);this.xb.remove();this.ye()||this.element.unwrap();this.Qf&&(this.element.removeAttr("aria-labelledby"),this.Qf.remove());this.element.removeClass(this.Ds).removeClass(this.Ui).removeClass("oj-disabled");return b},_setOption:function(b,a){var d=null;if("value"===b)return!a&&this.element.val()&&(a=new Date),d=this._super(b,a);d=this._superApply(arguments);if("disabled"===b){var e=this.ge.children().filter("span");a?e.addClass("oj-disabled").removeClass("oj-enabled"):
e.removeClass("oj-disabled").addClass("oj-enabled")}return d}});a.ga("oj.ojInputDateTime",e.oj.ojInputDate,{version:"1.0.0",widgetEventPrefix:"oj",il:"oj-inputdatetime-input-description",el:"oj-inputdatetime-input",pl:"oj-inputdatetime oj-widget",Vi:"oj-inputdatetime-input-container",options:{timeIncrement:"T00:30:00:00",converter:a.R.dh(a.Qe.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",hour12:!0,minute:"2-digit"})},getNodeBySubId:function(b){var a=
this._superApply(arguments);if(a)return a;a=b.subId;return"oj-datepicker-time"===a||"oj-datepicker-time-icon"===a?this.ee.ojInputTime("getNodeBySubId",b):null},_GetDefaultStyleClass:o_d("oj-inputdatetime"),Ts:o_d("oj-ojInputDate"),Bl:function(){this._super();this.qi=this.element;this.Tq=this.az=this.ee=null},$s:function(){this._super();this.qx=this.element;var b=e("\x3cinput type\x3d'text'\x3e");b.insertAfter(this.element);this.qi=b;b.addClass(this.el);this.$J();this.tl(b)},_create:function(){var b=
this._super(),a=this.rw(this._GetConverter());if(null===a)throw Error("Plase use ojInputDate if you do not have time portion");this.Pm();this.az=e.proxy(this.LJ,this);this.ee=this.qi.ojInputTime({converter:null,optionChange:this.az,timeIncrement:this.options.timeIncrement,datePicker:{widget:this,converter:a}});this.ee.ojInputTime("option","disabled",this.options.disabled);this.isInLine()&&this.qi.val(a.Ta(this.Nh()));return b},$J:function(){e(this.qi).wrap(e(e("\x3cdiv\x3e").addClass(this.Vi)));this.jn=
this.qi.parent()},rw:function(b){b=b.yb();var d={},h="hour hour12 minute second millisecond timeFormat".split(" "),g,l;g=0;for(l=h.length;g<l;g++)h[g]in b&&("timeFormat"===h[g]&&(d.formatType="time"),d[h[g]]=b[h[g]]);return e.isEmptyObject(d)?null:this.Tq=b=a.R.dh(a.Qe.CONVERTER_TYPE_DATETIME).createConverter(d)},LJ:function(b,a){if("value"===a.option){var d=new Date(this.Nh()),e=this.Tq.parse(a.value);d.setHours(e.getHours());d.setMinutes(e.getMinutes());d.setSeconds(e.getSeconds());d.setMilliseconds(e.getMilliseconds());
this.option("value",d)}},jm:function(b){var a=e.ui.keyCode,d=!1;if(!this.ld)switch(b.keyCode){case a.UP:case a.DOWN:b.altKey&&(this.ee.ojInputTime("show"),d=!0)}return d?(b.preventDefault(),b.stopPropagation(),!1):this._superApply(arguments)},_destroy:function(){var b=this._super();this.ee.ojInputTime("destroy");this.isInLine()&&(this.qx.unwrap(),this.qx.removeClass(this.fo),this.qi.remove());return b},show:function(){this.ee.ojInputTime("hide");return this._super()},op:function(b){var a=this._superApply(arguments);
this.isInLine()&&this.ee&&this.ee.ojInputTime("option","disabled",b);return a},refresh:function(){this._superApply(arguments);this.ee.ojInputTime("refresh");return this},_setOption:function(b,a){"timeIncrement"===b?this.ee.ojInputTime("option",b,a):"converter"===b&&this.ee.ojInputTime("option",b,this.rw(a));return this._superApply(arguments)}})});
//# sourceMappingURL=oj-modular.map