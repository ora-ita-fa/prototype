define(["ojs/ojcore","jquery"],function(a,e){a.sc=function(a){this.data=a;this.i()};o_("DataSource",a.sc,a);a.a.ea(a.sc,a.a,"oj.DataSource");a.sc.prototype.i=function(){this.pb=[];a.sc.q.i.call(this)};a.a.c("DataSource.prototype.Init",{i:a.sc.prototype.i});a.sc.prototype.on=function(a,b){var c=!1,f;for(f=0;f<this.pb.length;f++)if(this.pb[f].eventType==a&&this.pb[f].eventHandlerFunc==b){c=!0;break}c||this.pb.push({eventType:a,eventHandlerFunc:b})};a.a.c("DataSource.prototype.on",{on:a.sc.prototype.on});
a.sc.prototype.off=function(a,b){var c;for(c=this.pb.length-1;0<=c;c--)if(this.pb[c].eventType==a&&this.pb[c].eventHandlerFunc==b){this.pb.splice(c,1);break}};a.a.c("DataSource.prototype.off",{off:a.sc.prototype.off});a.sc.prototype.handleEvent=function(a,b){var c;for(c=0;c<this.pb.length;c++){var f=this.pb[c];f.eventType==a&&f.eventHandlerFunc(b)}};a.a.c("DataSource.prototype.handleEvent",{handleEvent:a.sc.prototype.handleEvent});a.Db=function(d){a.Db.q.constructor.call(this,d)};o_("TreeDataSource",
a.Db,a);a.a.ea(a.Db,a.sc,"oj.TreeDataSource");a.Db.prototype.mf=o_d(-1);a.Db.prototype.dd=function(){a.f.va()};a.a.c("TreeDataSource.prototype.fetchChildren",{dd:a.Db.prototype.dd});a.Db.prototype.lf=function(){a.f.va()};a.a.c("TreeDataSource.prototype.fetchDescendents",{lf:a.Db.prototype.lf});a.Db.prototype.sort=function(){a.f.va()};a.a.c("TreeDataSource.prototype.sort",{sort:a.Db.prototype.sort});a.Db.prototype.Ak=function(){return{key:null,direction:"none"}};a.a.c("TreeDataSource.prototype.getSortCriteria",
{Ak:a.Db.prototype.Ak});a.Db.prototype.move=function(){a.f.va()};a.a.c("TreeDataSource.prototype.move",{move:a.Db.prototype.move});a.Db.prototype.Uk=o_d("valid");a.a.c("TreeDataSource.prototype.moveOK",{Uk:a.Db.prototype.Uk});a.Db.prototype.bb=o_d(null);a.a.c("TreeDataSource.prototype.getCapability",{bb:a.Db.prototype.bb});a.W=function(d){this.Ii=d;a.W.q.constructor.call(this)};o_("FlattenedTreeDataSource",a.W,a);a.a.ea(a.W,a.sc,"oj.FlattenedTreeDataSource");a.W.prototype.i=function(){var d;a.W.q.i.call(this);
this.Ec=this.Ii.dataSource;this.Ec.on("change",this.OG.bind(this));this.pf=parseInt(this.Ii.fetchSize,10);isNaN(this.pf)&&(this.pf=25);this.oe=parseInt(this.Ii.maxCount,10);isNaN(this.oe)&&(this.oe=500);d=this.Ii.expanded;Array.isArray(d)?this.lg=d:("all"===d&&(this.Hi=[]),this.lg=[]);this.ha=[]};a.a.c("FlattenedTreeDataSource.prototype.Init",{i:a.W.prototype.i});a.W.prototype.handleEvent=function(d,b){a.W.q.handleEvent.call(this,d,b)};a.a.c("FlattenedTreeDataSource.prototype.handleEvent",{handleEvent:a.W.prototype.handleEvent});
a.W.prototype.fl=function(){delete this.ha;delete this.lg;this.Ec.off("change");this.Ec.fl&&this.Ec.fl()};a.a.c("FlattenedTreeDataSource.prototype.Destory",{fl:a.W.prototype.fl});a.W.prototype.Tz=o_c("lg");a.a.c("FlattenedTreeDataSource.prototype.getExpandedKeys",{Tz:a.W.prototype.Tz});a.W.prototype.Gn=function(a){return null!=this.Ii?this.Ii[a]:null};a.a.c("FlattenedTreeDataSource.prototype.getOption",{Gn:a.W.prototype.Gn});a.W.prototype.eA=o_c("Ec");a.W.prototype.zK=function(a,b){this.Tm()?this.fF(a,
b):this.eF(a,b)};a.W.prototype.eF=function(d,b){var c,f,e,g,l,k;if(d.start>=this.ha.length){c=this.oe-this.ha.length;if(0==this.ha.length){d.count=Math.min(c,d.count);this.Ec.dd(null,d,{success:function(a){this.Km(a,null,0,0,b)}.bind(this)});return}if(0<c){f=this.ha[this.ha.length-1];e=f.parent;g=this.Ec.mf(e);l=f.index;k=f.depth;-1===g||l<g-1?(d.start=l+1,d.count=-1===g?this.pf:Math.min(c,Math.min(this.pf,g-d.start)),this.Ec.dd(e,d,{success:function(a){this.Km(a,e,k,g,b)}.bind(this)})):(c=this.xv(e,
k,b,c),c||(c=new a.Vc(null,d.start),null!=b&&null!=b.success&&b.success.call(null,c)));return}}this.zr(d,b)};a.W.prototype.Km=function(a,b,c,f,e){var g;g=[];this.pI(a,b,c,g);-1===f&&0===a.S()&&null!=b&&0<c?(b=this.xv(b,c,e))||null!=e&&null!=e.success&&e.success.call(null,a):(null!=e&&null!=e.success&&e.success.call(null,a),this.tv(g))};a.W.prototype.xv=function(a,b,c,f){var e,g,l,k,m,n,p,q;void 0===f&&(f=this.oe-this.ha.length);this.Kw()&&(e={queueOnly:!0});g=this.pf;for(l=this.ha.length-1-1;0<=l;l--)if(k=
this.ha[l],m=k.depth,m<b&&(a=k.parent,n=this.Ec.mf(a),k=k.index,(p=-1===n)||k<n-1)){q={};q.start=k+1;p?(q.count=Math.min(f,Math.max(0,g)),e=void 0):q.count=Math.min(f,Math.min(g,n-q.start));if(0==q.count)break;this.Ec.dd(a,q,{success:function(b){this.Km(b,a,m,n,c)}.bind(this)},e);b=m;g=Math.max(0,g-q.count);if(p||0===m||0===g)break}void 0!=e&&this.Ec.dd(a,{start:q.count,count:0},{success:function(b){this.Km(b,a,m,n,c)}.bind(this)});return g!=this.pf};a.W.prototype.pI=function(a,b,c,f){var e,g,l,k,
m;e=a.wa();g=a.S();for(l=0;l<g;l++)k=a.getMetadata(e+l),m=k.key,k={},k.key=m,k.depth=c,k.index=e+l,k.parent=b,this.ha.push(k),this.Um(m)&&f.push(m)};a.W.prototype.In=function(a,b){this.Um(a)?b.state="expanded":b.state=b.leaf?"leaf":"collapsed"};a.W.prototype.fF=function(a,b){var c={maxCount:this.oe};0<this.ha.length&&(c.start=this.ha[this.ha.length-1].key);this.Ec.lf(null,{success:function(c){this.yG(c,a,b)}.bind(this)},c)};a.W.prototype.yG=function(d,b,c){var f,e,g;b.start>=this.ha.length?(f=this.oe-
this.ha.length,e=Math.min(f,b.count),0<this.ha.length?(g=this.ha[this.ha.length-1],f={index:0,found:!1,count:0},this.yq(d,null,0,g,e,f),e=f.index+1):(f={count:0},this.yq(d,null,0,null,e,f),e=0),null!=c&&null!=c.success&&(d=null!=f?0===f.count?new a.Vc(null,b.start):new a.hc(d,e):new a.hc(d),c.success.call(null,d))):this.zr(b,c)};a.W.prototype.yq=function(a,b,c,f,e,g){var l,k,m,n,p,q;l=a.wa();k=a.S();for(m=0;m<k&&g.count!=e;m++){p=a.getMetadata(l+m);q=p.key;g.checkDepth&&f.depth===c&&(g.found=!0,g.checkDepth=
!1);if(null==f||g.found)n={},n.key=q,n.depth=c,n.index=l+m,n.parent=b,this.ha.push(n),g.count+=1,p.state=p.leaf?"leaf":"expanded";null==f||g.found||(q===f.key?p.leaf||this.Um(q)?g.found=!0:g.checkDepth=!0:g.index+=1);a.gg&&(n=a.gg(m),null!=n&&this.yq(n,q,c+1,f,e,g))}};a.W.prototype.expand=function(a){this.$e(a)};a.a.c("FlattenedTreeDataSource.prototype.expand",{expand:a.W.prototype.expand});a.W.prototype.$e=function(a){var b,c,f;b=this.Ec.mf(a);c=Math.min(this.pf,-1==b?this.pf:b);if(this.ha.length==
this.oe&&(f=this.Di(a),f==this.oe-1))return;0!=c&&(this.Ec.dd(a,{start:0,count:c},{success:function(c){this.QK(a,c,b)}.bind(this)},{success:this}),this.handleEvent("expand",{rowKey:a}))};a.W.prototype.collapse=function(a){var b,c,f,e;b=this.Di(a)+1;c=this.ha[b-1];f=0;c=c.depth;for(e=b;e<this.ha.length;e++){var g=this.ha[e].depth;if(g>c)f+=1;else if(g==c)break}if(0!=f){this.Tm()?this.Hi.push(a):this.OI(a);e=[];for(c=0;c<f;c++)e.push({row:this.ha[b+c].key});this.ha.splice(b,f);this.Xr(e);this.handleEvent("collapse",
{rowKey:a})}};a.a.c("FlattenedTreeDataSource.prototype.collapse",{collapse:a.W.prototype.collapse});a.W.prototype.Um=function(a){return this.Tm()?this.Hi&&0<this.Hi.length?-1===this.Gv(a):!0:this.lg&&0<this.lg.length?-1<this.Rv(a):!1};a.W.prototype.Gv=function(a){return this.Vv(this.Hi,a)};a.W.prototype.Rv=function(a){return this.Vv(this.lg,a)};a.W.prototype.Vv=function(a,b){var c,f;f=-1;for(c=0;c<a.length;c++)a[c]===b&&(f=c);return f};a.W.prototype.OI=function(a){a=this.Rv(a);-1<a&&this.lg.splice(a,
1)};a.W.prototype.KI=function(a){a=this.Gv(a);-1<a&&this.Hi.splice(a,1)};a.W.prototype.QK=function(a,b,c){var f,e,g,l,k,m,n,p,q;e=f=this.Di(a)+1;g=b.wa();l=b.S();k=this.ha[f-1];m=k.depth+1;p=[];for(q=g;q<l;q++)g=b.getMetadata(q),n=g.key,this.Um(n)&&p.push(n),this.Hw(f,g,k.key,q,m),f++;this.Tm()?this.KI(a):this.lg.push(a);this.jA(e,a,b);-1===c&&l===this.pf||c>l||f==this.oe?this.lp(f):this.ha.length>this.oe&&this.lp(this.oe);this.tv(p)};a.W.prototype.tv=function(a){var b,c;this.Kw()&&(b={queueOnly:!0});
for(c=0;c<a.length;c++)c==a.length-1?this.$e(a[c]):this.$e(a[c],b)};a.W.prototype.Hw=function(a,b,c,f,e){var g;b=b.key;g={};g.key=b;g.depth=e;g.index=f;g.parent=c;a<this.ha.length?this.ha.splice(a,0,g):this.ha.push(g)};a.W.prototype.lp=function(a,b){var c;void 0==b&&(b=this.ha.length-a);c=[];for(var f=0;f<b;f++)c.push({row:this.ha[a+f].key});this.ha.splice(a,b);this.Xr(c)};a.W.prototype.OG=function(a){var b,c,f;b=a.operation;c=a.parent;c=Array.isArray(c)?c[c.length-1]:c;f=a.index;"insert"===b?this.BG(c,
f,a.data):"delete"===b?this.wG(c,f):"refresh"===b&&this.QG(c)};a.W.prototype.BG=function(a,b,c){var f,e;f=this.Di(a);e=this.ha[f].depth+1;f=f+b+1;c=c.getMetadata(c.wa());this.Hw(f,c,a,b,e)};a.W.prototype.wG=function(d,b){var c,f,e,g;c=this.Di(d);f=this.ha[c];c+=b;e=this.ha[c];a.f.assert(e.parent===f&&e.depth===f.depth+1);for(f=c+1;f<this.ha.length;){g=this.ha[f];if(g.depth!=e.depth)break;f++}this.lp(c,1)};a.W.prototype.QG=function(a){null==a&&this.refresh()};a.W.prototype.Tm=function(){var a=this.Ec.bb("fetchDescendents");
return void 0!=this.Hi&&null!=a&&"disable"!=a};a.W.prototype.Kw=function(){return"enable"===this.Ec.bb("batchFetch")};a.W.prototype.refresh=function(){this.ha.length=0};a.W.prototype.Di=function(a){for(var b,c=0;c<this.ha.length;c++)if(b=this.ha[c],b.key==a)return c;return-1};a.W.prototype.getKey=function(a){return 0>a||a>=this.ha.length?null:this.ha[a].key};a.W.prototype.IK=function(){return{start:0,end:this.ha.length}};a.W.prototype.zr=function(a,b){null!=b&&null!=b.error&&b.error.call(null)};a.W.prototype.jA=
function(){a.f.va()};a.W.prototype.Xr=function(){a.f.va()};a.bj=function(){this.id=null;this.depth=0;this.parent=null;this.children=[];this.attr=this.title=null};a.bj.prototype.vD=function(a){return function(b,c){return b.attr&&c.attr&&b.attr[a]&&c.attr[a]?b.attr[a]<c.attr[a]?0:1:b[a]<c[a]?0:1}};a.bj.prototype.QE=function(a){return function(b,c){return b.attr&&c.attr&&b.attr[a]&&c.attr[a]?b.attr[a]<c.attr[a]?1:0:b[a]<c[a]?1:0}};a.bj.prototype.Qy=function(a){var b=a.key;"ascending"===a.direction?this.children.sort(this.vD(b)):
"descending"===a.direction&&this.children.sort(this.QE(b));for(var b=0,c=this.children.length;b<c;b++)this.children[b].Qy(a)};a.ub=function(d){var b;b=new a.bj;d.id||(b.id="root");this.data=this.Xu(b,d);a.ub.q.constructor.call(this,b)};o_("JsonTreeDataSource",a.ub,a);a.a.ea(a.ub,a.Db,"oj.JsonTreeDataSource");a.ub.prototype.i=function(){a.ub.q.i.call(this)};a.a.c("JsonTreeDataSource.prototype.Init",{i:a.ub.prototype.i});a.ub.prototype.Xu=function(d,b,c){var f,e,g,l,k,m,n;c||(c=0);for(l in b)if("children"==
l||0==c&&b instanceof Array)for(f=0==c&&b instanceof Array?b:b[l],c++,n=0;n<f.length;n++){g=f[n];e=new a.bj;g.id||(g.attr?g.attr.id||(g.attr.id="rid_"+Math.floor(1E3*Math.random()+1)):e.id="rid_"+Math.floor(1E3*Math.random()+1));for(k in g)for(m in e)k==m&&"children"!=k&&(e[m]=g[k]),"depth"==m&&(e[m]=c);d.children.push(e);for(m in g)"children"==m&&this.Xu(d.children[n],g,c)}return d};a.ub.prototype.mf=function(a){a||(a=this.data.id);a=this.Zf(this.data,a);return a.children?a.children.length:null};
a.a.c("JsonTreeDataSource.prototype.getChildCount",{mf:a.ub.prototype.mf});a.ub.prototype.dd=function(d,b,c){var f,e,g,l;g=[];d||(d=this.data.id);l=this.Zf(this.data,d);b||(b=[],b.start=0,b.count=l.children.length);b.count||(b.count=l.children.length);b.start||(b.start=0);f=b.start;e=Math.min(l.children.length,f+b.count);for(b=f;b<e;b+=1)g.push(l.children[b]);d=new a.Hc(f,e,g,d,l.depth);null!=c&&null!=c.success&&c.success.call(null,d)};a.a.c("JsonTreeDataSource.prototype.fetchChildren",{dd:a.ub.prototype.dd});
a.ub.prototype.lf=function(d,b,c){var f;d||(d=this.data.id);f=this.Zf(this.data,d);c=this.ez(f,c,[]);d=new a.Hc(0,c.length,c,d,f.depth);null!=b&&null!=b.success&&b.success.call(null,d)};a.a.c("JsonTreeDataSource.prototype.fetchDescendents",{lf:a.ub.prototype.lf});a.ub.prototype.move=function(a,b,c,f){var e;e=b;if(!e||e==this.data.id){if("inside"!=c){console.log("Error: root can not be the reference node if position equals to "+c);return}e||(e=this.data.id)}a=this.Zf(null,a);this.Zf(a,e)?console.log("Error: the node to move contains the reference node as its sub-tree."):
(b=this.Zf(null,e),e=this.Rp(e),this.QI(a),"inside"==c?(this.si(a,a.depth-(b.depth+1)),b.children.push(a)):"before"==c?(this.si(a,a.depth-b.depth),c=e.children.indexOf(b),-1<c&&(0!=c?e.children.splice(c-1,0,a):e.children.unshift(a))):"after"==c?(this.si(a,a.depth-b.depth),c=e.children.indexOf(b),-1<c&&e.children.splice(c,0,a)):"first"==c?(this.si(a,a.depth-b.depth),e.children.unshift(a)):"last"==c&&(this.si(a,a.depth-b.depth),e.children.push(a)),null!=f&&null!=f.success&&f.success.call(null,this.data))};
a.a.c("JsonTreeDataSource.prototype.move",{move:a.ub.prototype.move});a.ub.prototype.sort=function(a,b){var c;c=this.Zf(this.data,this.data.id);c.Qy(a);null!=b&&null!=b.success&&b.success.call(null,c)};a.a.c("JsonTreeDataSource.prototype.sort",{sort:a.ub.prototype.sort});a.ub.prototype.Rp=function(a,b){var c,f=null;if(a==this.data.id)return null;b||(b=this.data);if(b.children&&0<b.children.length){for(c=0;c<b.children.length;c++)if(b.children[c].id&&b.children[c].id==a||b.children[c].attr&&b.children[c].attr.id==
a)return b;for(c=0;c<b.children.length&&!(f=this.Rp(a,b.children[c]));c++);}return f};a.ub.prototype.Zf=function(a,b){var c,f=null;a||(a=this.data);if(a.id&&a.id==b||a.attr&&a.attr.id==b)return a;if(null!=a.children)for(c=0;c<a.children.length&&!f;c++)f=a.children[c].id&&a.children[c].id==b||a.children[c].attr&&a.children[c].attr.id==b?a.children[c]:this.Zf(a.children[c],b);return f};a.ub.prototype.si=function(a,b){var c;a.depth-=b;if(a.children&&0!=a.children.length)for(c=0;c<a.children.length;c++)this.si(a.children[c],
b)};a.ub.prototype.QI=function(a){var b;a.id?b=a.id:a.attr&&(b=a.attr.id);(b=this.Rp(b))||(b=this.data);a=b.children.indexOf(a);-1<a&&b.children.splice(a,1)};a.ub.prototype.ez=function(a,b,c){var f;b&&0>=b&&(b=null);if(null!=a.children){for(f=0;f<a.children.length&&(!b||c.length!=b);f++)c.push(a.children[f]),this.ez(a.children[f],b,c);return c}return null};a.k=function(d,b){a.k._init(this,d,b,null)};o_("RowSet",a.k,a);a.k.prototype.wf=1;a.a.c("RowSet.prototype.sortDirection",{wf:a.k.prototype.wf});
a.k.prototype.jf=null;a.a.c("RowSet.prototype.comparator",{jf:a.k.prototype.jf});a.k.prototype.ng=!0;a.a.c("RowSet.prototype.sortSupported",{ng:a.k.prototype.ng});a.a.ea(a.k,a.a,"RowSet.RowSet");a.k.prototype.i=function(){a.k.q.i.call(this)};a.k._init=function(a,b,c,f){var e;a.pb=[];a.N=0;a.i();if(f)for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);c=c||{};a.Za=[];null!=b&&void 0!==b&&(a.b=b instanceof Array?b:b(),b instanceof Array||b.MA(function(b){b=a.ew(b,null,null);a.reset(b);a.Ia.call(a,"change",
null)},null,"change"),a.Ld=a.b.length,a.Bw="id",null!=c&&null!=c.idAttribute&&(a.Bw=c.idAttribute))};a.k.prototype.add=function(a,b){b=b||{};var c=[],f=b.at,h=b.deferred,g=this;a instanceof Array?c=a:c.push(a);if(h){for(var l=function(b){var a=e.Deferred();g.Tt(c[b],f);return a.resolve().promise()},k=l(0),h=1;h<c.length;h++)k=k.then(l(h));return e.when(k).promise()}for(h=0;h<c.length;h++)this.Tt(c[h],f);return null};a.a.c("RowSet.prototype.add",{add:a.k.prototype.add});a.k.prototype.at=function(a,
b){b=b||{};if(0>a||a>=this.Za.length)return null;var c=this.Za[a];return b.deferred?e.Deferred().resolve(c).promise():c};a.a.c("RowSet.prototype.at",{at:a.k.prototype.at});a.k.prototype.clone=function(){var a=new this.constructor,b,c;for(b=0;b<this.Za.length;b+=1)(c=this.at(b,null))&&a.add(c.clone(),{at:b});return a};a.a.c("RowSet.prototype.clone",{clone:a.k.prototype.clone});a.k.prototype.fetch=function(a){a=a||{};if(this.vu()){this.Sy();var b=0<a.pageSize?a.pageSize:-1,c=this.N;this.N=null!=a?null!=
a.startIndex?a.startIndex:0:0;a=null;null!=this.Za&&(a=this.Za);this.Za=this.ew(this.b,this.Bw,this.N,b);null!=a&&(b=this.$D(a,this.Za,c,this.N,b),this.cn(b,a));this.Ae(!0)}};a.a.c("RowSet.prototype.fetch",{fetch:a.k.prototype.fetch});a.k.prototype.get=function(a,b){b=b||{};var c=b.deferred,f,h=null;for(f=0;f<this.Za.length;f+=1)if(h=this.Za[f],void 0!==h&&h.id==a){if(c)return e.Deferred().resolve(h);break}return h};a.a.c("RowSet.prototype.get",{get:a.k.prototype.get});a.k.prototype.hasMore=o_d(!1);
a.a.c("RowSet.prototype.hasMore",{hasMore:a.k.prototype.hasMore});a.k.prototype.indexOf=function(a,b){b=b||{};return b.deferred?this.get(a,null).then(function(b){return b.index}):this.get(a).index};a.a.c("RowSet.prototype.indexOf",{indexOf:a.k.prototype.indexOf});a.k.prototype.Dc=function(){return 0===this.Za.length};a.a.c("RowSet.prototype.isEmpty",{Dc:a.k.prototype.Dc});a.k.prototype.remove=function(a,b){b=b||{};var c=[],f;a instanceof Array?c=a:c.push(a);for(f=c.length-1;0<=f;f-=1)this.Xg(c[f],
-1,b)};a.a.c("RowSet.prototype.remove",{remove:a.k.prototype.remove});a.k.prototype.reset=function(d,b){var c;b=b||{};b.previousRows=this.Za;if(void 0===d||null==d||d instanceof Array&&0==d.length){for(c=0;c<this.Za.length;c+=1)this.Za[c]&&(this.Za[c].rowSet=null);this.Za=[]}else if(this.Za=[],b.parse&&(d=this.parse(d)),d instanceof Array)for(c=0;c<d.length;c+=1)this.add(d[c],b);else this.add(d,b);this.Ia(a.k.t.ADD,null)};a.a.c("RowSet.prototype.reset",{reset:a.k.prototype.reset});a.k.prototype.size=
function(){return this.Za.length};a.a.c("RowSet.prototype.size",{size:a.k.prototype.size});a.k.prototype.sort=function(){var d=this.comparator,b;this.Mm()&&(b=this,this.Za.sort(function(c,f){return a.k.DJ(c,f,d,b,b)}),this.wI(),this.Ia.call(this,a.k.t.SORT,null))};a.a.c("RowSet.prototype.sort",{sort:a.k.prototype.sort});a.k.prototype.totalSize=o_c("Ld");a.a.c("RowSet.prototype.totalSize",{totalSize:a.k.prototype.totalSize});a.k.prototype.on=function(a,b){var c=!1,f;for(f=0;f<this.pb.length;f++)if(this.pb[f].eventType==
a&&this.pb[f].eventHandlerFunc==b){c=!0;break}c||this.pb.push({eventType:a,eventHandlerFunc:b})};a.a.c("RowSet.prototype.on",{on:a.k.prototype.on});a.k.prototype.off=function(a,b){var c;for(c=0;c<this.pb.length;c++)if(this.pb[c].eventType==a&&this.pb[c].eventHandlerFunc==b){this.pb.remove(this.pb[c]);break}};a.a.c("RowSet.prototype.off",{off:a.k.prototype.off});a.k.prototype.Tt=function(d,b){void 0===b?this.Za.push(d):this.Za[b]=d;d.rowSet=this;d.index=this.Za.length;this.Ia(a.k.t.ADD,d)};a.k.prototype.Ia=
function(a,b){var c;for(c=0;c<this.pb.length;c++){var f=this.pb[c];f.eventType==a&&f.eventHandlerFunc(b)}};o_("RowSet.prototype._handleEvent",a.k.prototype.Ia,a);a.k.zg=function(a,b,c){if(-1===c){if(a<b)return 1;if(b<a)return-1}else{if(a>b)return 1;if(b>a)return-1}return 0};a.k.prototype.$D=function(d,b,c,f,e){var g=[];if(0<b.length){var l,k=0;for(l=0;l<d.length;l++)l<f?(g[k]={rowIdx:l,status:a.k.ob.Df},k++):0<e&&l>=f+e&&(g[k]={rowIdx:l,status:a.k.ob.Df},k++);for(l=0;l<b.length;l++)if(0<e&&l>=f&&
l<f+e||0>e){var m=d.length;if(l<c||l>m-1)g[k]={rowIdx:l,status:a.k.ob.wh},k++;else{var m=b[l],n=m.keys(),p=d[l],q=!1,r;for(r=0;r<n.length;r++)if(m.get(n[r]).toString()!=p.get(n[r]).toString()){g[k]={rowIdx:l,status:a.k.ob.Jl};q=!0;k++;break}q||(g[k]={rowIdx:l,status:a.k.ob.El},k++)}}}else for(l=0;l<d.length;l++)g[l]={rowIdx:d[l],status:a.k.ob.Df};return g};a.k.Cj=function(d,b){return d instanceof a.qa?d.get(b):e.isFunction(d[b])?d[b]():d[b]};a.k.prototype.ew=function(d,b,c,f){var e=d.length-1;0<f&&
(e=c+f-1);e=null!=e?e>d.length-1?d.length-1:e:d.length;c=[];var g;for(f=0;f<=e;f++){var l=[],k=null,k=d[f]instanceof a.qa?d[f].Me():d[f];for(g in k)k.hasOwnProperty(g)&&(l[g]=k[g]);l=new a.qa(l,{idAttribute:b});l.index=f;c[f]=l}return c};a.k.prototype.Sp=function(a){return void 0===a?[]:a.split(",")};a.k.prototype.Tp=function(){return-1===this.sortDirection?"dsc":"asc"};a.k.prototype.Mm=function(){var a=this.comparator;return void 0!==a&&null!==a};a.k.prototype.cn=function(d,b){var c=!0,f;for(f=0;f<
d.length;f++)if(d[f].status!=a.k.ob.El){c=!1;break}if(c)this.Ae(!1);else{c=!0;for(f=0;f<d.length;f++)if(d[f].status!=a.k.ob.wh){c=!1;break}if(c)this.Ae(!0);else{for(f=0;f<d.length;f++)c=d[f].rowIdx,d[f].status==a.k.ob.wh?this.Ia.call(this,a.k.t.ADD,this.Za[c]):d[f].status==a.k.ob.Df?this.Ia.call(this,a.k.t.REMOVE,b[c]):d[f].status==a.k.ob.Jl&&this.Ia.call(this,a.k.t.CHANGE,this.Za[c]);this.Ae(!1)}}};a.k.prototype.wI=function(){for(var a,b=0;b<this.Za.length;b++)(a=this.Za[b])&&(a.index=b)};a.k.prototype.Xg=
function(d,b,c){c=c||{};b=-1==b?this.get(d).index:b;var f=c.silent;-1<b&&(void 0!==d&&d.uL===this&&(d.uL=null),this.Za.splice(b,1),f||(c.index=b,void 0!==d&&this.Ia(a.k.t.REMOVE,d)));return d};a.k.DJ=function(d,b,c,f,h){var g,l,k;if(e.isFunction(c)){if(1===c.length){g=c.call(h,d);l=c.call(h,b);g=a.Xa.le(g)?g.split(","):[g];var m=a.Xa.le(l)?l.split(","):[l];for(k=0;k<g.length;k++)if(l=a.k.zg(g[k],m[k],f.sortDirection),0!==l)return l}return c.call(h,d,b)}if(a.Xa.le(c))for(c=c.split(","),k=0;k<c.length;k++)if(g=
a.k.Cj(d,c[k]),l=a.k.Cj(b,c[k]),l=a.k.zg(g,l,f.sortDirection),0!==l)return l;return 0};a.k.prototype.vu=function(){return!this.Lw};a.k.prototype.Sy=function(){this.Lw=!0;this.Ia.call(this,a.k.t.REQUEST,null)};a.k.prototype.Ae=function(d){this.Lw=!1;this.Ia.call(this,a.k.t.SYNC,d)};a.k.t={ADD:"add",REMOVE:"remove",RESET:"reset",SORT:"sort",CHANGE:"change",DESTROY:"destroy",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",ALL:"all"};o_("RowSet.EventType",a.k.t,a);a.k.ob={wh:"added",Df:"deleted",
Jl:"updated",El:"none"};o_("RowSet._ROW_STATUSES",a.k.ob,a);a.Vc=function(a,b){this.eL=a;this.Yb=b};o_("EmptyNodeSet",a.Vc,a);a.Vc.prototype.getParent=o_c("eL");a.a.c("EmptyNodeSet.prototype.getParent",{getParent:a.Vc.prototype.getParent});a.Vc.prototype.wa=o_c("Yb");a.a.c("EmptyNodeSet.prototype.getStart",{wa:a.Vc.prototype.wa});a.Vc.prototype.S=o_d(0);a.a.c("EmptyNodeSet.prototype.getCount",{S:a.Vc.prototype.S});a.Vc.prototype.getData=o_d(null);a.a.c("EmptyNodeSet.prototype.getData",{getData:a.Vc.prototype.getData});
a.Vc.prototype.getMetadata=o_d(null);a.a.c("EmptyNodeSet.prototype.getMetadata",{getMetadata:a.Vc.prototype.getMetadata});a.Hc=function(d,b,c,f,e){a.f.qb(d,null);a.f.qb(b,null);this.pN=e;this.dL=f;this.Rk=d;this.Mn=b;this.Ke=c};o_("JsonNodeSet",a.Hc,a);a.Hc.prototype.getParent=o_c("dL");a.a.c("JsonNodeSet.prototype.getParent",{getParent:a.Hc.prototype.getParent});a.Hc.prototype.wa=o_c("Rk");a.a.c("JsonNodeSet.prototype.getStart",{wa:a.Hc.prototype.wa});a.Hc.prototype.S=function(){return Math.max(0,
this.Mn-this.Rk)};a.a.c("JsonNodeSet.prototype.getCount",{S:a.Hc.prototype.S});a.Hc.prototype.getData=function(d){a.f.assert(d<=this.Mn&&d>=this.Rk);return this.Ke[d]?this.Ke[d].attr:null};a.a.c("JsonNodeSet.prototype.getData",{getData:a.Hc.prototype.getData});a.Hc.prototype.getData=function(d){a.f.assert(d<=this.Mn&&d>=this.Rk);return this.Ke[d]?this.Ke[d]:null};a.a.c("JsonNodeSet.prototype.getData",{getData:a.Hc.prototype.getData});a.Hc.prototype.getMetadata=function(d){var b=[];a.f.assert(d<=this.Mn&&
d>=this.Rk);b.key=this.Ke[d].id?this.Ke[d].id:this.Ke[d].attr.id;b.leaf=!0;b.depth=this.Ke[d].depth;this.Ke[d].children&&0<this.Ke[d].children.length&&(b.leaf=!1);return b};a.a.c("JsonNodeSet.prototype.getMetadata",{getMetadata:a.Hc.prototype.getMetadata});a.qa=function(d,b){a.qa._init(this,d,b,null)};o_("Row",a.qa,a);a.a.ea(a.qa,a.a,"Row.Row");a.qa.prototype.i=function(){a.qa.q.i.call(this)};a.qa.prototype.attributes={};a.a.c("Row.prototype.attributes",{attributes:a.qa.prototype.attributes});a.qa.prototype.id=
null;a.a.c("Row.prototype.id",{id:a.qa.prototype.id});a.qa.prototype.Fk=null;a.a.c("Row.prototype.idAttribute",{Fk:a.qa.prototype.Fk});a.qa._init=function(d,b,c,f){var e=null;d.i();d.index=-1;c=c||{};d.attributes={};for(e in f)f.hasOwnProperty(e)&&(d[e]=f[e]);if(b)if(b=a.qa.Ye(b,d.attributes),null==b||void 0===b)d.attributes={};else for(e in b)b.hasOwnProperty(e)&&d.Yg(e,b[e]);d.rowSet=c.rowSet;d.idAttribute=c.idAttribute;d.Nq()};a.qa.prototype.clone=function(){var d=new this.constructor,b;for(b in this)this.hasOwnProperty(b)&&
this[b]!==this.attributes&&(d[b]=this[b]);d.attributes=a.qa.Ye(this.attributes,null);d.Nq();return d};a.a.c("Row.prototype.clone",{clone:a.qa.prototype.clone});a.qa.prototype.get=function(a){return this.attributes[a]};a.a.c("Row.prototype.get",{get:a.qa.prototype.get});a.qa.prototype.set=function(d,b,c){var f={},e=!1;if(arguments&&0<arguments.length)if(1<arguments.length&&arguments[arguments.length-1]&&(e=!0,f=arguments[arguments.length-1]||{}),a.qa.Og(d))this.Yg(d,f);else for(f=0;f<arguments.length;f+=
2)(void 0!==arguments[f]||f<arguments.length-1||!e&&f===arguments.length-1)&&this.Yg(arguments[f],arguments[f+1]);return this};a.a.c("Row.prototype.set",{set:a.qa.prototype.set});a.qa.prototype.keys=function(){var a,b=[];for(a in this.attributes)this.attributes.hasOwnProperty(a)&&b.push(a);return b};a.a.c("Row.prototype.keys",{keys:a.qa.prototype.keys});a.qa.prototype.cl=function(){var a,b=[];for(a in this.attributes)this.attributes.hasOwnProperty(a)&&b.push(this.get(a));return b};a.a.c("Row.prototype.values",
{cl:a.qa.prototype.cl});a.qa.prototype.Me=function(){var a,b={};for(a in this.attributes)this.attributes.hasOwnProperty(a)&&(b[a]=this.get(a));return b};a.a.c("Row.prototype.pairs",{Me:a.qa.prototype.Me});a.qa.prototype.Np=function(){return this.idAttribute||"id"};a.qa.prototype.Am=function(a){return this[a]instanceof Function?this[a]():this[a]};a.qa.Og=function(a){var b;if(a&&a instanceof Object)for(b in a)if(a.hasOwnProperty(b))return!0;return!1};a.qa.prototype.Nq=function(){this.id=this.attributes[this.Np()]};
a.qa.prototype.Kq=function(d,b){return a.a.kh(this.attributes[d],b)?!1:(this.attributes[d]=b,this.Nq(),!0)};a.qa.prototype.Yg=function(a,b){if(null==a)return!0;var c={},f;if(2<arguments.length)c[a]=b;else for(f in a)a.hasOwnProperty(f)&&(c[f]=a[f]);for(f in c)c.hasOwnProperty(f)&&this.Kq(f,c[f]);return!0};a.qa.Ye=function(d,b){var c;b=b||{};for(c in d)d.hasOwnProperty(c)&&("object"!==typeof d[c]?b.hasOwnProperty(c)?void 0!==d[c]&&(b[c]=d[c]):b[c]=d[c]:b[c]=a.qa.Ye(d[c],null));return b};a.hc=function(a,
b){this.hb=a;this.Yb=b};o_("FlattenedNodeSet",a.hc,a);a.hc.prototype.getParent=function(){return this.hb.getParent()};a.a.c("FlattenedNodeSet.prototype.getParent",{getParent:a.hc.prototype.getParent});a.hc.prototype.wa=function(){return void 0!=this.Yb?this.Yb:this.hb.wa()};a.a.c("FlattenedNodeSet.prototype.getStart",{wa:a.hc.prototype.wa});a.hc.prototype.S=function(){void 0===this.Ln&&(this.Ln=this.Mv(this.hb,0),void 0!=this.Yb&&(this.Ln-=this.Yb));return this.Ln};a.a.c("FlattenedNodeSet.prototype.getCount",
{S:a.hc.prototype.S});a.hc.prototype.Mv=function(a,b){var c,f,e,g;c=a.wa();f=a.S();b+=f;if(a.gg)for(e=0;e<f;e++)g=a.gg(e+c),null!=g&&(b=this.Mv(g,b));return b};a.hc.prototype.getData=function(a){return this.Hp(this.hb,a,{index:this.hb.wa()},this.ra)};a.a.c("FlattenedNodeSet.prototype.getData",{getData:a.hc.prototype.getData});a.hc.prototype.getMetadata=function(a){return this.Hp(this.hb,a,{index:this.hb.wa()},this.OF)};a.a.c("FlattenedNodeSet.prototype.getMetadata",{getMetadata:a.hc.prototype.getMetadata});
a.hc.prototype.OF=function(a,b){return a.getMetadata(b)};a.hc.prototype.ra=function(a,b){return a.getData(b)};a.hc.prototype.Hp=function(a,b,c,f){var e,g,l,k;e=a.wa();g=a.S();for(l=0;l<g;l++){k=c.index;if(k===b)return f.call(this,a,l+e);c.index=k+1;if(a.gg&&(k=a.gg(l+e),null!=k&&(k=this.Hp(k,b,c,f),null!=k)))return k}return null};a.tb=function(d){a.tb.q.constructor.call(this,d)};o_("DataGridDataSource",a.tb,a);a.a.ea(a.tb,a.sc,"oj.DataGridDataSource");a.tb.prototype.S=o_d(0);a.a.c("DataGridDataSource.prototype.getCount",
{S:a.tb.prototype.S});a.tb.prototype.Qd=o_d("exact");a.a.c("DataGridDataSource.prototype.getCountPrecision",{Qd:a.tb.prototype.Qd});a.tb.prototype.Bc=function(){a.f.va()};a.a.c("DataGridDataSource.prototype.fetchHeaders",{Bc:a.tb.prototype.Bc});a.tb.prototype.Ac=function(){a.f.va()};a.a.c("DataGridDataSource.prototype.fetchCells",{Ac:a.tb.prototype.Ac});a.tb.prototype.keys=function(){a.f.va();return null};a.a.c("DataGridDataSource.prototype.keys",{keys:a.tb.prototype.keys});a.tb.prototype.Oc=function(){a.f.va();
return null};a.a.c("DataGridDataSource.prototype.indexes",{Oc:a.tb.prototype.Oc});a.tb.prototype.sort=function(){a.f.va()};a.a.c("DataGridDataSource.prototype.sort",{sort:a.tb.prototype.sort});a.tb.prototype.bb=o_d(null);a.a.c("DataGridDataSource.prototype.getCapability",{bb:a.tb.prototype.bb})});
//# sourceMappingURL=oj-modular.map