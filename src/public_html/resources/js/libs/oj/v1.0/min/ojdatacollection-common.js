define(["ojs/ojcore","jquery"],function(a,e){a.Hc=function(a){this.data=a;this.h()};o_("DataSource",a.Hc,a);a.a.aa(a.Hc,a.a,"oj.DataSource");a.Hc.prototype.h=function(){this.mb=[];a.Hc.j.h.call(this)};a.a.b("DataSource.prototype.Init",{h:a.Hc.prototype.h});a.Hc.prototype.on=function(a,b){var c=!1,f;for(f=0;f<this.mb.length;f++)if(this.mb[f].eventType==a&&this.mb[f].eventHandlerFunc==b){c=!0;break}c||this.mb.push({eventType:a,eventHandlerFunc:b})};a.a.b("DataSource.prototype.on",{on:a.Hc.prototype.on});
a.Hc.prototype.off=function(a,b){var c;for(c=this.mb.length-1;0<=c;c--)if(this.mb[c].eventType==a&&this.mb[c].eventHandlerFunc==b){this.mb.splice(c,1);break}};a.a.b("DataSource.prototype.off",{off:a.Hc.prototype.off});a.Hc.prototype.handleEvent=function(a,b){var c;for(c=0;c<this.mb.length;c++){var f=this.mb[c];f.eventType==a&&f.eventHandlerFunc(b)}};a.a.b("DataSource.prototype.handleEvent",{handleEvent:a.Hc.prototype.handleEvent});a.Rb=function(d){a.Rb.j.constructor.call(this,d)};o_("TreeDataSource",
a.Rb,a);a.a.aa(a.Rb,a.Hc,"oj.TreeDataSource");a.Rb.prototype.Me=o_d(-1);a.Rb.prototype.dd=function(){a.f.Q()};a.a.b("TreeDataSource.prototype.fetchChildren",{dd:a.Rb.prototype.dd});a.Rb.prototype.Kf=function(){a.f.Q()};a.a.b("TreeDataSource.prototype.fetchDescendents",{Kf:a.Rb.prototype.Kf});a.Rb.prototype.sort=function(){a.f.Q()};a.a.b("TreeDataSource.prototype.sort",{sort:a.Rb.prototype.sort});a.Rb.prototype.il=function(){return{key:null,direction:"none"}};a.a.b("TreeDataSource.prototype.getSortCriteria",
{il:a.Rb.prototype.il});a.Rb.prototype.move=function(){a.f.Q()};a.a.b("TreeDataSource.prototype.move",{move:a.Rb.prototype.move});a.Rb.prototype.Dl=o_d("valid");a.a.b("TreeDataSource.prototype.moveOK",{Dl:a.Rb.prototype.Dl});a.Rb.prototype.Ua=o_d(null);a.a.b("TreeDataSource.prototype.getCapability",{Ua:a.Rb.prototype.Ua});a.U=function(d,b){this.Uc=d;this.Bl=b;a.U.j.constructor.call(this)};o_("FlattenedTreeDataSource",a.U,a);a.a.aa(a.U,a.Hc,"oj.FlattenedTreeDataSource");a.U.prototype.h=function(){var d;
a.U.j.h.call(this);this.Uc.on("change",this.uI.bind(this));this.Of=parseInt(this.Bl.fetchSize,10);isNaN(this.Of)&&(this.Of=25);this.Pf=parseInt(this.Bl.maxCount,10);isNaN(this.Pf)&&(this.Pf=500);d=this.Bl.expanded;Array.isArray(d)?this.Nf=d:("all"===d&&(this.kj=[]),this.Nf=[]);this.Hg=[]};a.a.b("FlattenedTreeDataSource.prototype.Init",{h:a.U.prototype.h});a.U.prototype.handleEvent=function(d,b){a.U.j.handleEvent.call(this,d,b)};a.a.b("FlattenedTreeDataSource.prototype.handleEvent",{handleEvent:a.U.prototype.handleEvent});
a.U.prototype.Pl=function(){delete this.Hg;delete this.Nf;this.Uc.off("change");this.Uc.Pl&&this.Uc.Pl()};a.a.b("FlattenedTreeDataSource.prototype.Destory",{Pl:a.U.prototype.Pl});a.U.prototype.sB=o_c("Nf");a.a.b("FlattenedTreeDataSource.prototype.getExpandedKeys",{sB:a.U.prototype.sB});a.U.prototype.wo=function(a){return null!=this.Bl?this.Bl[a]:null};a.a.b("FlattenedTreeDataSource.prototype.getOption",{wo:a.U.prototype.wo});a.U.prototype.EB=o_c("Uc");a.U.prototype.hB=function(a,b){this.Hn()?this.MG(a,
b):this.LG(a,b)};a.U.prototype.LG=function(d,b){var c,f,e,g,l,k;if(d.start>this.mc()){c=this.Fq();if(0>this.mc()){d.count=Math.min(c,d.count);this.Uc.dd(null,d,{success:function(a){this.An(a,null,0,0,b)}.bind(this)});return}if(0<c){f=this.hx();e=f.parent;g=this.Uc.Me(e);l=f.index;k=f.depth;-1===g||l<g-1?(d.start=l+1,d.count=-1===g?this.Of:Math.min(c,Math.min(this.Of,g-d.start)),this.Uc.dd(e,d,{success:function(a){this.An(a,e,k,g,b)}.bind(this)})):l===g-1?(c=new a.Xc(null,d.start),null!=b&&null!=b.success&&
b.success.call(null,c)):(c=this.Hw(e,k,b,c),c||(c=new a.Xc(null,d.start),null!=b&&null!=b.success&&b.success.call(null,c)));return}}this.Cs(d,b)};a.U.prototype.Fq=function(){return this.Pf-(this.mc()+1)};a.U.prototype.An=function(d,b,c,f,e){var g;g=[];d=new a.xc(d,this.ol.bind(this));this.gK(d,b,c,g);-1===f&&0===d.R()&&null!=b&&0<c?(b=this.Hw(b,c,e))||null!=e&&null!=e.success&&e.success.call(null,d):(null!=e&&null!=e.success&&e.success.call(null,d),this.Dw(g))};a.U.prototype.Hw=function(a,b,c,f){var e,
g,l,k,n,m,p,q;void 0===f&&(f=this.Fq());this.fy()&&(e={queueOnly:!0});g=this.Of;for(l=this.mc()-1;0<=l;l--)if(k=this.Cd(l),n=k.depth,n<b&&(a=k.parent,m=this.Uc.Me(a),k=k.index,(p=-1===m)||k<m-1)){q={};q.start=k+1;p?(q.count=Math.min(f,Math.max(0,g)),e=void 0):q.count=Math.min(f,Math.min(g,m-q.start));if(0==q.count)break;this.Uc.dd(a,q,{success:function(b){this.An(b,a,n,m,c)}.bind(this)},e);b=n;g=Math.max(0,g-q.count);if(p||0===n||0===g)break}void 0!=e&&this.Uc.dd(a,{start:q.count,count:0},{success:function(b){this.An(b,
a,n,m,c)}.bind(this)});return g!=this.Of};a.U.prototype.gK=function(a,b,c,f){var e,g,l,k;e=a.pa();g=a.R();for(l=0;l<g;l++)k=a.getMetadata(e+l),k=k.key,this.Bm(k,c,e+l,b),this.In(k)&&f.push(k)};a.U.prototype.ol=function(a,b){this.In(a)&&!b.leaf?b.state="expanded":b.state=b.leaf?"leaf":"collapsed"};a.U.prototype.MG=function(a,b){var c={maxCount:this.Pf};0<=this.mc()&&(c.start=this.Cd(this.mc()).key);this.Uc.Kf(null,null,{success:function(c){this.fI(c,a,b)}.bind(this)},c)};a.U.prototype.fI=function(d,
b,c){var f,e,g;b.start>this.mc()?(f=this.Fq(),e=Math.min(f,b.count),d=new a.xc(d,this.ol.bind(this)),0<=this.mc()?(g=this.hx(),f={index:0,found:!1,count:0},this.wr(d,null,0,g,e,f),e=f.index+1):(f={count:0},this.wr(d,null,0,null,e,f),e=0),null!=c&&null!=c.success&&(d=null!=f?0===f.count?new a.Xc(null,b.start):new a.tc(d,e):new a.tc(d),c.success.call(null,d))):this.Cs(b,c)};a.U.prototype.wr=function(a,b,c,f,e,g){var l,k,n,m,p;l=a.pa();k=a.R();for(n=0;n<k&&g.count!=e;n++){m=a.getMetadata(l+n);p=m.key;
g.checkDepth&&f.depth===c&&(g.found=!0,g.checkDepth=!1);if(null==f||g.found)this.Bm(p,c,l+n,b),g.count+=1,m.state=m.leaf?"leaf":"expanded";null==f||g.found||(p===f.key?m.leaf||this.In(p)?g.found=!0:g.checkDepth=!0:g.index+=1);a.Sc&&(m=a.Sc(n),null!=m&&this.wr(m,p,c+1,f,e,g))}};a.U.prototype.expand=function(a){this.xf(a)};a.a.b("FlattenedTreeDataSource.prototype.expand",{expand:a.U.prototype.expand});a.U.prototype.xf=function(a){var b,c,f;b=this.Uc.Me(a);c=Math.min(this.Of,-1==b?this.Of:b);if(this.mc()+
1===this.Pf&&(f=this.gj(a),f==this.Pf-1))return;0!=c&&(this.Uc.dd(a,{start:0,count:c},{success:function(c){this.PM(a,c,b)}.bind(this)},{success:this}),this.handleEvent("expand",{rowKey:a}))};a.U.prototype.collapse=function(a){var b,c,f,e,g;b=this.gj(a)+1;c=this.Cd(b-1);f=0;c=c.depth;e=this.mc();for(g=b;g<e+1;g++){var l=this.Cd(g).depth;if(l>c)f+=1;else if(l==c)break}if(0!=f){this.Hn()?this.kj.push(a):this.HK(a);e=[];for(c=0;c<f;c++)e.push({row:this.Cd(b+c).key});this.qz(b,f);this.ct(e);this.handleEvent("collapse",
{rowKey:a})}};a.a.b("FlattenedTreeDataSource.prototype.collapse",{collapse:a.U.prototype.collapse});a.U.prototype.In=function(a){return this.Hn()?this.kj&&0<this.kj.length?-1===this.Qw(a):!0:this.Nf&&0<this.Nf.length?-1<this.bx(a):!1};a.U.prototype.Qw=function(a){return this.gx(this.kj,a)};a.U.prototype.bx=function(a){return this.gx(this.Nf,a)};a.U.prototype.gx=function(a,b){var c,f;f=-1;for(c=0;c<a.length;c++)a[c]===b&&(f=c);return f};a.U.prototype.HK=function(a){a=this.bx(a);-1<a&&this.Nf.splice(a,
1)};a.U.prototype.EK=function(a){a=this.Qw(a);-1<a&&this.kj.splice(a,1)};a.U.prototype.PM=function(d,b,c){var f,e,g,l,k,n,m,p,q;b=new a.xc(b,this.ol.bind(this));e=f=this.gj(d)+1;g=b.pa();l=b.R();k=this.Cd(f-1);n=k.depth+1;p=[];for(q=g;q<l;q++)g=b.getMetadata(q),m=g.key,this.In(m)&&p.push(m),this.by(f,g,k.key,q,n),f++;this.Hn()?this.EK(d):-1===this.Nf.indexOf(d)&&this.Nf.push(d);this.LB(e,d,b);-1===c&&l===this.Of||c>l||f==this.Pf?this.aq(f):this.mc()>=this.Pf&&this.aq(this.Pf);this.Dw(p)};a.U.prototype.Dw=
function(a){var b,c;this.fy()&&(b={queueOnly:!0});for(c=0;c<a.length;c++)c==a.length-1?this.xf(a[c]):this.xf(a[c],b)};a.U.prototype.by=function(a,b,c,f,e){b=b.key;a<=this.mc()?this.Bm(b,e,f,c,a):this.Bm(b,e,f,c)};a.U.prototype.aq=function(a,b){var c;void 0==b&&(b=this.mc()+1-a);c=[];for(var f=0;f<b;f++)c.push({row:this.Cd(a+f).key});this.qz(a,b);this.ct(c)};a.U.prototype.uI=function(a){var b,c,f;b=a.operation;c=a.parent;c=Array.isArray(c)?c[c.length-1]:c;f=a.index;"insert"===b?this.hI(c,f,a.data):
"delete"===b?this.dI(c,f):"refresh"===b&&this.wI(c)};a.U.prototype.hI=function(a,b,c){var f,e;f=this.gj(a);e=this.Cd(f).depth+1;f=f+b+1;c=c.getMetadata(c.pa());this.by(f,c,a,b,e)};a.U.prototype.dI=function(d,b){var c,f,e,g,l;c=this.gj(d);f=this.Cd(c);c+=b;e=this.Cd(c);a.f.assert(e.parent===f&&e.depth===f.depth+1);f=c+1;for(g=this.mc();f<=g;){l=this.Cd(f);if(l.depth!=e.depth)break;f++}this.aq(c,1)};a.U.prototype.wI=function(a){null==a&&this.refresh()};a.U.prototype.Hn=function(){var a=this.Uc.Ua("fetchDescendents");
return void 0!=this.kj&&null!=a&&"disable"!=a};a.U.prototype.fy=function(){return"enable"===this.Uc.Ua("batchFetch")};a.U.prototype.refresh=function(){this.uF()};a.U.prototype.gj=function(a){var b,c,f;b=this.mc();for(c=0;c<=b;c++)if(f=this.Cd(c),f.key==a)return c;return-1};a.U.prototype.getKey=function(a){return 0>a||a>this.mc()?null:this.Cd(a).key};a.U.prototype.GM=function(){return{start:0,end:this.mc()+1}};a.U.prototype.Cs=function(a,b){null!=b&&null!=b.error&&b.error.call(null)};a.U.prototype.LB=
function(){a.f.Q()};a.U.prototype.ct=function(){a.f.Q()};a.U.prototype.mc=function(){return this.Hg.length-1};a.U.prototype.hx=function(){return this.Hg[this.mc()]};a.U.prototype.Cd=function(a){return this.Hg[a]};a.U.prototype.Bm=function(a,b,c,f,e){var g={};g.key=a;g.depth=b;g.index=c;g.parent=f;void 0===e?this.Hg.push(g):this.Hg.splice(e,0,g)};a.U.prototype.qz=function(a,b){this.Hg.splice(a,b)};a.U.prototype.uF=function(){this.Hg.length=0};a.ai=function(){this.id=null;this.depth=0;this.parent=null;
this.children=[];this.Qs=this.attr=this.title=null};a.ai.prototype.YE=function(a){return function(b,c){return b.attr&&c.attr&&b.attr[a]&&c.attr[a]?b.attr[a]<c.attr[a]?0:1:b[a]<c[a]?0:1}};a.ai.prototype.vG=function(a){return function(b,c){return b.attr&&c.attr&&b.attr[a]&&c.attr[a]?b.attr[a]<c.attr[a]?1:0:b[a]<c[a]?1:0}};a.ai.prototype.mA=function(a){var b=a.key;"ascending"===a.direction?this.children.sort(this.YE(b)):"descending"===a.direction&&this.children.sort(this.vG(b));for(var b=0,c=this.children.length;b<
c;b++)this.children[b].mA(a)};a.wb=function(d){var b;b=new a.ai;d.id||(b.id="root");this.data=this.ew(b,d);a.wb.j.constructor.call(this,b)};o_("JsonTreeDataSource",a.wb,a);a.a.aa(a.wb,a.Rb,"oj.JsonTreeDataSource");a.wb.prototype.h=function(){a.wb.j.h.call(this)};a.a.b("JsonTreeDataSource.prototype.Init",{h:a.wb.prototype.h});a.wb.prototype.ew=function(d,b,c){var f,e,g,l,k,n,m;c||(c=0);for(l in b)if("children"==l||0==c&&b instanceof Array)for(f=0==c&&b instanceof Array?b:b[l],c++,m=0;m<f.length;m++){g=
f[m];e=new a.ai;g.id||(g.attr?g.attr.id||(g.attr.id="rid_"+Math.floor(1E3*Math.random()+1)):e.id="rid_"+Math.floor(1E3*Math.random()+1));for(k in g)for(n in e)k==n&&"children"!=k&&(e[n]=g[k]),"depth"==n&&(e[n]=c);d.children.push(e);for(n in g)"children"==n&&this.ew(d.children[m],g,c)}return d};a.wb.prototype.Me=function(a){a||(a=this.data.id);a=this.xg(this.data,a);return a.children?a.children.length:null};a.a.b("JsonTreeDataSource.prototype.getChildCount",{Me:a.wb.prototype.Me});a.wb.prototype.dd=
function(d,b,c){var f,e,g,l,k;g=[];d||(d=this.data.id);l=this.xg(this.data,d);b||(b=[],b.start=0,b.count=l.children.length);b.count||(b.count=l.children.length);b.start||(b.start=0);f=b.start;e=Math.min(l.children.length,f+b.count);for(b=f;b<e;b+=1)k=new a.ai,l.children[b].attr&&(k.attr=l.children[b].attr),l.children[b].id&&(k.id=l.children[b].id),l.children[b].depth&&(k.depth=l.children[b].depth),l.children[b].title&&(k.title=l.children[b].title),l.children[b].parent&&(k.parent=l.children[b].parent),
k.Qs=0<l.children[b].children.length?!1:!0,g.push(k);d=new a.wc(f,e,g,d,l.depth);null!=c&&null!=c.success&&c.success.call(null,d)};a.a.b("JsonTreeDataSource.prototype.fetchChildren",{dd:a.wb.prototype.dd});a.wb.prototype.Kf=function(d,b,c){var f,e,g;e=[];d||(d=this.data.id);g=this.xg(this.data,d);b||(b=[],b.start=0,b.count=g.children.length);b.count||(b.count=g.children.length);b.start||(b.start=0);f=b.start;for(b=Math.min(g.children.length,f+b.count);f<b;f+=1)g.children[f].Qs=0<g.children[f].children.length?
!1:!0,e.push(g.children[f]);d=new a.wc(0,e.length,e,d,g.depth);null!=c&&null!=c.success&&c.success.call(null,d)};a.a.b("JsonTreeDataSource.prototype.fetchDescendents",{Kf:a.wb.prototype.Kf});a.wb.prototype.move=function(a,b,c,f){var e;e=b;if(!e||e==this.data.id){if("inside"!=c){console.log("Error: root can not be the reference node if position equals to "+c);return}e||(e=this.data.id)}a=this.xg(null,a);this.xg(a,e)?console.log("Error: the node to move contains the reference node as its sub-tree."):
(b=this.xg(null,e),e=this.Jq(e),this.IK(a),"inside"==c?(this.Gf(a,a.depth-(b.depth+1)),b.children.push(a)):"before"==c?(this.Gf(a,a.depth-b.depth),c=e.children.indexOf(b),-1<c&&(0!=c?e.children.splice(c-1,0,a):e.children.unshift(a))):"after"==c?(this.Gf(a,a.depth-b.depth),c=e.children.indexOf(b),-1<c&&e.children.splice(c,0,a)):"first"==c?(this.Gf(a,a.depth-b.depth),e.children.unshift(a)):"last"==c&&(this.Gf(a,a.depth-b.depth),e.children.push(a)),null!=f&&null!=f.success&&f.success.call(null,this.data))};
a.a.b("JsonTreeDataSource.prototype.move",{move:a.wb.prototype.move});a.wb.prototype.sort=function(a,b){var c;c=this.xg(this.data,this.data.id);c.mA(a);null!=b&&null!=b.success&&b.success.call(null,c)};a.a.b("JsonTreeDataSource.prototype.sort",{sort:a.wb.prototype.sort});a.wb.prototype.Jq=function(a,b){var c,f=null;if(a==this.data.id)return null;b||(b=this.data);if(b.children&&0<b.children.length){for(c=0;c<b.children.length;c++)if(b.children[c].id&&b.children[c].id==a||b.children[c].attr&&b.children[c].attr.id==
a)return b;for(c=0;c<b.children.length&&!(f=this.Jq(a,b.children[c]));c++);}return f};a.wb.prototype.xg=function(a,b){var c,f=null;a||(a=this.data);if(a.id&&a.id==b||a.attr&&a.attr.id==b)return a;if(null!=a.children)for(c=0;c<a.children.length&&!f;c++)f=a.children[c].id&&a.children[c].id==b||a.children[c].attr&&a.children[c].attr.id==b?a.children[c]:this.xg(a.children[c],b);return f};a.wb.prototype.Gf=function(a,b){var c;a.depth-=b;if(a.children&&0!=a.children.length)for(c=0;c<a.children.length;c++)this.Gf(a.children[c],
b)};a.wb.prototype.IK=function(a){var b;a.id?b=a.id:a.attr&&(b=a.attr.id);(b=this.Jq(b))||(b=this.data);a=b.children.indexOf(a);-1<a&&b.children.splice(a,1)};a.wb.prototype.Ua=function(a){return"fetchDescendents"===a?"enable":"sort"===a?"default":"batchFetch"===a?"disable":null};a.a.b("JsonTreeDataSource.prototype.getCapability",{Ua:a.wb.prototype.Ua});a.La=function(d,b){a.La._init(this,d,b,null)};o_("Row",a.La,a);a.a.aa(a.La,a.a,"Row.Row");a.La.prototype.h=function(){a.La.j.h.call(this)};a.La.prototype.attributes=
{};a.a.b("Row.prototype.attributes",{attributes:a.La.prototype.attributes});a.La.prototype.context={};a.a.b("Row.prototype.context",{context:a.La.prototype.context});a.La.prototype.id=null;a.a.b("Row.prototype.id",{id:a.La.prototype.id});a.La.prototype.Kd=null;a.a.b("Row.prototype.idAttribute",{Kd:a.La.prototype.Kd});a.La._init=function(a,b,c,f){b=null;a.h();a.index=-1;c=c||{};a.attributes={};for(b in f)f.hasOwnProperty(b)&&(a[b]=f[b]);a.rowSet=c.rowSet;a.context=c.context};a.La.prototype.clone=function(){a.f.Q();
return null};a.a.b("Row.prototype.clone",{clone:a.La.prototype.clone});a.La.prototype.get=function(){a.f.Q();return null};a.a.b("Row.prototype.get",{get:a.La.prototype.get});a.La.prototype.set=function(){a.f.Q();return null};a.a.b("Row.prototype.set",{set:a.La.prototype.set});a.La.prototype.keys=function(){a.f.Q();return null};a.a.b("Row.prototype.keys",{keys:a.La.prototype.keys});a.La.prototype.re=function(){a.f.Q();return null};a.a.b("Row.prototype.values",{re:a.La.prototype.re});a.La.prototype.Cc=
function(){a.f.Q();return null};a.a.b("Row.prototype.pairs",{Cc:a.La.prototype.Cc});a.l=function(d,b){a.l._init(this,d,b,null)};o_("RowSet",a.l,a);a.l.prototype.oe=1;a.a.b("RowSet.prototype.sortDirection",{oe:a.l.prototype.oe});a.l.prototype.ee=null;a.a.b("RowSet.prototype.comparator",{ee:a.l.prototype.ee});a.l.prototype.Se=!0;a.a.b("RowSet.prototype.sortSupported",{Se:a.l.prototype.Se});a.a.aa(a.l,a.a,"RowSet.RowSet");a.l.prototype.h=function(){a.l.j.h.call(this)};a.l._init=function(a,b,c,f){var e;
a.mb=[];a.h();if(f)for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e])};a.l.prototype.at=function(){a.f.Q();return null};a.a.b("RowSet.prototype.at",{at:a.l.prototype.at});a.l.prototype.fetch=function(){a.f.Q()};a.a.b("RowSet.prototype.fetch",{fetch:a.l.prototype.fetch});a.l.prototype.get=function(){a.f.Q();return null};a.a.b("RowSet.prototype.get",{get:a.l.prototype.get});a.l.prototype.hasMore=function(){a.f.Q();return!1};a.a.b("RowSet.prototype.hasMore",{hasMore:a.l.prototype.hasMore});a.l.prototype.indexOf=
function(){a.f.Q();return 0};a.a.b("RowSet.prototype.indexOf",{indexOf:a.l.prototype.indexOf});a.l.prototype.ob=function(){a.f.Q();return!0};a.a.b("RowSet.prototype.isEmpty",{ob:a.l.prototype.ob});a.l.prototype.size=function(){a.f.Q();return 0};a.a.b("RowSet.prototype.size",{size:a.l.prototype.size});a.l.prototype.sort=function(){a.f.Q()};a.a.b("RowSet.prototype.sort",{sort:a.l.prototype.sort});a.l.prototype.totalSize=function(){a.f.Q();return 0};a.a.b("RowSet.prototype.totalSize",{totalSize:a.l.prototype.totalSize});
a.l.prototype.on=function(a,b){var c=!1,f;for(f=0;f<this.mb.length;f++)if(this.mb[f].eventType==a&&this.mb[f].eventHandlerFunc==b){c=!0;break}c||this.mb.push({eventType:a,eventHandlerFunc:b})};a.a.b("RowSet.prototype.on",{on:a.l.prototype.on});a.l.prototype.off=function(a,b){var c;for(c=0;c<this.mb.length;c++)if(this.mb[c].eventType==a&&this.mb[c].eventHandlerFunc==b){this.mb.remove(this.mb[c]);break}};a.a.b("RowSet.prototype.off",{off:a.l.prototype.off});a.l.prototype.Ha=function(a,b){var c;for(c=
0;c<this.mb.length;c++){var f=this.mb[c];f.eventType==a&&f.eventHandlerFunc(b)}};o_("RowSet.prototype._handleEvent",a.l.prototype.Ha,a);a.l.q={ADD:"add",REMOVE:"remove",RESET:"reset",SORT:"sort",CHANGE:"change",DESTROY:"destroy",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",ALL:"all"};o_("RowSet.EventType",a.l.q,a);a.l.xb={Zh:"added",bg:"deleted",ym:"updated",sm:"none"};o_("RowSet._ROW_STATUSES",a.l.xb,a);a.wa=function(d,b){a.wa._init(this,d,b,null)};o_("ArrayRow",a.wa,a);a.a.aa(a.wa,
a.La,"ArrayRow.ArrayRow");a.wa.prototype.h=function(){a.wa.j.h.call(this)};a.wa.prototype.attributes={};a.a.b("ArrayRow.prototype.attributes",{attributes:a.wa.prototype.attributes});a.wa.prototype.id=null;a.a.b("ArrayRow.prototype.id",{id:a.wa.prototype.id});a.wa.prototype.Kd=null;a.a.b("ArrayRow.prototype.idAttribute",{Kd:a.wa.prototype.Kd});a.wa._init=function(a,b,c,f){var e=null;a.h();a.index=-1;c=c||{};a.attributes=b;for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);a.idAttribute=c.idAttribute;a.context=
c.context;a.Nr()};a.wa.prototype.clone=function(){var d=new this.constructor,b;for(b in this)this.hasOwnProperty(b)&&this[b]!==this.attributes&&(d[b]=this[b]);d.attributes=a.wa.gg(this.attributes,null);d.Nr();return d};a.a.b("ArrayRow.prototype.clone",{clone:a.wa.prototype.clone});a.wa.prototype.get=function(a){return this.attributes[a]};a.a.b("ArrayRow.prototype.get",{get:a.wa.prototype.get});a.wa.prototype.set=function(d,b,c){var f={},e=!1;if(arguments&&0<arguments.length)if(1<arguments.length&&
arguments[arguments.length-1]&&(e=!0,f=arguments[arguments.length-1]||{}),a.wa.ph(d))this.Ri(d,f);else for(f=0;f<arguments.length;f+=2)(void 0!==arguments[f]||f<arguments.length-1||!e&&f===arguments.length-1)&&this.Ri(arguments[f],arguments[f+1]);return this};a.a.b("ArrayRow.prototype.set",{set:a.wa.prototype.set});a.wa.prototype.keys=function(){var a,b=[];for(a in this.attributes)this.attributes.hasOwnProperty(a)&&b.push(a);return b};a.a.b("ArrayRow.prototype.keys",{keys:a.wa.prototype.keys});a.wa.prototype.re=
function(){var a,b=[];for(a in this.attributes)this.attributes.hasOwnProperty(a)&&b.push(this.get(a));return b};a.a.b("ArrayRow.prototype.values",{re:a.wa.prototype.re});a.wa.prototype.Cc=function(){var a,b={};for(a in this.attributes)this.attributes.hasOwnProperty(a)&&(b[a]=this.get(a));return b};a.a.b("ArrayRow.prototype.pairs",{Cc:a.wa.prototype.Cc});a.wa.prototype.Cq=function(){return this.idAttribute||"id"};a.wa.prototype.rn=function(a){return this[a]instanceof Function?this[a]():this[a]};a.wa.ph=
function(a){var b;if(a&&a instanceof Object)for(b in a)if(a.hasOwnProperty(b))return!0;return!1};a.wa.prototype.Nr=function(){this.id=this.attributes[this.Cq()]};a.wa.prototype.Kr=function(d,b){return a.a.Ph(this.attributes[d],b)?!1:(this.attributes[d]=b,this.Nr(),!0)};a.wa.prototype.Ri=function(a,b){if(null==a)return!0;var c={},f;if(1<arguments.length)c[a]=b;else for(f in a)a.hasOwnProperty(f)&&(c[f]=a[f]);for(f in c)c.hasOwnProperty(f)&&this.Kr(f,c[f]);return!0};a.wa.gg=function(d,b){var c;b=b||
{};for(c in d)d.hasOwnProperty(c)&&("object"!==typeof d[c]?b.hasOwnProperty(c)?void 0!==d[c]&&(b[c]=d[c]):b[c]=d[c]:b[c]=a.wa.gg(d[c],null));return b};a.L=function(d,b){a.L._init(this,d,b,null)};o_("ArrayRowSet",a.L,a);a.L.prototype.oe=1;a.a.b("ArrayRowSet.prototype.sortDirection",{oe:a.L.prototype.oe});a.L.prototype.ee=null;a.a.b("ArrayRowSet.prototype.comparator",{ee:a.L.prototype.ee});a.L.prototype.Se=!0;a.a.b("ArrayRowSet.prototype.sortSupported",{Se:a.L.prototype.Se});a.a.aa(a.L,a.l,"ArrayRowSet.ArrayRowSet");
a.L.prototype.h=function(){a.L.j.h.call(this)};a.L._init=function(a,b,c,f){var e;a.mb=[];a.K=0;a.h();if(f)for(e in f)f.hasOwnProperty(e)&&(a[e]=f[e]);c=c||{};a.hb=[];null!=b&&void 0!==b&&(a.c=b instanceof Array?b:b(),b instanceof Array||b.LN(function(b){b=a.rx(b,null,null);a.reset(b);a.j.Ha.call(a,"change",null)},null,"change"),a.de=a.c.length,a.Tx="id",null!=c&&null!=c.idAttribute&&(a.Tx=c.idAttribute))};a.L.prototype.add=function(a,b){b=b||{};var c=b.deferred;this.QE(a,b.at);return c?e.Deferred().resolve().promise():
null};a.a.b("ArrayRowSet.prototype.add",{add:a.L.prototype.add});a.L.prototype.at=function(a,b){b=b||{};if(0>a||a>=this.hb.length)return null;var c=this.hb[a];return b.deferred?e.Deferred().resolve(c).promise():c};a.a.b("ArrayRowSet.prototype.at",{at:a.L.prototype.at});a.L.prototype.clone=function(){var a=new this.constructor,b,c;for(b=0;b<this.hb.length;b+=1)(c=this.at(b,null))&&a.add(c.clone(),{at:b});return a};a.a.b("ArrayRowSet.prototype.clone",{clone:a.L.prototype.clone});a.L.prototype.fetch=
function(a){a=a||{};if(this.Jp()){this.Pr();var b=0<a.pageSize?a.pageSize:-1,c=this.K;this.K=null!=a?null!=a.startIndex?a.startIndex:0:0;a=null;null!=this.hb&&(a=this.hb);this.hb=this.rx(this.c,this.Tx,this.K,b);null!=a&&(b=this.DF(a,this.hb,c,this.K,b),this.Tn(b,a));this.ye(!0)}};a.a.b("ArrayRowSet.prototype.fetch",{fetch:a.L.prototype.fetch});a.L.prototype.get=function(a,b){b=b||{};var c=b.deferred,f,h=null;for(f=0;f<this.hb.length;f+=1)if(h=this.hb[f],void 0!==h&&h.id==a){if(c)return e.Deferred().resolve(h);
break}return h};a.a.b("ArrayRowSet.prototype.get",{get:a.L.prototype.get});a.L.prototype.hasMore=o_d(!1);a.a.b("ArrayRowSet.prototype.hasMore",{hasMore:a.L.prototype.hasMore});a.L.prototype.indexOf=function(a,b){b=b||{};return b.deferred?this.get(a.id,null).then(function(a){return a.index}):this.get(a.id).index};a.a.b("ArrayRowSet.prototype.indexOf",{indexOf:a.L.prototype.indexOf});a.L.prototype.ob=function(){return 0===this.hb.length};a.a.b("ArrayRowSet.prototype.isEmpty",{ob:a.L.prototype.ob});
a.L.prototype.remove=function(a,b){b=b||{};this.Ah(a,-1,b)};a.a.b("ArrayRowSet.prototype.remove",{remove:a.L.prototype.remove});a.L.prototype.reset=function(d,b){var c;b=b||{};b.previousRows=this.hb;if(void 0===d||null==d||d instanceof Array&&0==d.length){for(c=0;c<this.hb.length;c+=1)this.hb[c]&&(this.hb[c].rowSet=null);this.hb=[]}else if(this.hb=[],d instanceof Array)for(c=0;c<d.length;c+=1)this.add(d[c],b);else this.add(d,b);a.L.j.Ha.call(this,a.l.q.RESET,null)};a.a.b("ArrayRowSet.prototype.reset",
{reset:a.L.prototype.reset});a.L.prototype.size=function(){return this.hb.length};a.a.b("ArrayRowSet.prototype.size",{size:a.L.prototype.size});a.L.prototype.sort=function(){var d=this.comparator,b;this.Cn()&&(b=this,this.hb.sort(function(c,f){return a.L.yL(c,f,d,b,b)}),this.pK(),a.L.j.Ha.call(this,a.l.q.SORT,null))};a.a.b("ArrayRowSet.prototype.sort",{sort:a.L.prototype.sort});a.L.prototype.totalSize=o_c("de");a.a.b("ArrayRowSet.prototype.totalSize",{totalSize:a.L.prototype.totalSize});a.L.prototype.QE=
function(d,b){void 0===b?this.hb.push(d):this.hb[b]=d;d.rowSet=this;d.index=this.hb.length;a.L.j.Ha.call(this,a.l.q.ADD,{rowIdx:b,row:d})};a.L.Zg=function(a,b,c){if(-1===c){if(a<b)return 1;if(b<a)return-1}else{if(a>b)return 1;if(b>a)return-1}return 0};a.L.prototype.DF=function(d,b,c,f,e){var g=[];if(0<b.length){var l,k=0;for(l=0;l<d.length;l++)l<f?(g[k]={rowIdx:l,status:a.l.xb.bg},k++):0<e&&l>=f+e&&(g[k]={rowIdx:l,status:a.l.xb.bg},k++);for(l=0;l<b.length;l++)if(0<e&&l>=f&&l<f+e||0>e){var n=d.length;
if(l<c||l>n-1)g[k]={rowIdx:l,status:a.l.xb.Zh},k++;else{var n=b[l],m=n.keys(),p=d[l],q=!1,r;for(r=0;r<m.length;r++)if(n.get(m[r]).toString()!=p.get(m[r]).toString()){g[k]={rowIdx:l,status:a.l.xb.ym};q=!0;k++;break}q||(g[k]={rowIdx:l,status:a.l.xb.sm},k++)}}}else for(l=0;l<d.length;l++)g[l]={rowIdx:d[l],status:a.l.xb.bg};return g};a.L.ek=function(d,b){return d instanceof a.La?d.get(b):e.isFunction(d[b])?d[b]():d[b]};a.L.prototype.rx=function(d,b,c,f){var e=d.length-1;0<f&&(e=c+f-1);e=null!=e?e>d.length-
1?d.length-1:e:d.length;c=[];var g;for(f=0;f<=e;f++){var l=[],k=null,k=d[f]instanceof a.La?d[f].Cc():d[f];for(g in k)k.hasOwnProperty(g)&&(l[g]=k[g]);l=new a.wa(l,{idAttribute:b});l.index=f;c[f]=l}return c};a.L.prototype.Kq=function(a){return void 0===a?[]:a.split(",")};a.L.prototype.Lq=function(){return-1===this.sortDirection?"dsc":"asc"};a.L.prototype.Cn=function(){var a=this.comparator;return void 0!==a&&null!==a};a.L.prototype.Tn=function(d,b){var c=!0,f;for(f=0;f<d.length;f++)if(d[f].status!=
a.l.xb.sm){c=!1;break}if(c)this.ye(!1);else{c=!0;for(f=0;f<d.length;f++)if(d[f].status!=a.l.xb.Zh){c=!1;break}if(c)this.ye(!0);else{for(f=0;f<d.length;f++)c=d[f].rowIdx,d[f].status==a.l.xb.Zh?a.L.j.Ha.call(this,a.l.q.ADD,{rowIdx:c,row:this.hb[c]}):d[f].status==a.l.xb.bg?a.L.j.Ha.call(this,a.l.q.REMOVE,{rowIdx:c,row:b[c]}):d[f].status==a.l.xb.ym&&a.L.j.Ha.call(this,a.l.q.CHANGE,{rowIdx:c,row:this.hb[c]});this.ye(!1)}}};a.L.prototype.pK=function(){for(var a,b=0;b<this.hb.length;b++)(a=this.hb[b])&&
(a.index=b)};a.L.prototype.Ah=function(d,b,c){c=c||{};b=-1==b?this.get(d).index:b;var f=c.silent;-1<b&&(void 0!==d&&d.yN===this&&(d.yN=null),this.hb.splice(b,1),f||(c.index=b,void 0!==d&&a.L.j.Ha.call(this,a.l.q.REMOVE,{rowIdx:b,row:d})));return d};a.L.yL=function(d,b,c,f,h){var g,l,k;if(e.isFunction(c)){if(1===c.length){g=c.call(h,d);l=c.call(h,b);g=a.$a.je(g)?g.split(","):[g];var n=a.$a.je(l)?l.split(","):[l];for(k=0;k<g.length;k++)if(l=a.L.Zg(g[k],n[k],f.sortDirection),0!==l)return l}return c.call(h,
d,b)}if(a.$a.je(c))for(c=c.split(","),k=0;k<c.length;k++)if(g=a.L.ek(d,c[k]),l=a.L.ek(b,c[k]),l=a.L.Zg(g,l,f.sortDirection),0!==l)return l;return 0};a.L.prototype.Jp=function(){return!this.wk};a.L.prototype.Pr=function(){this.wk=!0;a.L.j.Ha.call(this,a.l.q.REQUEST,null)};a.L.prototype.ye=function(d){this.wk=!1;a.L.j.Ha.call(this,a.l.q.SYNC,d)};a.Xc=function(a,b){this.hN=a;this.hc=b};o_("EmptyNodeSet",a.Xc,a);a.Xc.prototype.getParent=o_c("hN");a.a.b("EmptyNodeSet.prototype.getParent",{getParent:a.Xc.prototype.getParent});
a.Xc.prototype.pa=o_c("hc");a.a.b("EmptyNodeSet.prototype.getStart",{pa:a.Xc.prototype.pa});a.Xc.prototype.R=o_d(0);a.a.b("EmptyNodeSet.prototype.getCount",{R:a.Xc.prototype.R});a.Xc.prototype.getData=o_d(null);a.a.b("EmptyNodeSet.prototype.getData",{getData:a.Xc.prototype.getData});a.Xc.prototype.getMetadata=o_d(null);a.a.b("EmptyNodeSet.prototype.getMetadata",{getMetadata:a.Xc.prototype.getMetadata});a.xc=function(a,b){this.Ia=a;this.Oe=b};o_("NodeSetWrapper",a.xc,a);a.xc.prototype.getParent=function(){return this.Ia.getParent()};
a.a.b("NodeSetWrapper.prototype.getParent",{getParent:a.xc.prototype.getParent});a.xc.prototype.pa=function(){return this.Ia.pa()};a.a.b("NodeSetWrapper.prototype.getStart",{pa:a.xc.prototype.pa});a.xc.prototype.R=function(){return this.Ia.R()};a.a.b("NodeSetWrapper.prototype.getCount",{R:a.xc.prototype.R});a.xc.prototype.getData=function(a){return this.Ia.getData(a)};a.a.b("NodeSetWrapper.prototype.getData",{getData:a.xc.prototype.getData});a.xc.prototype.getMetadata=function(a){a=this.Ia.getMetadata(a);
this.Oe.call(null,a.key,a);return a};a.a.b("NodeSetWrapper.prototype.getMetadata",{getMetadata:a.xc.prototype.getMetadata});a.xc.prototype.Sc=function(d){return this.Ia.Sc&&(d=this.Ia.Sc(d),null!=d)?new a.xc(d,this.Oe):null};a.a.b("NodeSetWrapper.prototype.getChildNodeSet",{Sc:a.xc.prototype.Sc});a.wc=function(d,b,c,f,e){a.f.Ab(d,null);a.f.Ab(b,null);this.vP=e;this.gN=f;this.Co=d;this.Rs=b;this.Tc=c};o_("JsonNodeSet",a.wc,a);a.wc.prototype.getParent=o_c("gN");a.a.b("JsonNodeSet.prototype.getParent",
{getParent:a.wc.prototype.getParent});a.wc.prototype.pa=o_c("Co");a.a.b("JsonNodeSet.prototype.getStart",{pa:a.wc.prototype.pa});a.wc.prototype.R=function(){return Math.max(0,this.Rs-this.Co)};a.a.b("JsonNodeSet.prototype.getCount",{R:a.wc.prototype.R});a.wc.prototype.getData=function(d){a.f.assert(d<=this.Rs&&d>=this.Co);return this.Tc[d]?this.Tc[d].attr:null};a.a.b("JsonNodeSet.prototype.getData",{getData:a.wc.prototype.getData});a.wc.prototype.getMetadata=function(d){var b=[];a.f.assert(d<=this.Rs&&
d>=this.Co);b.key=this.Tc[d].id?this.Tc[d].id:this.Tc[d].attr.id;b.leaf=this.Tc[d].Qs;b.depth=this.Tc[d].depth;null==b.leaf&&(b.leaf=this.Tc[d].children&&0<this.Tc[d].children.length?!1:!0);return b};a.a.b("JsonNodeSet.prototype.getMetadata",{getMetadata:a.wc.prototype.getMetadata});a.wc.prototype.Gf=function(a,b){var c;b++;a.depth=b;if(a.children&&0!=a.children.length)for(c=0;c<a.children.length;c++)this.Gf(a.children[c],b)};a.wc.prototype.Sc=function(d){var b,c,f;c=this.Tc[d].depth;b=this.Tc[d].children;
if(0==b.length)return null;d=this.Tc[d].id?this.Tc[d].id:this.Tc[d].attr.id;for(f=0;f<b.length;f++)this.Gf(b[f],c);return new a.wc(0,b.length,b,d,0)};a.a.b("JsonNodeSet.prototype.getChildNodeSet",{Sc:a.wc.prototype.Sc});a.tc=function(a,b){this.Ia=a;this.hc=b};o_("FlattenedNodeSet",a.tc,a);a.tc.prototype.getParent=function(){return this.Ia.getParent()};a.a.b("FlattenedNodeSet.prototype.getParent",{getParent:a.tc.prototype.getParent});a.tc.prototype.pa=function(){return void 0!=this.hc?this.hc:this.Ia.pa()};
a.a.b("FlattenedNodeSet.prototype.getStart",{pa:a.tc.prototype.pa});a.tc.prototype.R=function(){void 0===this.Ao&&(this.Ao=this.Ww(this.Ia,0),void 0!=this.hc&&(this.Ao-=this.hc));return this.Ao};a.a.b("FlattenedNodeSet.prototype.getCount",{R:a.tc.prototype.R});a.tc.prototype.Ww=function(a,b){var c,f,e,g;c=a.pa();f=a.R();b+=f;if(a.Sc)for(e=0;e<f;e++)g=a.Sc(e+c),null!=g&&(b=this.Ww(g,b));return b};a.tc.prototype.getData=function(a){return this.wq(this.Ia,a,{index:this.Ia.pa()},this.za)};a.a.b("FlattenedNodeSet.prototype.getData",
{getData:a.tc.prototype.getData});a.tc.prototype.getMetadata=function(a){return this.wq(this.Ia,a,{index:this.Ia.pa()},this.uH)};a.a.b("FlattenedNodeSet.prototype.getMetadata",{getMetadata:a.tc.prototype.getMetadata});a.tc.prototype.uH=function(a,b){return a.getMetadata(b)};a.tc.prototype.za=function(a,b){return a.getData(b)};a.tc.prototype.wq=function(a,b,c,f){var e,g,l,k;e=a.pa();g=a.R();for(l=0;l<g;l++){k=c.index;if(k===b)return f.call(this,a,l+e);c.index=k+1;if(a.Sc&&(k=a.Sc(l+e),null!=k&&(k=
this.wq(k,b,c,f),null!=k)))return k}return null};a.Eb=function(d){a.Eb.j.constructor.call(this,d)};o_("DataGridDataSource",a.Eb,a);a.a.aa(a.Eb,a.Hc,"oj.DataGridDataSource");a.Eb.prototype.R=o_d(0);a.a.b("DataGridDataSource.prototype.getCount",{R:a.Eb.prototype.R});a.Eb.prototype.he=o_d("exact");a.a.b("DataGridDataSource.prototype.getCountPrecision",{he:a.Eb.prototype.he});a.Eb.prototype.Rc=function(){a.f.Q()};a.a.b("DataGridDataSource.prototype.fetchHeaders",{Rc:a.Eb.prototype.Rc});a.Eb.prototype.Qc=
function(){a.f.Q()};a.a.b("DataGridDataSource.prototype.fetchCells",{Qc:a.Eb.prototype.Qc});a.Eb.prototype.keys=function(){a.f.Q();return null};a.a.b("DataGridDataSource.prototype.keys",{keys:a.Eb.prototype.keys});a.Eb.prototype.ed=function(){a.f.Q();return null};a.a.b("DataGridDataSource.prototype.indexes",{ed:a.Eb.prototype.ed});a.Eb.prototype.sort=function(){a.f.Q()};a.a.b("DataGridDataSource.prototype.sort",{sort:a.Eb.prototype.sort});a.Eb.prototype.Ua=o_d(null);a.a.b("DataGridDataSource.prototype.getCapability",
{Ua:a.Eb.prototype.Ua})});
//# sourceMappingURL=oj-modular.map