define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojcomponents","ojs/ojvalidation"],function(a,e){function d(a){return a.delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-calendar td a","mouseout",function(){e(this).removeClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-calendar td a",
"mouseover",function(){e(this).addClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-calendar td a","focus",function(){e(this).addClass("oj-focus")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon.oj-widget-icon, .oj-datepicker-calendar td a",
"blur",function(){e(this).removeClass("oj-focus")})}var b=a.N.Cg(a.Ve.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"});a.ma("oj.ojInputDate",e.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",QN:"oj-datepicker-append",Cj:"oj-inputdatetime-input-trigger",cD:"oj-datepicker-calendar-icon",qt:"oj-datepicker-current-day",Po:"oj-datepicker-days-cell-over",Kt:"oj-datepicker-unselectable",rt:"oj-datepicker-desc",vt:"oj-datepicker-grid",Et:"oj-datepicker-div",Tl:"oj-inputdate-input-description",
Yh:"oj-inputdatetime-input",xj:"oj-has-trigger",So:"oj-datepicker-inline",cm:"oj-inputdatetime-date-only oj-widget",Sl:"oj-inputdatetime-input-container",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],options:{dayMetaData:null,showOn:"image",changeMonth:"select",changeYear:"select",yearRange:"c-10:c+10",daysOutsideMonth:"hidden",weekDisplay:"none",calculateWeek:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-
b)/864E5)/7)+1},min:null,max:null,numberOfMonths:1,currentMonthPos:0,stepMonths:"block",stepBigMonths:12,buttonPanel:"none",converter:a.N.Cg(a.Ve.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit"})},getNodeBySubId:function(a){var b=this._superApply(arguments);if(b)return b;var b=a.subId,d=this.Ra;if(b)switch(b){case "oj-datepicker-content":return d;case "oj-datepicker-calendar-icon":return e(".oj-datepicker-calendar-icon",this.Ge);case "oj-datepicker-prev-icon":return e(".oj-datepicker-prev-icon",
d);case "oj-datepicker-next-icon":return e(".oj-datepicker-next-icon",d);case "oj-datepicker-month":return e(".oj-datepicker-month",d);case "oj-datepicker-year":return e(".oj-datepicker-year",d);case "oj-datepicker-current":return e(".oj-datepicker-current",d);case "oj-datepicker-close":return e(".oj-datepicker-close",d)}return null},_GetDefaultStyleClass:o_d("oj-inputdate"),mm:function(){return[]},Ku:function(b){this._super(b);b.firstDayOfWeek=function(){return a.ha.uB()};b.dayWide=function(){return a.ha.us("wide")};
b.dayNarrow=function(){return a.ha.us("narrow")};b.monthWide=function(){return a.ha.As("wide")};b.monthAbbreviated=function(){return a.ha.As("abbreviated")}},om:function(){this.nd=!1;this.gy=this.Ge=null;this.Bk=4;this.eh=this.Zd=this.dh=this.Xd=this.we=0;this.fo=this.rg=this.qg=null;this.Sj={};var a=this.element[0].nodeName.toLowerCase();this.gy="div"===a||"span"===a;e(document).on("mousedown",e.proxy(this.Mp,this));this.Ra=d(e("\x3cdiv id\x3d'"+this._GetSubId(this.Et)+"' role\x3d'region' aria-labelledby\x3d'"+
this._GetSubId(this.rt)+"' class\x3d'oj-datepicker-content'\x3e\x3c/div\x3e"));e("body").append(this.Ra);e(this.element).wrap(e(e("\x3cdiv\x3e").addClass(this.cm)));this.Yn=this.element.parent()},_create:function(){this.om();var a=this._super();this.Gr(this.pi());this.isInLine()?this.gu():this.bJ();this.dq(this.options.disabled);return a},yp:function(){var a=this.options.showOn,b=e(e("\x3cspan\x3e").addClass(this.Cj));if("focus"===a||"both"===a)this.fo=e.proxy(this.show,this),this.element.on("focus",
this.fo);if("image"===a||"both"===a){a=e(e("\x3cspan/\x3e").addClass(this.cD+" oj-clickable-icon oj-widget-icon"));b.append(a);var d=this;a.on("click",function(){d.nd?d.hide():d.show();return!1});a.on("mouseenter",function(){e(this).addClass("oj-hover")}).on("mousedown",function(){e(this).addClass("oj-active")}).on("mouseleave",function(){e(this).removeClass("oj-hover oj-active")})}0<b.children().length&&(this.Ge=b,this.element.after(b),this.element.addClass(this.xj))},$E:function(){var a=this;this.element.on("paste",
function(){a._SetValue(e(this).val())});this.qg=e.proxy(this.Zm,this);this.rg=e.proxy(this.Hr,this);this.element.on("keydown",this.qg).on("blur",this.rg)},bJ:function(){this.element.addClass(this.Yh);this.gm(this.element);this.widget().addClass(this.Sl);this.yp();this.$E()},gm:function(a){var b=this._GetSubId(this.Tl);a.attr("aria-labelledby",b);this.pg=e("\x3cdiv class\x3d'oj-helper-hidden-accessible' id\x3d'"+b+"'\x3e"+this.options.inputDetail+"\x3c/div\x3e");this.widget().append(this.pg)},gu:function(){this.element.append(this.Ra);
this.element.addClass(this.So);this.nd=!0;this._SetValue(this.pi(),null,{mt:this.tf.$l});this.Ra.css("display","block")},isInLine:o_c("gy"),Zm:function(a){var b=e.ui.keyCode,d=!1;if(this.nd)switch(a.keyCode){case b.TAB:case b.ESCAPE:this.hide();break;case b.UP:case b.DOWN:this.Ra.find(".oj-datepicker-calendar").focus(),d=!0}else switch(a.keyCode){case b.UP:case b.DOWN:this.show(),d=!0}if(d||a.keyCode===b.ENTER)return a.preventDefault(),a.stopPropagation(),!1},DG:function(a){var b;b=!1;var d=e.ui.keyCode,
g=this._IsRTL();if(this.nd)switch(a.keyCode){case 84:a.altKey&&a.ctrlKey&&this.Ra.find(".oj-datepicker-current").focus();break;case 68:a.altKey&&a.ctrlKey&&this.Ra.find(".oj-datepicker-close").focus();break;case d.TAB:this.hide();break;case d.ENTER:return b=e("td."+this.Po+":not(."+this.qt+")",this.Ra),b[0]&&this.Nz(this.Xd,this.Zd,b[0]),a.preventDefault(),a.stopPropagation(),!1;case d.ESCAPE:this.hide();this.element.focus();b=!0;break;case d.PAGE_UP:a.ctrlKey&&a.altKey?this.Jc(-this.options.stepBigMonths,
"M",!0):a.altKey?this.Jc(-1,"Y",!0):this.Jc(-this.mk(),"M",!0);b=!0;break;case d.PAGE_DOWN:a.ctrlKey&&a.altKey?this.Jc(+this.options.stepBigMonths,"M",!0):a.altKey?this.Jc(1,"Y",!0):this.Jc(+this.mk(),"M",!0);b=!0;break;case d.END:this.we=this.jn(this.Zd,this.Xd);this.Ih(!0);b=!0;break;case d.HOME:this.we=1;this.Ih(!0);b=!0;break;case d.LEFT:this.Jc(g?1:-1,"D",!0);a.originalEvent.altKey&&this.Jc(a.ctrlKey?-this.options.stepBigMonths:-this.mk(),"M",!0);b=!0;break;case d.UP:this.Jc(-7,"D",!0);b=!0;
break;case d.RIGHT:this.Jc(g?-1:1,"D",!0);a.originalEvent.altKey&&this.Jc(a.ctrlKey?+this.options.stepBigMonths:+this.mk(),"M",!0);b=!0;break;case d.DOWN:this.Jc(7,"D",!0),b=!0}else a.keyCode===d.HOME&&a.ctrlKey&&(this.show(),b=!0);b&&(a.preventDefault(),a.stopPropagation())},Hr:function(a){try{this._SetValue(this.element.val(),a)}catch(b){}this.nd&&this.Ra.find(".oj-datepicker-calendar").focus()},_SetDisplayValue:function(a){this._superApply(arguments);this.nd&&this.Ih()},_SetValue:function(a,b,
d){var e=this._superApply(arguments);e&&this.Gr(this.pi());return e},_GetElementValue:function(){return this.options.value||""},_GetDefaultValidators:function(){var b=this._superApply(arguments),d=this.qi("min"),h=this.qi("max"),g={},g={};if(null!=d||null!=h)g={min:this.options.min,max:this.options.max,converter:this._GetConverter()},this.Sj[a.Sb.VALIDATOR_TYPE_DATETIMERANGE]=a.N.Yf(a.Sb.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g);null!=this.options.dayMetaData&&(g={dayMetaData:this.options.dayMetaData,
converter:this._GetConverter()},this.Sj[a.Sb.VALIDATOR_TYPE_DATERESTRICTION]=a.N.Yf(a.Sb.VALIDATOR_TYPE_DATERESTRICTION).createValidator(g));return e.extend(this.Sj,b)},Ih:function(a){this.Bk=4;var b=this.UG();this.Ra.empty().append(b.html);0<e("button",this.Ra).length&&e.each(e("button",this.Ra),function(a,b){e(b).ojButton()});this.ZE();this.Ra.find("."+this.Po+" a").mouseover();b.eB&&this.Ra.find(".oj-datepicker-calendar").attr("aria-activedescendant",b.eB);var d,b=this.Iq(),g=b[1];this.Ra.removeClass("oj-datepicker-multi-2 oj-datepicker-multi-3 oj-datepicker-multi-4").width("");
1<g&&this.Ra.addClass("oj-datepicker-multi-"+g).css("width",17*g+"em");this.Ra[(1!==b[0]||1!==b[1]?"add":"remove")+"Class"]("oj-datepicker-multi");this.nd&&(this.element.is(":visible")&&!this.element.is(":disabled"))&&(a||this.isInLine()?(a=this.Ra.find(".oj-datepicker-calendar"),a[0]!==document.activeElement&&a.focus()):this.element[0]!==document.activeElement&&this.element.focus());if(this.gd){d=this.gd;var l=this;setTimeout(function(){d===l.gd&&l.gd&&l.Ra.find("select.oj-datepicker-year:first").replaceWith(l.gd);
d=l.gd=null},0)}},Jc:function(a,b,d){this.options.disabled||(this.$u(a+("M"===b?this.options.currentMonthPos:0),b),this.Ih(d))},UH:function(){var a=new Date;this.we=a.getDate();this.dh=this.Xd=a.getMonth();this.eh=this.Zd=a.getFullYear();this.Jc()},Oz:function(a,b){var d=parseInt(a.options[a.selectedIndex].value,10);"M"===b?this.Xd=this.dh=d:this.Zd=this.eh=d;this.Jc()},Uv:function(a,b){b.setHours(a.getHours());b.setMinutes(a.getMinutes());b.setSeconds(a.getSeconds());b.setMilliseconds(a.getMilliseconds())},
Nz:function(a,b,d){e(d).hasClass(this.Kt)||this.options.disabled||(this.we=e("a",d).html(),this.Xd=a,this.Zd=b,(a=this.options.value)?(b=new Date(this.Zd,this.Xd,this.we),this.Uv(a,b),a=b):a=new Date(this.Zd,this.Xd,this.we),this._SetDisplayValue(this._GetConverter().format(a)),this._SetValue(a,null,{mt:this.tf.$l}),this.hide())},zn:function(){var a=new Date;a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},pi:function(){return this.cq(this.options.value,this.zn())},cq:function(a,
b){var d;null==a||""===a?d=b:"number"===typeof a?isNaN(a)?d=b:(d=this.zn(),d.setDate(d.getDate()+a)):d=new Date(a.getTime());return d=d||b},Gr:function(a){a=this.cq(a,this.zn());this.we=a.getDate();this.dh=this.Xd=a.getMonth();this.eh=this.Zd=a.getFullYear();this.$u()},oO:function(){return this.Zd&&""!==this.element.val()?new Date(this.Zd,this.Xd,this.we):null},mk:function(){var a=this.options.stepMonths;return e.isNumeric(a)?a:this.options.numberOfMonths},ZE:function(){var a=this.mk(),b=this;this.Ra.find("[data-handler]").map(function(){e(this).bind(this.getAttribute("data-event"),
{prev:function(){b.Jc(-a,"M",!0)},next:function(){b.Jc(+a,"M",!0)},hide:function(a){if("keyup"===a.type&&13===a.keyCode||"click"===a.type)b.hide(),a.preventDefault(),a.stopPropagation()},today:function(a){if("keyup"===a.type&&13===a.keyCode||"click"===a.type)b.UH(),a.preventDefault(),a.stopPropagation()},selectDay:function(){b.Nz(+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){b.Oz(this,"M");return!1},selectYear:function(){b.Oz(this,"Y");return!1},
calendarKey:function(a){b.DG(a)}}[this.getAttribute("data-handler")])})},UG:function(){var a,b,d,e,l,k=this.options.dayWide,n=this.options.dayNarrow,m=this.options.monthWide,p=this.options.monthAbbreviated,q=this.options.firstDayOfWeek,r,s,t,v,u,A,C,G,y="",E,I,x,w,z,F,B,K,J=new Date,J=new Date(J.getFullYear(),J.getMonth(),J.getDate()),M=this._IsRTL();l=this.options.buttonPanel;var O=this.Iq(),D=this.options.currentMonthPos,X=this.options.dayMetaData;K=null;var T=1!==O[0]||1!==O[1],U=this.qi("min"),
S=this.qi("max"),D=this.dh-D,P=this.eh,V=new Date(this.Zd,this.Xd,this.we),N=this.pi(),Q=N.getDate(),Z=N.getMonth(),aa=N.getFullYear(),R=this.options.disabled;N.setHours(0);N.setMinutes(0);N.setSeconds(0);N.setMilliseconds(0);0>D&&(D+=12,P--);if(S)for(a=new Date(S.getFullYear(),S.getMonth()-O[0]*O[1]+1,S.getDate()),a=U&&a<U?U:a;new Date(P,D,1)>a;)D--,0>D&&(D=11,P--);this.dh=D;this.eh=P;a=this.options.prevText;a=this.zv(-1,P,D)&&!R?"\x3ca class\x3d'oj-datepicker-prev-icon oj-enabled oj-widget-icon oj-clickable-icon' data-handler\x3d'prev' data-event\x3d'click' title\x3d'"+
a+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-prev-icon oj-disabled oj-widget-icon oj-clickable-icon' title\x3d'"+a+"'\x3e\x3c/a\x3e";b=this.options.nextText;b=this.zv(1,P,D)&&!R?"\x3ca class\x3d'oj-datepicker-next-icon oj-enabled oj-widget-icon oj-clickable-icon' data-handler\x3d'next' data-event\x3d'click' title\x3d'"+b+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-next-icon oj-disabled oj-widget-icon oj-clickable-icon' title\x3d'"+b+"'\x3e\x3c/a\x3e";d=this.options.currentText;e=this.isInLine()?
"":"\x3cbutton type\x3d'button' class\x3d'oj-datepicker-close oj-enabled oj-priority-primary' data-handler\x3d'hide' data-event\x3d'click keyup'\x3e"+this.options.closeText+"\x3c/button\x3e";l="default"===l?"\x3cdiv class\x3d'oj-datepicker-buttonpane'\x3e"+(M?e:"")+(this.hy(J)?"\x3cbutton type\x3d'button' class\x3d'oj-datepicker-current oj-enabled oj-priority-secondary' data-handler\x3d'today' data-event\x3d'click keyup'\x3e"+d+"\x3c/button\x3e":"")+(M?"":e)+"\x3c/div\x3e":"";d=this.options.weekDisplay;
e=this.options.daysOutsideMonth;r="";s="all";for(t=0;t<O[0];t++){v="";this.Bk=4;for(u=0;u<O[1];u++){s="all";E="";if(T){E+="\x3cdiv class\x3d'oj-datepicker-group";if(1<O[1])switch(u){case 0:E+=" oj-datepicker-group-first";s=M?"right":"left";break;case O[1]-1:E+=" oj-datepicker-group-last";s=M?"left":"right";break;default:E+=" oj-datepicker-group-middle",s=""}E+="'\x3e"}E+="\x3cdiv class\x3d'oj-datepicker-header"+(R?" oj-disabled ":" oj-enabled ")+"'\x3e"+(/all|left/.test(s)&&0===t?M?b:a:"")+(/all|right/.test(s)&&
0===t?M?a:b:"")+this.VG(D,P,U,S,0<t||0<u,m,p)+"\x3c/div\x3e\x3ctable class\x3d'oj-datepicker-calendar"+(R?" oj-disabled ":" oj-enabled ")+"' tabindex\x3d-1 data-handler\x3d'calendarKey' data-event\x3d'keydown' aria-readonly\x3d'true' role\x3d'grid' aria-labelledby\x3d'"+this._GetSubId(this.vt)+"'\x3e\x3cthead role\x3d'presentation'\x3e\x3ctr role\x3d'row'\x3e";I="number"===d?"\x3cth class\x3d'oj-datepicker-week-col'\x3e"+this.options.weekHeader+"\x3c/th\x3e":"";for(s=0;7>s;s++)A=(s+q)%7,I+="\x3cth role\x3d'columnheader' aria-label\x3d'"+
k[A]+"'"+(5<=(s+q+6)%7?" class\x3d'oj-datepicker-week-end'":"")+"\x3e\x3cspan title\x3d'"+k[A]+"'\x3e"+n[A]+"\x3c/span\x3e\x3c/th\x3e";E+=I+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody role\x3d'presentation'\x3e";I=this.jn(P,D);P===aa&&D===Z&&(Q=Math.min(Q,I));s=(this.hH(P,D)-q+7)%7;I=Math.ceil((s+I)/7);this.Bk=I=T?this.Bk>I?this.Bk:I:I;x=new Date(P,D,1-s);for(w=0;w<I;w++){E+="\x3ctr role\x3d'row'\x3e";z="none"===d?"":"\x3ctd class\x3d'oj-datepicker-week-col'\x3e"+this.options.calculateWeek(x)+"\x3c/td\x3e";
for(s=0;7>s;s++){B=x.getMonth()!==D;A=x.getTime()===N.getTime();C="oj-dp-"+w+"-"+s;(G=x.getTime()===V.getTime()&&D===this.Xd)&&(y=C);F=[!0,""];K=x.getFullYear();var W=x.getMonth(),ba=x.getDate(),ca=function Y(a,b,c){if(!a||b===c.length)return a;var d=b+1;return Y(a[c[b]],d,c)||Y(a["*"],d,c)};X&&(K=ca(X,0,[K,W,ba]))&&(F=[!K.disabled,K.className||""],K.tooltip&&F.push(K.tooltip));K=B&&"selectable"!==e||!F[0]||U&&x<U||S&&x>S;z+="\x3ctd role\x3d'gridcell' aria-disabled\x3d'"+!!K+"' aria-selected\x3d'"+
A+"' id\x3d'"+C+"' class\x3d'"+(5<=(s+q+6)%7?" oj-datepicker-week-end":"")+(B?" oj-datepicker-other-month":"")+(G?" "+this.Po:"")+(K||R?" "+this.Kt+" oj-disabled":" oj-enabled")+(B&&"hidden"===e?"":" "+F[1]+(A?" "+this.qt:"")+(x.getTime()===J.getTime()?" oj-datepicker-today":""))+"'"+(B&&"hidden"===e||!F[2]?"":" title\x3d'"+F[2].replace(/'/g,"\x26#39;")+"'")+(K?"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+x.getMonth()+"' data-year\x3d'"+x.getFullYear()+"'")+"\x3e"+(B&&"hidden"===
e?"\x26#xa0;":K||R?"\x3cspan class\x3d'oj-disabled'\x3e"+x.getDate()+"\x3c/span\x3e":"\x3ca class\x3d'oj-enabled"+(x.getTime()===N.getTime()?" oj-selected":"")+(B?" oj-priority-secondary":"")+"' href\x3d'#'\x3e"+x.getDate()+"\x3c/a\x3e")+"\x3c/td\x3e";x.setDate(x.getDate()+1)}E+=z+"\x3c/tr\x3e"}D++;11<D&&(D=0,P++);E+="\x3c/tbody\x3e\x3c/table\x3e"+(T?"\x3c/div\x3e"+(0<O[0]&&u===O[1]-1?"\x3cdiv class\x3d'oj-datepicker-row-break'\x3e\x3c/div\x3e":""):"");v+=E}r+=v}return{html:r+l,eB:y}},VG:function(c,
d,e,g,l,k,n){var m,p,q,r=this.options.changeMonth,s=this.options.changeYear,t=a.ha.OB()?"before":"after",v="\x3cdiv id\x3d'"+this._GetSubId(this.vt)+"' class\x3d'oj-datepicker-title' role\x3d'header'\x3e",u="",A=this.options.disabled;if(l||"none"===r)u+="\x3cspan class\x3d'oj-datepicker-month'\x3e"+k[c]+"\x3c/span\x3e";else{k=e&&e.getFullYear()===d;m=g&&g.getFullYear()===d;u+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-month "+(A?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectMonth' data-event\x3d'change' role\x3d'listbox'\x3e";
for(p=0;12>p;p++)(!k||p>=e.getMonth())&&(!m||p<=g.getMonth())&&(u+="\x3coption role\x3d'option' value\x3d'"+p+"' aria-selected\x3d'"+(p===c?"true' selected\x3d'selected'":"false'")+"\x3e"+n[p]+"\x3c/option\x3e");u+="\x3c/select\x3e"}"before"===t&&(v+=u+(l||"select"!==r||"select"!==s?"\x26#xa0;":""));if(!this.gd)if(this.gd="",l||"none"===s)v+="\x3cspan class\x3d'oj-datepicker-year'\x3e"+b.cb(new Date(d,c,1))+"\x3c/span\x3e";else{k=this.options.yearRange.split(":");q=(new Date).getFullYear();m=function(a){a=
a.match(/c[+\-].*/)?d+parseInt(a.substring(1),10):a.match(/[+\-].*/)?q+parseInt(a,10):parseInt(a,10);return isNaN(a)?q:a};n=m(k[0]);k=Math.max(n,m(k[1]||""));n=e?Math.max(n,e.getFullYear()):n;k=g?Math.min(k,g.getFullYear()):k;for(this.gd+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-year "+(A?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectYear' data-event\x3d'change' role\x3d'listbox'\x3e";n<=k;n++)this.gd+="\x3coption role\x3d'option' value\x3d'"+n+"' aria-selected\x3d'"+
(n===d?"true' selected\x3d'selected'":"false'")+"\x3e"+b.cb(new Date(n,c,1))+"\x3c/option\x3e";this.gd+="\x3c/select\x3e";v+=this.gd;this.gd=null}"after"===t&&(v+=(l||"select"!==r||"select"!==s?"\x26#xa0;":"")+u);v+="\x3cspan hidden id\x3d'"+this._GetSubId(this.rt)+"'\x3e"+this.options.datePicker+"\x3c/span\x3e";return v+"\x3c/div\x3e"},$u:function(a,b){var d=this.eh+("Y"===b?a:0),e=this.dh+("M"===b?a:0),l=Math.min(this.we,this.jn(d,e))+("D"===b?a:0),d=new Date(d,e,l);this.we=d.getDate();this.dh=
this.Xd=d.getMonth();this.eh=this.Zd=d.getFullYear()},Iq:function(){var a=this.options.numberOfMonths,a="string"===typeof a?parseInt(a,10):a;return null==a?[1,1]:"number"===typeof a?[1,a]:a},qi:function(a){var b=this.cq(this.options[a],null);if(b)return b;b=null;if(this.element.attr(a))try{b=Date.parse(this.element.attr(a));if(isNaN(b))return;b=new Date(b)}catch(d){}return this.options[a]=b},jn:function(a,b){return 32-(new Date(a,b,32)).getDate()},hH:function(a,b){return(new Date(a,b,1)).getDay()},
zv:function(a,b,d){var e=this.Iq();b=new Date(b,d+(0>a?a:e[0]*e[1]),1);0>a&&b.setDate(this.jn(b.getFullYear(),b.getMonth()));return this.hy(b)},hy:function(a){var b,d,e=this.qi("min"),l=this.qi("max"),k=null,n=null;if(b=this.options.yearRange)b=b.split(":"),d=(new Date).getFullYear(),k=parseInt(b[0],10),n=parseInt(b[1],10),b[0].match(/[+\-].*/)&&(k+=d),b[1].match(/[+\-].*/)&&(n+=d);return(!e||a.getTime()>=e.getTime())&&(!l||a.getTime()<=l.getTime())&&(!k||a.getFullYear()>=k)&&(!n||a.getFullYear()<=
n)},lO:function(a){function b(a){return{KP:1,wP:2,JP:3}[a]||a}return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_destroy:function(){var a=this._super();this.rg&&this.element.off("blur",this.rg);this.qg&&this.element.off("keydown",this.qg);this.fo&&this.element.off("focus",this.fo);this.Ge&&this.Ge.remove();this.pg&&(this.element.removeAttr("aria-labelledby"),this.pg.remove());this.element.unwrap();this.element.removeClass(this.Yh).removeClass(this.xj).removeClass(this.So).removeClass("oj-disabled");
this.Ra.remove();return a},refresh:function(){this._superApply(arguments);this.Ih();return this},show:function(){if(!this.nd&&!this.options.disabled){var a=this._IsRTL();this.Ra.empty();this.Ih();this.Ra.css({top:"",left:"",position:"absolute"});this.Ra.position({my:a?"right top":"left top",at:a?"right bottom":"left bottom",of:this.element,collision:"fit"});this.nd=!0;this.Ra.show();this.Ra.find(".oj-datepicker-calendar").focus();return this}},Mp:function(a){a=e(a.target);a[0]!==this.Ra[0]&&(0===
a.parents("#"+this._GetSubId(this.Et)).length&&!a.closest("."+this.Cj).length&&this.nd)&&this.hide()},hide:function(){this.nd&&!this.isInLine()&&(this.Ra.hide(),this.nd=!1);return this},dq:function(a){if(!this.isInLine()&&this.Ge){var b=this.Ge.children().filter("span");a?b.addClass("oj-disabled").removeClass("oj-enabled"):b.removeClass("oj-disabled").addClass("oj-enabled")}this.nd&&this.Ih()},_setOption:function(b,d){var e=null,g={},g={};if("value"===b)return!d&&this.element.val()&&(e=this.zn(),
this.Uv(this.options.value||e,e),d=e),e=this._super(b,d),this.Gr(d),e;e=this._superApply(arguments);"disabled"===b?this.dq(d):"max"===b||"min"===b?(g={min:this.options.min,max:this.options.max,converter:this._GetConverter()},this.Sj[a.Sb.VALIDATOR_TYPE_DATETIMERANGE]=a.N.Yf(a.Sb.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g),this._ResetAllValidators()):"dayMetaData"===b&&(g={dayMetaData:this.options.dayMetaData,converter:this._GetConverter()},this.Sj[a.Sb.VALIDATOR_TYPE_DATERESTRICTION]=a.N.Yf(a.Sb.VALIDATOR_TYPE_DATERESTRICTION).createValidator(g),
this._ResetAllValidators());return e},calendarDisplay:o_c("Ra"),widget:o_c("Yn")});a.ma("oj.ojInputTime",e.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",Cj:"oj-inputdatetime-input-trigger",dD:"oj-datepicker-time-icon",It:"ojInputTime",Tl:"oj-inputtime-input-description",Yh:"oj-inputdatetime-input",xj:"oj-has-trigger",Sl:"oj-inputdatetime-input-container",cm:"oj-inputdatetime-time-only oj-widget",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],options:{converter:a.N.Cg(a.Ve.CONVERTER_TYPE_DATETIME).createConverter({hour:"2-digit",
hour12:!0,minute:"2-digit"}),timeIncrement:"T00:30:00:00",datePicker:null},getNodeBySubId:function(a){var b=this._superApply(arguments);if(b)return b;b=a.subId;return"oj-combobox-drop"===b?this.Gb:"oj-datepicker-time-icon"===b?e(".oj-datepicker-time-icon",this.Ge):null},show:function(){if(!this.options.disabled){this.bf()&&this.bh.widget.hide();0===this.Gb.children().length&&this.en();this.Gb.css({top:"",left:""});this.Gb.width(this.element.parent().width());var a=this._IsRTL();this.Gb.position({my:a?
"right top":"left top",at:a?"right bottom":"left bottom",of:this.element,collision:"fit"});this.Ag=!0;this.Gb.show();a=e("[aria-selected]",this.Gb);1===a.length&&this.Ev(e(a));e("ul",this.Gb).focus()}},hide:function(){this.Ag&&(this.Gb.hide(),this.Ag=!1)},timeDisplay:o_c("Gb"),widget:function(){return this.bf()?this.bh.widget.widget():this.Yn},refresh:function(){this._superApply(arguments);this.en();return this},_GetDefaultStyleClass:o_d("oj-inputtime"),mm:function(){return[]},_SetDisplayValue:function(a){this.bf()&&
!this.Vm()||this._superApply(arguments);this.en()},_GetElementValue:function(){return this.options.value||""},om:function(){this.Ur=null;this.Ag=!1;this.pg=null;this.bh=this.options.datePicker;this.Gb=e("\x3cdiv id\x3d'"+this._GetSubId(this.It)+"' class\x3d'oj-combobox-drop oj-combobox-display-none'\x3e\x3c/div\x3e");e("body").append(this.Gb);e(document).on("mousedown",e.proxy(this.Mp,this))},gm:function(a){var b=this._GetSubId(this.Tl);a.attr("aria-labelledby",b);this.pg=e("\x3cdiv style\x3d'display:none;' id\x3d'"+
b+"'\x3e"+this.options.inputDetail+"\x3c/div\x3e");this.widget().append(this.pg)},bf:function(){return null!==this.bh},_create:function(){this.om();this.bf()||(e(this.element).wrap(e(e("\x3cdiv\x3e").addClass(this.cm)).addClass(this.Sl)),this.Yn=this.element.parent(),this.element.addClass(this.Yh),this.gm(this.element));if(!this.bf()||this.Vm()){this.rg=e.proxy(this.Hr,this);this.element.on("blur",this.rg);var a=this;this.element.on("paste",function(){a._SetValue(e(this).val())})}this.yp();var b=
this._super();this._setOption("disabled",this.options.disabled);return b},Vm:function(){return this.bh.widget.isInLine()},lG:function(){return!this.bf()||this.Vm()||"focus"===this.bh.widget.option("showOn")},yp:function(){var a=this.lG(),b=a?e(e("\x3cspan\x3e").addClass(this.Cj)):e("+ span",this.element),d=e(e("\x3cspan/\x3e").addClass(this.dD+" oj-clickable-icon oj-widget-icon"));if(!this.bf()||this.Vm())this.qg=e.proxy(this.Zm,this),this.element.on("keydown",this.qg);b.append(d);var g=this;d.on("click",
function(){g.Ag?g.hide():g.show()});d.on("mouseenter",function(){e(this).addClass("oj-hover")}).on("mousedown",function(){e(this).addClass("oj-active")}).on("mouseleave",function(){e(this).removeClass("oj-hover oj-active")});this.element.addClass(this.xj);this.Ge=b;a&&this.element.after(b)},Zm:function(a){var b=e.ui.keyCode,d=!1;if(this.Ag)switch(a.keyCode){case b.TAB:case b.ESCAPE:this.hide();break;case b.UP:case b.DOWN:e("ul",this.Gb).focus(),d=!0}else switch(a.keyCode){case b.UP:case b.DOWN:this.show(),
d=!0}if(d||a.keyCode===b.ENTER)return a.preventDefault(),a.stopPropagation(),!1},Hr:function(a){try{this._SetValue(this.element.val(),a)}catch(b){}this.Ag&&e("ul",this.Gb).focus()},Mp:function(a){a=e(a.target);a[0]!==this.Gb[0]&&0===a.parents("#"+this._GetSubId(this.It)).length&&(!a.closest("."+this.Cj).length&&this.Ag)&&this.hide()},en:function(){var a=this.DH(),b=e("\x3cul class\x3d'oj-combobox-results' tabindex\x3d'-1' role\x3d'listbox'\x3e\x3c/ul\x3e"),d=this.iH(),g=[],l;a.setHours(0);a.setMinutes(0);
a.setSeconds(0);a.setMilliseconds(0);g=this.QH(a);d=d||g[0].value;this.Gb.empty();a=0;for(l=g.length;a<l;a++){var k=g[a].value,n=e("\x3cli class\x3d'oj-combobox-result' role\x3d'presentation'\x3e"),m=e("\x3cdiv class\x3d'oj-combobox-result-label' data-value\x3d'"+k+"' role\x3d'option' id\x3d'"+this.uuid+"_sel"+a+"'\x3e"+g[a].label+"\x3c/li\x3e");d===k&&(m.attr("aria-selected","true"),n.addClass("oj-combobox-highlighted"));n.append(m);b.append(n)}this.Gb.append(b);e(".oj-combobox-result",b).on("mousemove",
function(){e(".oj-combobox-highlighted",b).removeClass("oj-combobox-highlighted");var a=e(this);a.addClass("oj-combobox-highlighted");b.attr("aria-activedescendant",a.first()[0].id)});var p=this;b.on("click",function(a){p.hide();p.Sy(a)});b.on("keydown",function(a){p.FL(a)})},Fx:function(){return this.bf()?this.bh.converter:this._GetConverter()},QH:function(a){var b=[],d=this.Fx();if(a){var e=this.options.timeIncrement;if(e)if(4===e.split(":").length){if(e=this.PH(e)){var l=new Date(a),k="";do k=
d.cb(l),b.push({label:k,value:k}),l.setHours(l.getHours()+e.SM),l.setMinutes(l.getMinutes()+e.jN),l.setSeconds(l.getSeconds()+e.BN),l.setMilliseconds(l.getMilliseconds()+e.iN);while(l.getDate()===a.getDate())}}else throw Error("timeIncrement value should be in the format of Thh:mm:ss:SS");}return b},PH:function(a){var b=null;a=a.split(":");4===a.length&&(b={SM:parseInt(a[0].substring(1),10),jN:parseInt(a[1],10),BN:parseInt(a[2],10),iN:parseInt(a[3],10)});return b},iH:function(){var a=this.Fx(),b=
this.options.value;return b?a.cb(b):""},FL:function(a){if(this.Ag){var b=e.ui.keyCode,d=!1;switch(a.keyCode){case b.TAB:this.hide();break;case b.ESCAPE:this.hide();this.element.focus();d=!0;break;case b.UP:this.Oy(a,"prev");d=!0;break;case b.DOWN:this.Oy(a,"next");d=!0;break;case b.ENTER:this.Sy(a),d=!0}if(d)return a.preventDefault(),a.stopPropagation(),!1}},Ev:function(a){a=a.position().top;var b=this.Gb.height(),d=e(".oj-combobox-results",this.Gb),g=d.scrollTop();(b+g<a||a<g)&&d.scrollTop(a)},Oy:function(a,
b){var d=e(".oj-combobox-highlighted",this.Gb),g=e("ul",this.Gb);if(1===d.length){var l=e(d)[b]();1===l.length&&(d.removeClass("oj-combobox-highlighted"),l.addClass("oj-combobox-highlighted"),g.attr("aria-activedescendant",l.first()[0].id),this.Ev(l))}},Sy:function(){var a=this.Gb,b=e("[aria-selected]",a),d=e("ul",a),a=e(".oj-combobox-highlighted div",a);1===a.length&&(1===b.length&&(b.removeAttr("aria-selected"),b.parent().removeClass("oj-combobox-highlighted")),a.attr("aria-selected","true"),a.parent().addClass("oj-combobox-highlighted"),
this._SetDisplayValue(a.attr("data-value")),this._SetValue(a.attr("data-value")),d.attr("aria-activedescendant",a[0].id),this.hide(),this.element.focus(),this.bf()&&this.bh.widget.hide())},DH:function(){return new Date(1950,0,1)},_destroy:function(){var a=this._super();this.Ge&&this.Ge.remove();this.rg&&this.element.off("blur",this.rg);this.qg&&this.element.off("keydown",this.qg);this.Gb.remove();this.bf()||this.element.unwrap();this.pg&&(this.element.removeAttr("aria-labelledby"),this.pg.remove());
this.element.removeClass(this.Yh).removeClass(this.xj).removeClass("oj-disabled");return a},_setOption:function(a,b){var d=null;if("value"===a)return!b&&this.element.val()&&(b=new Date),d=this._super(a,b);d=this._superApply(arguments);if("disabled"===a){var e=this.Ge.children().filter("span");b?e.addClass("oj-disabled").removeClass("oj-enabled"):e.removeClass("oj-disabled").addClass("oj-enabled")}else"timeIncrement"===a&&this.en();return d}});a.ma("oj.ojInputDateTime",e.oj.ojInputDate,{version:"1.0.0",
widgetEventPrefix:"oj",Tl:"oj-inputdatetime-input-description",cm:"oj-inputdatetime-date-time oj-widget",options:{timeIncrement:"T00:30:00:00",converter:a.N.Cg(a.Ve.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",hour12:!0,minute:"2-digit"})},getNodeBySubId:function(a){var b=this._superApply(arguments);if(b)return b;b=a.subId;return"oj-datepicker-time"===b||"oj-datepicker-time-icon"===b?this.ce.ojInputTime("getNodeBySubId",a):null},_GetMessagingTriggerElement:function(){return this.isInLine()?
this.Hh:this._super()},_GetDefaultStyleClass:o_d("oj-inputdatetime"),$t:o_d("oj-ojInputDate"),om:function(){this._super();this.Hh=this.element;this.Ur=this.xA=this.ce=null},gu:function(){this._super();this.Ly=this.element;var a=e("\x3cinput type\x3d'text'\x3e");a.insertAfter(this.element);this.Hh=a;a.addClass(this.Yh);this.ZL();this.gm(a)},_create:function(){var a=this._super(),b=this.Gx(this._GetConverter());if(null===b)throw Error("Plase use ojInputDate if you do not have time portion");this.tk();
this.xA=e.proxy(this.GL,this);this.ce=this.Hh.ojInputTime({converter:null,optionChange:this.xA,timeIncrement:this.options.timeIncrement,datePicker:{widget:this,converter:b}});this.ce.ojInputTime("option","disabled",this.options.disabled);this.isInLine()&&this.Hh.val(b.cb(this.pi()));return a},ZL:function(){e(this.Hh).wrap(e(e("\x3cdiv\x3e").addClass(this.Sl)));this.Yn=this.Hh.parent()},Gx:function(b){b=b.Ob();var d={},h="hour hour12 minute second millisecond timeFormat".split(" "),g,l;g=0;for(l=h.length;g<
l;g++)h[g]in b&&("timeFormat"===h[g]&&(d.formatType="time"),d[h[g]]=b[h[g]]);return e.isEmptyObject(d)?null:this.Ur=b=a.N.Cg(a.Ve.CONVERTER_TYPE_DATETIME).createConverter(d)},GL:function(a,b){if("value"===b.option){var d=new Date(this.pi()),e=this.Ur.parse(b.value);d.setHours(e.getHours());d.setMinutes(e.getMinutes());d.setSeconds(e.getSeconds());d.setMilliseconds(e.getMilliseconds());this.option("value",d)}},Zm:function(a){var b=e.ui.keyCode,d=!1;if(!this.nd)switch(a.keyCode){case b.UP:case b.DOWN:a.altKey&&
(this.ce.ojInputTime("show"),d=!0)}return d?(a.preventDefault(),a.stopPropagation(),!1):this._superApply(arguments)},_destroy:function(){var a=this._super();this.ce.ojInputTime("destroy");this.isInLine()&&(this.Ly.unwrap(),this.Ly.removeClass(this.So),this.Hh.remove());return a},show:function(){this.ce.ojInputTime("hide");return this._super()},dq:function(a){var b=this._superApply(arguments);this.isInLine()&&this.ce&&this.ce.ojInputTime("option","disabled",a);return b},refresh:function(){this._superApply(arguments);
this.ce.ojInputTime("refresh");return this},_setOption:function(a,b){this.ce&&("timeIncrement"===a||"disabled"===a?this.ce.ojInputTime("option",a,b):"converter"===a&&this.ce.ojInputTime("option",a,this.Gx(b)));return this._superApply(arguments)}})});
//# sourceMappingURL=oj-modular.map