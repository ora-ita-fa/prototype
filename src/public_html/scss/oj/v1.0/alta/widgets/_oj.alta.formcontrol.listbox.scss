@import "../../utilities/oj.utilities";
@import "../../common/widgets/oj.common.formcontrol.mixins";
  

$includeListboxClasses:   $includeFormControlClasses !default;

// include dependencies
@if $includeListboxClasses != false {
  $includeIconClasses:              true !global;
  $includeNoteWindowClasses:        true !global;
  $includeLabelClasses:             true !global;
  $includeMessagingClasses:         true !global;
  $includeFormControlCommonClasses: true !global;
}

@import "../../common/helpers/oj.common.helpers"; 
@import "oj.alta.icons";
@import "oj.alta.tooltip";
@import "oj.alta.messaging";
@import "oj.alta.formcontrol.label";
@import "oj.alta.formcontrol.common";

@if $includeListboxClasses != false {
  @include exports("listbox") {

    /* listbox */
    /* --------------------------------------------------------------- */
    
    .oj-listbox {
      position: relative;
      display: inline-block;
      vertical-align: middle; 
      max-width: $formControlLargeMaxWidth;
      min-width: $formControlMinWidth;
      width: 100%;
      @include oj-box-sizing-property(border-box); 
    }


    .oj-listbox .oj-listbox-choice {
      @include oj-form-control-content;
      display: block;
      overflow: hidden;
      position: relative;
      white-space: nowrap;
      background-clip: padding-box;
      text-overflow: ellipsis;
      line-height: 26px;

      @include oj-ltr() {
        padding-left: 5px;
      }
      @include oj-rtl() {
        padding-right: 5px;
      }

    }

    .oj-listbox .oj-listbox-choice .oj-listbox-search {
      display: block;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis; 
      @include oj-ltr() {
        margin-right: 5px;
      }
      @include oj-rtl() {
        margin-left: 5px; 
      }
    }
      
    .oj-listbox .oj-listbox-choice abbr {
      display: none;
      width: 12px;
      height: 12px;
      position: absolute;
      top: 6px;
      font-size: 1px;
      border: 0;
      cursor: pointer;
      outline: 0; 
      @include oj-ltr() {
        right: 34px;
      }
      @include oj-rtl() {
        left: 34px; 
      }
    }

    .oj-listbox .oj-listbox-choice abbr:hover {
      cursor: pointer; 
    }

    /* suppress all browser decorations of anchors in the listbox */
    /* --------------------------------------------------------- */
    .oj-listbox a,
    .oj-listbox a:active,
    .oj-listbox a:visited,
    .oj-listbox a:hover,
    .oj-listbox a:focus {
      text-decoration: none;
    }

    .oj-listbox.oj-listbox-allowclear .oj-listbox-choice abbr {
      display: inline-block; 
    }

    .oj-listbox.oj-listbox-allowclear .oj-listbox-choice .oj-listbox-search {
      @include oj-ltr() {
        margin-right: 42px; 
      }
      @include oj-rtl() {
        margin-left: 42px; 
      }
    }

    .oj-listbox-drop {
      @include oj-box-sizing-property(border-box); 
      position: absolute;
      // http://aseng-wiki.us.oracle.com/asengwiki/display/ASDevJDeveloper/JET+Popup+Framework
      z-index: 9999;
      top: 100%;
      background: $background1Color;
      border: $borderWidth solid $windowBorderColor;
      border-top: 0;
      box-shadow: 1px 3px 3px 0 rgba(0, 0, 0, .35);
    }

    .oj-listbox-drop-auto-width {
      border-top: $borderWidth solid $windowBorderColor;
      width: auto; 
    }

    .oj-listbox-drop.oj-listbox-drop-above {
      border-top: $borderWidth solid $windowBorderColor;
      border-bottom: 0;
      box-shadow: $smallBoxShadow;
    }

    /* results */
    .oj-listbox-results {
      max-height: 200px;
      padding: 0;
      margin: 1px 0 2px 0;
      position: relative;
      overflow-x: hidden;
      overflow-y: auto;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0); 
    }

    .oj-listbox-results ul.oj-listbox-result-sub {
      margin: 0;
      padding-left: 0; 
    }

    // todo: there seems to be a lot of hard coded px values. Please try testing your widget in the giant theme
    // Currently you can change the theme on the style lab page (this may move to another location)
    // look for "giant" here:
    // http://slc01hih.us.oracle.com:8080/hudson/job/OJET_Build/lastSuccessfulBuild/artifact/apps/components/public_html/globalStyleLab.html
    .oj-listbox-results ul.oj-listbox-result-sub > li .oj-listbox-result-label {
      padding-left: 20px; 
    }

    .oj-listbox-results ul.oj-listbox-result-sub ul.oj-listbox-result-sub > li .oj-listbox-result-label {
      padding-left: 40px; 
    }

    .oj-listbox-results ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub > li .oj-listbox-result-label {
      padding-left: 60px; 
    }

    .oj-listbox-results ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub > li .oj-listbox-result-label {
      padding-left: 80px; 
    }

    .oj-listbox-results ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub > li .oj-listbox-result-label {
      padding-left: 100px; 
    }

    .oj-listbox-results ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub > li .oj-listbox-result-label {
      padding-left: 110px; 
    }

    .oj-listbox-results ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub ul.oj-listbox-result-sub > li .oj-listbox-result-label {
      padding-left: 120px; 
    }

    .oj-listbox-results li {
      list-style: none;
      display: list-item;
      background-image: none; 
    }

    // why are you using ">" here, is it needed?
    .oj-listbox-results li.oj-listbox-result-with-children > .oj-listbox-result-label {
      font-weight: bold; 
    }

    // why are you using contextual selectors? Can you remove the ".oj-listbox-results " 
    // from the front here and just use .oj-listbox-result-label, 
    // same comment for all css in this file, if you don't need a contextual selector please remove it.
    .oj-listbox-results .oj-listbox-result-label {
      padding-left: 5px;
      line-height: 24px;
      margin: 0;
      cursor: pointer;
      min-height: 1em;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none; 
    }

    .oj-listbox-results .oj-listbox-highlighted {
      background: $interaction2Color;
    }

    .oj-listbox-results .oj-listbox-highlighted:active {
      background: $interaction3Color;
    }

    .oj-listbox-results li em {
      background: #feffde;
      font-style: normal; 
    }

    .oj-listbox-results .oj-listbox-highlighted em {
      background: transparent; 
    }

    /*
    disabled look for disabled choices in the results dropdown
    */
    .oj-listbox-results .oj-disabled {
      color: $textColorDisabled;
      display: list-item;
      cursor: default; 
    }

    .oj-listbox-results .oj-listbox-selected {
      display: none; 
    }

    /* disabled styles */
    .oj-listbox.oj-disabled .oj-listbox-choice,
    .oj-listbox.oj-disabled .oj-listbox-choice input {
      @include oj-form-control-content-disabled;
    }

    .oj-listbox-search-field .oj-listbox-input {
      padding: 5px;
      margin: 1px 0;
      font-family: $fontFamily;
      font-size: $fontSize;
      color: $textColor;
      background-color: $formControlBgColor;
      outline: 0;
      border: 0; 
    }

    .oj-listbox-chosen.oj-listbox-default {
      color: $tertiaryTextColor; 
    }

    /* Invalid styling for the widget */
    .oj-listbox.oj-invalid .oj-listbox-choice {
        border: $formControlMessagingBorderWidth solid $borderColorError;
    }

    /* Warning styling for the widget */
    .oj-listbox.oj-warning .oj-listbox-choice {
        border: $formControlMessagingBorderWidth solid $borderColorWarning;
    }

    .oj-listbox-offscreen, .oj-listbox-offscreen:focus {
      clip: rect(0 0 0 0);
      width: 1px;
      height: 1px;
      border: 0;
      margin: 0;
      padding: 0;
      overflow: hidden;
      position: absolute;
      outline: 0;
      left: 0;
      top: 0; 
    }

    .oj-listbox-drop-mask {
      border: 0;
      margin: 0;
      padding: 0;
      position: fixed;
      left: 0;
      top: 0;
      min-height: 100%;
      min-width: 100%;
      height: auto;
      width: auto;
      opacity: 0;
      z-index: 9998;
      /* styles required for IE to work */
      background-color: $background1Color;
      filter: alpha(opacity=0); 
    }

    .oj-listbox-display-none {
      display: none; 
    }

    .oj-listbox-measure-scrollbar {
      position: absolute;
      top: -10000px;
      left: -10000px;
      width: 100px;
      height: 100px;
      overflow: scroll; 
    }


    .oj-listbox-chosen {
      width: 100%;
      border: 0;
      box-shadow: none;
      outline: 0;
    }


    /* icon */
    /* -----------------------------*/

    /* open icon for listbox */
    .oj-listbox-open-icon:before {
      @extend .oj-fwk-icon-arrow02-s:before;
    }

    .oj-listbox-open-icon {
      text-align: center;
      vertical-align: middle;
      font-size: $rootFontSize;
      padding: 8px;
      overflow: hidden;
      cursor: pointer;
      position: absolute;

      @include oj-ltr() {
        right: 0;
      }
      @include oj-rtl() {
        left: 0;
      }
    }

    /* Tablet/Mobile: clear entry icon for listbox */
    .oj-listbox-search-clear-entry-icon:before {
      @extend .oj-fwk-icon-cross:before;
    }

    .oj-listbox-search-clear-entry-icon {
      display: block;
      width: 22px;
      height: 22px;
      position: absolute;
      right: 5px;
      top: 3px;
      font-size: 1px;
      outline: none;
    }

    /* search icon for listbox */
    .oj-listbox-search-icon:before {
      @extend .oj-fwk-icon-magnifier:before;
    }

    .oj-listbox-search-icon {
      text-align: center;
      overflow: hidden;
      vertical-align:text-bottom;
      cursor: pointer;
      font-size: 1rem;
      color: $iconColorEnabled;
    }


    .oj-listbox-search {
      @include oj-box-sizing-property(border-box);
      width: 100%;
      display: inline-table;
      background-color: $background3Color;
      border: $borderWidth solid $border4Color;
      @include oj-border-radius($mediumBorderRadius);
    }

    .oj-listbox-search .oj-listbox-input {
      @include oj-box-sizing-property(border-box);
      width: 100%;
      color: $textColor;
      padding: 6px 5px 5px 5px;
      display: table-cell;
      border: 0;
      box-shadow: none;
      outline: 0;
     }

    .oj-listbox-spyglass-box {
      @include oj-box-sizing-property(border-box);
      background-color: $background1Color;
      display: table-cell;
      line-height: 26px;
      width: 28px;
      text-align: center;
      vertical-align: middle;
      border:0;
      box-shadow: none;
   }

    .oj-listbox-search-wrapper {
      border: 0;
      padding: 5px;
      background-color: $background3Color;
    }

   .oj-listbox-no-results {
      @include oj-ltr() {
        padding-left: 5px;
      }
      @include oj-rtl() {
        padding-right: 5px;
      }
   }

  }
}